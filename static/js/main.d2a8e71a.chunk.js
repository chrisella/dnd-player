(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports={wrapper:"ImageUploader_wrapper__1-d-8",fileInput:"ImageUploader_fileInput__1RqEo",button:"ImageUploader_button__2tSgX",progressBar:"ImageUploader_progressBar__1pXDI"}},324:function(e,t,a){e.exports={chatWrapper:"App_chatWrapper__2U1dO"}},326:function(e,t,a){e.exports={wrapper:"Authentication_wrapper__1wnUP",username:"Authentication_username__1zpTM",password:"Authentication_password__1usTz",loginButton:"Authentication_loginButton__36BHo",logoutButton:"Authentication_logoutButton__1QowG"}},413:function(e,t,a){e.exports=a(816)},418:function(e,t,a){},53:function(e,t,a){},542:function(e,t,a){},545:function(e,t,a){},77:function(e,t,a){e.exports={chatinput:"Chat_chatinput__1_63y",messageWrapper:"Chat_messageWrapper__NibWu",messages:"Chat_messages__umiIH",rollButton:"Chat_rollButton__2gB8L",chat:"Chat_chat__1_6O9",chatHeader:"Chat_chatHeader__2t-78",username:"Chat_username__2zIlL",chatInputWrapper:"Chat_chatInputWrapper__26-qp"}},815:function(e,t,a){"use strict";a.r(t);var r,n=a(3),c=a(4),i=a(6),o=a(5),s=a(7),l=a(0),u=a.n(l),p=a(60),m=a(324),d=a.n(m),h=a(24),f=a(15),v=a(38),E=a(39);a(53);!function(e){e[e.ToHit=0]="ToHit",e[e.Damage=1]="Damage",e[e.SavingThrow=2]="SavingThrow",e[e.Text=3]="Text"}(r||(r={}));var b,g,y=function(){function e(){Object(n.a)(this,e)}return Object(c.a)(e,null,[{key:"getProficiencyBonus",value:function(e){var t=e.levels.map(function(e){return e.level}).reduce(function(e,t){return e+t});return 1+Math.ceil(t/4)}},{key:"getSaveModifier",value:function(t,a){var r=this.getAbilityModifier(t,a),n=t.proficiencies.saves[a]||0,c=e.getProficiencyBonus(t);return r+Math.floor(n*c)}},{key:"getAbilityModifier",value:function(e,t){return Math.floor((e[t]-10)/2)}},{key:"getInitiativeModifier",value:function(e){return this.getAbilityModifier(e,"dexterity")}},{key:"mapCharacterAttackEffect",value:function(e,t){switch(e.type){case r.ToHit:var a=e;return{type:r.ToHit,modifier:this.getAbilityModifier(t,a.ability)+this.getProficiencyBonus(t),critRange:20};case r.Damage:var n=e;return{type:r.Damage,damageType:n.damageType,diceCount:n.diceCount,diceSize:n.diceSize,bonus:n.ability?this.getAbilityModifier(t,n.ability):0};case r.SavingThrow:var c=e;return{type:r.SavingThrow,saveType:c.saveType,saveDC:10+this.getAbilityModifier(t,c.DCAbility),onSave:this.mapCharacterAttackEffect(c.onSave,t),onFail:this.mapCharacterAttackEffect(c.onFail,t)};case r.Text:var i=e;return{type:r.Text,text:i.text};default:throw new Error("Unhandled attack effect type ".concat(e.type,"."))}}},{key:"getAttacks",value:function(e){var t=this;return[].concat(e.equipment.map(function(e){return e.attacks||[]})).concat(e.attacks).flat().map(function(a){return{name:a.title,range:a.range,effects:a.effects.map(function(a){return t.mapCharacterAttackEffect(a,e)})}})}},{key:"getShortAbilityName",value:function(e){switch(e){case"strength":return"STR";case"dexterity":return"DEX";case"constitution":return"CON";case"intelligence":return"INT";case"wisdom":return"WIS";case"charisma":return"CHA";default:return""}}},{key:"getLongAbilityName",value:function(e){switch(e){case"strength":return"Strength";case"dexterity":return"Dexterity";case"constitution":return"Consititution";case"intelligence":return"Intelligence";case"wisdom":return"Wisdom";case"charisma":return"Charisma";default:return""}}},{key:"getLongSkillName",value:function(e){switch(e){case"acrobatics":return"Acrobatics";case"animalHandling":return"Animal Handling";case"arcana":return"Arcana";case"athletics":return"Athletics";case"deception":return"Deception";case"history":return"History";case"insight":return"Insight";case"intimidation":return"Intimidation";case"investigation":return"Investigation";case"medicine":return"Medicine";case"nature":return"Nature";case"perception":return"Perception";case"performance":return"Performance";case"persuasion":return"Persuasion";case"religion":return"Religion";case"sleightOfHand":return"Sleight of Hand";case"stealth":return"Stealth";case"survival":return"Survival";default:return""}}}]),e}(),O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=y.getAbilityModifier(r,a);return u.a.createElement("div",{className:"ability",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"ability-title"},this.getLongName(a)),u.a.createElement("div",{className:"ability-modifier"},u.a.createElement("div",{className:"ability-symbol"},n<0?"-":"+"),u.a.createElement("div",{className:"ability-number"},Math.abs(n))),u.a.createElement("div",{className:"ability-score"},r[a]))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"getLongName",value:function(e){switch(e){case"strength":return"Strength";case"dexterity":return"Dexterity";case"constitution":return"Constitution";case"intelligence":return"Intelligence";case"wisdom":return"Wisdom";case"charisma":return"Charisma";default:return""}}},{key:"handleClick",value:function(e,t){var a=y.getAbilityModifier(this.props.character,this.props.ability),r=(a<0?"":"+")+a,n=new E.DiceRoll("d20"+r),c={type:"roll",rollType:"Ability",rollName:this.getLongName(this.props.ability),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new E.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=y.getSaveModifier(r,a),c=2===r.proficiencies.saves[a]?"expertise":1===r.proficiencies.saves[a]?"proficient":.5===r.proficiencies.saves[a]?"half-proficient":"none";return u.a.createElement("div",{className:"save",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"save-wrapper"},u.a.createElement("div",{className:"save-proficiency ".concat(c)}),u.a.createElement("div",{className:"save-title"},y.getShortAbilityName(a)),u.a.createElement("div",{className:"save-modifier"},u.a.createElement("span",{className:"save-symbol"},n<0?"-":"+"),u.a.createElement("span",{className:"save-number"},Math.abs(n)))))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"getLongName",value:function(e){switch(e){case"strength":return"Strength Save";case"dexterity":return"Dexterity Save";case"constitution":return"Constitution Save";case"intelligence":return"Intelligence Save";case"wisdom":return"Wisdom Save";case"charisma":return"Charisma Save";default:return""}}},{key:"handleClick",value:function(e,t){var a=y.getSaveModifier(this.props.character,this.props.ability),r=(a<0?"":"+")+a,n=new E.DiceRoll("d20"+r),c={type:"roll",rollType:"Save",rollName:this.getLongName(this.props.ability),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new E.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),j=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=t.skill,c=this.getSkillModifier(r,n,a),i=2===r.proficiencies.skills[n]?"expertise":1===r.proficiencies.skills[n]?"proficient":.5===r.proficiencies.skills[n]?"half-proficient":"none";return u.a.createElement("div",{className:"skill",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"skill-wrapper"},u.a.createElement("div",{className:"skill-proficiency ".concat(i)}),u.a.createElement("div",{className:"skill-ability"},y.getShortAbilityName(a)),u.a.createElement("div",{className:"skill-title"},y.getLongSkillName(n)),u.a.createElement("div",{className:"skill-modifier"},u.a.createElement("div",{className:"skill-symbol"},c<0?"-":"+"),u.a.createElement("div",{className:"skill-number"},Math.abs(c)))))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"getSkillModifier",value:function(e,t,a){var r=Math.floor((e[a]-10)/2),n=e.proficiencies.skills[t]||0,c=y.getProficiencyBonus(e);return r+Math.floor(n*c)}},{key:"handleClick",value:function(e,t){var a=this.getSkillModifier(this.props.character,this.props.skill,this.props.ability),r=(a<0?"":"+")+a,n=new E.DiceRoll("d20"+r),c=(this.props.ability,{type:"roll",rollType:"Skill",rollName:"".concat(this.props.skill," (").concat(this.props.ability,")"),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]});if(t){var i=new E.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character,t=y.getProficiencyBonus(e);return u.a.createElement("div",{className:"proficiency"},u.a.createElement("div",{className:"proficiency-title"},"Proficiency"),u.a.createElement("div",{className:"proficiency-modifier"},u.a.createElement("div",{className:"proficiency-symbol"},"+"),u.a.createElement("div",{className:"proficiency-number"},t)))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.character,t=[],a=0,r=Object.keys(e.speed);a<r.length;a++){var n=r[a];t.push(u.a.createElement("div",{className:"speed-container",key:n},u.a.createElement("div",{className:"speed-popup-wrap"},u.a.createElement("span",{className:"speed-number"},e.speed[n]),u.a.createElement("span",{className:"speed-unit"},"ft.")),u.a.createElement("div",{className:"speed-type"},n)))}return u.a.createElement("div",{className:"speed"},u.a.createElement("div",{className:"speed-title"},"Speed"),u.a.createElement("div",{className:"speed-container"},u.a.createElement("span",{className:"speed-number"},e.speed.walk),u.a.createElement("span",{className:"speed-unit"},"ft.")),u.a.createElement("div",{className:"speed-popup"},u.a.createElement("div",{className:"speed-title"},"Speed"),t))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),N=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=y.getInitiativeModifier(t);return u.a.createElement("div",{className:"initiative",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"initiative-title"},"Initiative"),u.a.createElement("div",{className:"initiative-modifier"},u.a.createElement("div",{className:"initiative-symbol"},a<0?"-":"+"),u.a.createElement("div",{className:"initiative-number"},Math.abs(a))))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handleClick",value:function(e,t){var a=y.getInitiativeModifier(this.props.character),r=(a<0?"":"+")+a,n=new E.DiceRoll("d20"+r),c={type:"roll",rollType:"Initiative",rollName:"Initiative",modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new E.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;return u.a.createElement("div",{className:"ac"},u.a.createElement("div",{className:"ac-title"},"AC"),u.a.createElement("div",{className:"ac-number"},e.ac))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),T=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;return u.a.createElement("div",{className:"hp"},u.a.createElement("div",{className:"hp-title"},"Hit Points"),u.a.createElement("div",{className:"hp-current"},u.a.createElement("span",null,e.hp),u.a.createElement("span",{className:"hp-header"},"Current")),u.a.createElement("div",{className:"hp-divider"},"/"),u.a.createElement("div",{className:"hp-max"},u.a.createElement("span",null,e.maxHp),u.a.createElement("span",{className:"hp-header"},"Max")))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component);a(542);!function(e){e[e.Text=0]="Text",e[e.DiceRoll=1]="DiceRoll",e[e.Condition=2]="Condition"}(b||(b={})),function(e){e[e.Disadvantage=-1]="Disadvantage",e[e.None=0]="None",e[e.Advantage=1]="Advantage"}(g||(g={}));var w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.attack,a=t.effects.filter(function(e){return e.type===r.ToHit})[0],n=t.effects.filter(function(e){return e.type===r.Damage})[0];return u.a.createElement("div",{className:"attack",onClick:function(t){return e.handleClick(t,0)}},a&&u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),void 0!==a&&u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"attack-name"},u.a.createElement("span",null,t.name)),u.a.createElement("div",{className:"attack-range"},t.range," ft."),u.a.createElement("div",{className:"attack-toHit"},a&&u.a.createElement("div",null,u.a.createElement("div",{className:"attack-toHit-symbol"},a.modifier<0?"-":"+"),u.a.createElement("div",{className:"attack-toHit-number"},Math.abs(a.modifier)))),u.a.createElement("div",{className:"attack-damage"},n.diceCount,"d",n.diceSize,"+",n.bonus||0," ",n.damageType),u.a.createElement("div",{className:"attack-notes"},"Notes"))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"applyEffect",value:function(e,t,a){switch(e.type){case r.ToHit:var n,c,i,o,s=e,l=(s.modifier<0?"":"+")+s.modifier,u={advantage:t,modifier:s.modifier,type:b.DiceRoll,rolls:[]},p=new E.DiceRoll("d20"+l),m=p.toString().match(/.*?: (.*?) =/)[1],d=p.rolls[0][0]===(s.critRange||20),h=1===p.rolls[0][0];return t&&(c=(n=new E.DiceRoll("d20"+l)).toString().match(/.*?: (.*?) =/)[1],i=n.rolls[0][0]===(s.critRange||20),o=1===n.rolls[0][0]),a=t>=0?d||i:d&&i,u.rolls.push({total:p.total,critFail:h,critSuccess:d,details:m,ignore:!!n&&(t>0&&p.total<n.total||p.total>n.total)}),n&&u.rolls.push({total:n.total,critFail:o,critSuccess:i,details:c,ignore:t>0&&p.total>=n.total||p.total<=n.total}),{result:u,crit:a};case r.Damage:var f=e,v=new E.DiceRoll("".concat(f.diceCount*(a?2:1),"d").concat(f.diceSize,"+").concat(f.bonus||0)),O={advantage:g.None,modifier:f.bonus,type:b.DiceRoll,rolls:[]},C=v.toString().match(/.*?: (.*?) =/)[1];return O.rolls.push({critFail:!1,critSuccess:!1,details:C,ignore:!1,total:v.total}),{result:O,crit:a};case r.SavingThrow:var j=e;return{result:{type:b.Condition,condition:"DC ".concat(j.saveDC," ").concat(y.getLongAbilityName(j.saveType)," save"),onSuccess:this.applyEffect(j.onSave,0,a).result,onFailure:this.applyEffect(j.onFail,0,a).result},crit:a};case r.Text:var S=e;return{result:{type:b.Text,text:S.text},crit:a};default:throw new Error("Unexpected attack effect ".concat(e.type,"."))}}},{key:"handleClick",value:function(e,t){var a=this.props.attack,r=!1,n={type:"action",title:a.name,results:[]},c=!0,i=!1,o=void 0;try{for(var s,l=a.effects[Symbol.iterator]();!(c=(s=l.next()).done);c=!0){var u=s.value,p=this.applyEffect(u,t,r);r=p.crit,n.results.push(p.result)}}catch(m){i=!0,o=m}finally{try{c||null==l.return||l.return()}finally{if(i)throw o}}this.props.sendMessage("",n)}}]),t}(u.a.Component),I=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=y.getAttacks(t).map(function(t){return u.a.createElement(w,Object.assign({key:t.name,attack:t},e.props))});return u.a.createElement("div",{className:"attacks"},u.a.createElement("div",{className:"attack-container"},u.a.createElement("div",{className:"attack-header"},u.a.createElement("span",{className:"attack-name"},"Attack"),u.a.createElement("span",{className:"attack-range"},"Range"),u.a.createElement("span",{className:"attack-toHit"},"To Hit"),u.a.createElement("span",{className:"attack-damage"},"Damage"),u.a.createElement("span",{className:"attack-notes"},"Notes")),a),u.a.createElement("div",{className:"attacks-title"},"Attacks"))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),x=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={editing:!1,newCharacter:JSON.stringify(a.props.character,void 0," ")},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character;return this.state.editing?u.a.createElement("div",{className:"column character-sheet"},u.a.createElement("div",{className:"character-close",onClick:function(t){return e.abortEditSheet()}},"CANCEL"),u.a.createElement("div",{className:"character-edit",onClick:function(t){return e.saveSheet()}},"SAVE"),u.a.createElement("textarea",{rows:40,value:this.state.newCharacter,onChange:function(t){return e.setState(Object(f.a)({},e.state,{newCharacter:t.target.value}))}})):u.a.createElement("div",{className:"column character-sheet"},u.a.createElement("div",{className:"character-close",onClick:function(t){return e.closeSheet()}},"X"),u.a.createElement("div",{className:"character-edit",onClick:function(t){return e.editSheet()}},"EDIT"),u.a.createElement("div",{className:"row character-details"},u.a.createElement("div",{className:"character-name"},t.name),u.a.createElement("div",{className:"character-classes"},t.levels.map(function(e){return"".concat(e.className," ").concat(e.level)}).join(", "))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"ability-container"},u.a.createElement(O,Object.assign({ability:"strength",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"dexterity",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"constitution",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"intelligence",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"wisdom",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"charisma",character:t},this.props))),u.a.createElement(S,Object.assign({character:t},this.props)),u.a.createElement(k,Object.assign({character:t},this.props)),u.a.createElement(T,Object.assign({character:t},this.props))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"column"},u.a.createElement("div",{className:"save-container"},u.a.createElement(C,Object.assign({ability:"strength",character:t},this.props)),u.a.createElement(C,Object.assign({ability:"dexterity",character:t},this.props)),u.a.createElement(C,Object.assign({ability:"constitution",character:t},this.props)),u.a.createElement(C,Object.assign({ability:"intelligence",character:t},this.props)),u.a.createElement(C,Object.assign({ability:"wisdom",character:t},this.props)),u.a.createElement(C,Object.assign({ability:"charisma",character:t},this.props)),u.a.createElement("div",{className:"section-title"},"Saving Throws"))),u.a.createElement("div",{className:"skill-container"},u.a.createElement(j,Object.assign({skill:"acrobatics",ability:"dexterity",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"animalHandling",ability:"wisdom",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"arcana",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"athletics",ability:"strength",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"deception",ability:"charisma",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"history",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"insight",ability:"wisdom",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"intimidation",ability:"charisma",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"investigation",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"medicine",ability:"wisdom",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"nature",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"perception",ability:"wisdom",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"performance",ability:"charisma",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"persuasion",ability:"charisma",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"religion",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"sleightOfHand",ability:"dexterity",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"stealth",ability:"dexterity",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"survival",ability:"wisdom",character:t},this.props)),u.a.createElement("div",{className:"section-title"},"Skills")),u.a.createElement("div",{className:"column",style:{flex:1}},u.a.createElement("div",{className:"row"},u.a.createElement(N,Object.assign({character:t},this.props)),u.a.createElement(A,Object.assign({character:t},this.props))),u.a.createElement("div",{className:"row"},u.a.createElement(I,Object.assign({character:t},this.props))))))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"closeSheet",value:function(){this.props.closeCharacterSheet(this.props.character.id)}},{key:"editSheet",value:function(){this.setState(Object(f.a)({},this.state,{editing:!0}))}},{key:"abortEditSheet",value:function(){this.setState(Object(f.a)({},this.state,{editing:!1}))}},{key:"saveSheet",value:function(){var e=JSON.parse(this.state.newCharacter);this.props.updatePlayerCharacter(e.id,e),this.setState(Object(f.a)({},this.state,{editing:!1}))}}]),t}(u.a.Component),R={CHAT:{SYNC:"CHAT.SYNC",SYNC_FAILED:"CHAT.SYNC_FAILED",NEW:{SAVE:"CHAT.NEW.SAVE"}}},D=function(e){return{type:R.CHAT.SYNC,messages:e}},P=function(e,t){return{type:R.CHAT.NEW.SAVE,message:e,data:t}},L=function(e){return{type:R.CHAT.SYNC_FAILED,error:e}},M={CHARACTERS:{OPEN_SHEET:"CHARACTERS.OPEN_SHEET",CLOSE_SHEET:"CHARACTERS.CLOSE_SHEET"}},U={ASSETS:{PLAYERCHARACTER:{SYNC:"ASSETS.PLAYERCHARACTER.SYNC",SYNC_FAILED:"ASSETS.PLAYERCHARACTER.SYNC_FAILED",UPDATE:"ASSETS.PLAYERCHARACTER.UPDATE",NEW:{SAVE:"ASSETS.PLAYERCHARACTER.NEW.SAVE"}},NONPLAYERCHARACTER:{SYNC:"ASSETS.NONPLAYERCHARACTER.SYNC",SYNC_FAILED:"ASSETS.NONPLAYERCHARACTER.SYNC_FAILED",NEW:{SAVE:"ASSETS.NONPLAYERCHARACTER.NEW.SAVE"}}}},_=function(e){return{type:U.ASSETS.PLAYERCHARACTER.SYNC,playerCharacters:e}},F=function(e){return{type:U.ASSETS.PLAYERCHARACTER.SYNC_FAILED,error:e}},H=function(e){return{type:U.ASSETS.NONPLAYERCHARACTER.SYNC,nonPlayerCharacters:e}},Y=function(e){return{type:U.ASSETS.NONPLAYERCHARACTER.SYNC_FAILED,error:e}},W=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=[],a=!0,r=!1,n=void 0;try{for(var c,i=function(){var a=c.value;t.push(u.a.createElement(x,Object.assign({key:a,character:e.props.playerCharacters.filter(function(e){return e.id===a})[0]},e.props)))},o=this.props.openCharacterSheets[Symbol.iterator]();!(a=(c=o.next()).done);a=!0)i()}catch(s){r=!0,n=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return u.a.createElement("div",null,t)}}]),t}(l.Component),G=Object(h.c)(function(e){return{openCharacterSheets:e.characters.openCharacterSheets,playerCharacters:e.assets.playerCharacters}},function(e){return{sendMessage:function(t,a){return e(P(t,a))},closeCharacterSheet:function(t){return e(function(e){return{type:M.CHARACTERS.CLOSE_SHEET,characterId:e}}(t))},updatePlayerCharacter:function(t,a){return e(function(e,t){return{type:U.ASSETS.PLAYERCHARACTER.UPDATE,characterId:e,character:t}}(t,a))}}})(W),B={STORAGE:{SEND_FILE:"STORAGE.SEND_FILE",SEND_FILE_SUCCESS:"STORAGE.SEND_FILE_SUCCESS",SEND_FILE_FAILURE:"STORAGE.SEND_FILE_FAILURE",SEND_FILE_PROGRESS:"STORAGE.SEND_FILE_PROGRESS"}},V=function(e){return{type:B.STORAGE.SEND_FILE_PROGRESS,progress:e}},z=function(){return{type:B.STORAGE.SEND_FILE_SUCCESS}},Z=function(e){return{type:B.STORAGE.SEND_FILE_FAILURE,error:e}},K=a(325),Q=a.n(K),J=a(106),X=a.n(J),q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={uploadName:"",file:null},a.onUpload=a.onUpload.bind(Object(v.a)(a)),a.onChangeFile=a.onChangeFile.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"onChangeFile",value:function(e){var t=e.target.files[0];this.setState({file:t})}},{key:"onUpload",value:function(e){if(this.state.file&&this.state.uploadName&&0!==this.state.uploadName.length){var t="uploads/".concat(Q()());this.props.onUpload(this.state.uploadName,this.state.file,t)}}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:X.a.wrapper},u.a.createElement("div",null,u.a.createElement("input",{className:X.a.fileInput,placeholder:"Upload Name",onChange:function(t){return e.setState({uploadName:t.target.value})},type:"text",disabled:this.props.inProgress}),u.a.createElement("input",{onChange:this.onChangeFile,type:"file"}),u.a.createElement("button",{className:X.a.button,onClick:this.onUpload,disabled:this.props.inProgress},"Upload")),u.a.createElement("progress",{className:X.a.progressBar,max:"100",value:this.props.progress}))}}]),t}(l.Component),$=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(q,{onUpload:this.props.sendFile,progress:this.props.uploadProgress,inProgress:this.props.uploading})}}]),t}(l.Component),ee=Object(h.c)(function(e){return{uploadProgress:e.storage.uploadProgress,uploading:e.storage.uploading}},function(e){return{sendFile:function(t,a,r){return e(function(e,t,a){return{type:B.STORAGE.SEND_FILE,name:e,file:t,filePath:a}}(t,a,r))}}})($),te=a(141),ae=a.n(te),re=a(75),ne=a.n(re),ce={LOGIN:{REQUEST:"LOGIN.REQUEST",SUCCESS:"LOGIN.SUCCESS",FAILURE:"LOGIN.FAILURE"},LOGOUT:{REQUEST:"LOGOUT.REQUEST",SUCCESS:"LOGOUT.SUCCESS",FAILURE:"LOGOUT.FAILURE"}},ie=function(e,t){return{type:ce.LOGIN.REQUEST,username:e,password:t}},oe=function(e){return{type:ce.LOGIN.SUCCESS,user:e}},se=function(e){return{type:ce.LOGIN.FAILURE,error:e}},le=function(){return{type:ce.LOGOUT.REQUEST}},ue=function(){return{type:ce.LOGOUT.SUCCESS}},pe=function(e){return{type:ce.LOGOUT.FAILURE,error:e}},me=a(326),de=a.n(me),he=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={username:"",password:""},a.updateState=a.updateState.bind(Object(v.a)(a)),a.login=a.login.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"updateState",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"login",value:function(){0!==this.state.username.length&&0!==this.state.password.length&&this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedIn;t.logout;return a?u.a.createElement("div",null):u.a.createElement("div",{className:de.a.wrapper},u.a.createElement(ne.a,{label:"Username",onChange:function(t){return e.updateState("username",t.target.value)},value:this.state.username,margin:"normal"}),u.a.createElement(ne.a,{label:"Password",onChange:function(t){return e.updateState("password",t.target.value)},value:this.state.password,margin:"normal",onKeyUp:function(t){13===t.keyCode&&e.login()}}),u.a.createElement(ae.a,{variant:"contained",color:"primary",onClick:function(){return e.login()}},"Login"))}}]),t}(l.PureComponent),fe=Object(h.c)(function(e){return{loggedIn:e.auth.loggedIn}},function(e){return{login:function(t,a){return e(ie(t,a))},logout:function(){return e(le())}}})(he),ve=a(142),Ee=a.n(ve),be=a(143),ge=a.n(be),ye=a(68),Oe=a.n(ye),Ce=a(77),je=a.n(Ce),Se=(a(545),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,a=(e.isOwner,t.sender||"unknown");return u.a.createElement("div",{className:"message",key:t.id},u.a.createElement("div",{className:je.a.username},a," :"),u.a.createElement("div",null,t.msg))}}]),t}(u.a.Component)),ke=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.message,a=t.data;switch(a.rollType){case"Skill":e="roll-skill";break;case"Ability":e="roll-ability";break;case"Initiative":e="roll-initiative";break;case"Attack":e="roll-attack";break;case"Ad-hoc":default:e="roll-adhoc"}var r=a.rollAdvantageType>0&&a.roll1Total<a.roll2Total||a.rollAdvantageType<0&&a.roll1Total>a.roll2Total,n=a.rollAdvantageType&&!r;return u.a.createElement("div",{className:"roll-container ".concat(e)},u.a.createElement("div",{className:"roll-header"},u.a.createElement("span",{className:"roll-user"},t.sender),u.a.createElement("span",{className:"roll-type"},a.rollType)),u.a.createElement("div",{className:"roll-title"},u.a.createElement("span",{className:"roll-name"},a.rollName),null!==a.modifier&&void 0!==a.modifier&&u.a.createElement("span",{className:"roll-modifier"},"(",a.modifier,")")),u.a.createElement("div",{className:"roll-rolls"},u.a.createElement("div",{className:"roll-1 ".concat(r?"ignore":"")},u.a.createElement("span",{className:"summary "+(a.roll1CritSuccess?"crit":a.roll1CritFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},a.roll1Total),u.a.createElement("span",{className:"roll-suffix"},a.rollSuffix)),u.a.createElement("span",{className:"details"},a.roll1Details)),a.roll2Details&&a.rollAdvantageType&&u.a.createElement("div",{className:a.rollAdvantageType>0?"roll-advantage":"roll-disadvantage"},a.rollAdvantageType>0?"A":"D"),a.roll2Details&&u.a.createElement("div",{className:"roll-2 ".concat(n?"ignore":"")},u.a.createElement("span",{className:"summary "+(a.roll2CritSuccess?"crit":a.roll2CritFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},a.roll2Total),u.a.createElement("span",{className:"roll-suffix"},a.rollSuffix)),u.a.createElement("span",{className:"details"},a.roll2Details))))}}]),t}(u.a.Component),Ne=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result,t=[],a=0,r=!0,n=!1,c=void 0;try{for(var i,o=e.rolls[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;t.push(u.a.createElement("div",{key:a++,className:"roll ".concat(s.ignore?"ignore":"")},u.a.createElement("span",{className:"summary "+(s.critSuccess?"crit":s.critFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},s.total)),u.a.createElement("span",{className:"details"},s.details))),e.advantage&&t.push(u.a.createElement("div",{key:a++,className:e.advantage===g.Advantage?"roll-advantage":"roll-disadvantage"},e.advantage===g.Advantage?"A":"D"))}}catch(l){n=!0,c=l}finally{try{r||null==o.return||o.return()}finally{if(n)throw c}}return u.a.createElement("div",{className:"roll-rolls"},t)}}]),t}(u.a.Component),Ae=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result;return u.a.createElement("div",{className:"text"},e.text)}}]),t}(u.a.Component),Te=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result;return u.a.createElement("div",{className:"column"},u.a.createElement("div",null,e.condition),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"column"},u.a.createElement("div",null,"On success:"),u.a.createElement("div",null,u.a.createElement(we,{action:e.onSuccess}))),u.a.createElement("div",{className:"column"},u.a.createElement("div",null,"On failure:"),u.a.createElement("div",null,u.a.createElement(we,{action:e.onFailure})))))}}]),t}(u.a.Component),we=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.action;switch(e.type){case b.Text:return u.a.createElement(Ae,{result:e});case b.DiceRoll:return u.a.createElement(Ne,{result:e});case b.Condition:return u.a.createElement(Te,{result:e});default:throw new Error("Unknown action type ".concat(e.type,"."))}}}]),t}(u.a.Component),Ie=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.message,t=e.data,a=[];for(var r in t.results){var n=t.results[r];a.push(u.a.createElement(we,{key:r,action:n}))}return u.a.createElement("div",{className:"character-action-container"},u.a.createElement("div",{className:"action-header"},u.a.createElement("span",{className:"action-user"},e.sender)),u.a.createElement("div",{className:"action-title"},u.a.createElement("span",{className:"action-name"},t.title)),t.results.map(function(e,t){return u.a.createElement(we,{key:t,action:e})}))}}]),t}(u.a.Component),xe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={msg:"",messages:[]},a.scrollDiv=void 0,a.scrollToBottomOfChat=function(){a.scrollDiv&&(a.scrollDiv.scrollTop=a.scrollDiv.scrollHeight)},a.handleMsgChange=function(e){a.setState({msg:e.target.value})},a.handleKeyDown=function(e){if("Enter"===e.key){if(a.state.msg.match(/^\d*?d(\d+|%)/)){var t=new E.DiceRoll(a.state.msg),r={type:"roll",rollType:"Ad-hoc",rollName:t.notation,modifier:null,roll1Total:t.total,roll1Details:t.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:!1,roll1CritFail:!1};a.props.sendMessage("",r)}else a.sendMessage(a.state.msg);a.setState({msg:""})}},a.sendMessage=function(e){a.props.sendMessage(e)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.scrollToBottomOfChat()}},{key:"componentDidMount",value:function(){this.scrollToBottomOfChat()}},{key:"render",value:function(){var e=this,t=this.props.messages;return u.a.createElement("div",{style:{padding:"0 10px 10px 10px"}},this.props.loggedIn?u.a.createElement("div",{style:{}},u.a.createElement("div",{style:{paddingBottom:"15px"}},u.a.createElement(fe,null)),u.a.createElement("h1",{className:je.a.chatHeader},"Chat"),u.a.createElement("div",{className:je.a.messageWrapper},u.a.createElement("div",{className:je.a.messages,ref:function(t){return e.scrollDiv=t}},t.map(function(t,a){switch(t.data&&t.data.type){case"roll":return u.a.createElement(ke,{message:t,key:a});case"action":return u.a.createElement(Ie,{message:t,key:a});default:return u.a.createElement(Se,{message:t,key:a,isOwner:t.sender===e.props.user.email})}})),u.a.createElement("div",{className:je.a.chatInputWrapper},u.a.createElement(ne.a,{placeholder:"msg or d20+4 etc",onChange:this.handleMsgChange,onKeyDown:this.handleKeyDown,value:this.state.msg,variant:"filled",margin:"normal"})))):u.a.createElement(fe,null))}}]),t}(u.a.Component),Re=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(xe,this.props)}}]),t}(l.Component),De=Object(h.c)(function(e){return{messages:e.chat.messages,loggedIn:e.auth.loggedIn,user:e.auth.user}},function(e){return{sendMessage:function(t,a){return e(P(t,a))},login:function(t,a){return e(ie(t,a))}}})(Re),Pe=a(91),Le="player_character_asset",Me=a(50),Ue=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.asset,r=(e.assetType,this.props),n=r.isDragging,c=r.connectDragSource,i={cursor:"pointer",padding:"5px 10px"};return n&&(i.backgroundColor="red"),c(u.a.createElement("div",{className:t.assetItem,style:i},a.name||"unknown"))}}]),t}(l.Component);var _e,Fe=Object(Pe.DragSource)(Le,{beginDrag:function(e){return{id:e.asset.id,assetType:e.assetType}},endDrag:function(e,t,a){t.didDrop()&&(t.getItem(),t.getDropResult())}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Object(Me.withStyles)(function(e){return{assetItem:{backgroundColor:"transparent","&:hover":{backgroundColor:"green"}},dragging:{backgroundColor:"red"}}})(Ue));!function(e){e[e.PlayerCharacter=0]="PlayerCharacter",e[e.NonPlayerCharacter=1]="NonPlayerCharacter"}(_e||(_e={}));var He=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.playerCharacters,a=e.nonPlayerCharacters;return u.a.createElement("div",null,u.a.createElement("ul",null,t.map(function(e){return u.a.createElement(Fe,{asset:e,assetType:_e.PlayerCharacter,key:e.id})})),u.a.createElement("hr",null),u.a.createElement("ul",null,a.map(function(e){return u.a.createElement(Fe,{asset:e,assetType:_e.NonPlayerCharacter,key:e.id})})))}}]),t}(l.Component),Ye=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.playerCharacters,a=e.nonPlayerCharacters;return u.a.createElement("div",null,u.a.createElement("h1",null,"Asset List"),u.a.createElement(He,{playerCharacters:t,nonPlayerCharacters:a}))}}]),t}(l.Component),We=Object(h.c)(function(e){return{playerCharacters:e.assets.playerCharacters,nonPlayerCharacters:e.assets.nonPlayerCharacters}},function(e){return{}})(Ye),Ge=a(27),Be=a(327),Ve=a.n(Be),ze=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={current:""},a.handleChange=function(e){a.setState({current:e.target.value}),a.props.onChange&&a.props.onChange(e.target.value)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.options;return u.a.createElement(Ge.b,{className:t.formControl},u.a.createElement(Ge.c,{htmlFor:"upload-input"},"Images"),u.a.createElement(Ge.e,{value:this.state.current,onChange:this.handleChange,inputProps:{name:"upload",id:"upload-input"}},a.map(function(e){return u.a.createElement(Ge.d,{key:e.id,value:e.id},e.name)})))}}]),t}(l.Component),Ze=Object(Me.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit}}})(ze),Ke=a(20),Qe=a.n(Ke),Je=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={current:_e.PlayerCharacter},a.handleChange=function(e){a.setState({current:e.target.value}),a.props.onChange&&a.props.onChange(e.target.value)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return u.a.createElement(Ge.b,{className:e.formControl},u.a.createElement(Ge.c,{htmlFor:"assetType-input"},"Asset Type"),u.a.createElement(Ge.e,{value:this.state.current,onChange:this.handleChange,inputProps:{name:"assetType",id:"assetType-input"}},u.a.createElement(Ge.d,{value:_e.PlayerCharacter},"Player Character"),u.a.createElement(Ge.d,{value:_e.NonPlayerCharacter},"Non Player Character")))}}]),t}(l.Component),Xe=Object(Me.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit}}})(Je),qe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",assetType:_e.PlayerCharacter,uploadId:null},a.onSave=function(){var e=a.props.uploads.find(function(e){return e.id===a.state.uploadId}),t={imageUrl:e?e.downloadUrl:"",name:a.state.name};a.props.saveNewAsset(a.state.assetType,t)},a.onChangeUpload=function(e){return a.setState({uploadId:e})},a.onChangeAssetType=function(e){return a.setState({assetType:e})},a.onChangeName=function(e){return a.setState({name:e.currentTarget.value})},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.uploads;return u.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.a.createElement("h1",null,"Create Asset"),u.a.createElement(Xe,{onChange:this.onChangeAssetType}),u.a.createElement(Ge.f,{label:"Name",margin:"normal",className:t.nameInput,value:this.state.name,onChange:this.onChangeName}),u.a.createElement(Ze,{onChange:this.onChangeUpload,options:a}),u.a.createElement(Ge.a,{variant:"contained",className:t.button,onClick:this.onSave},u.a.createElement(Ve.a,{className:Qe()(t.leftIcon,t.iconSmall)}),"Save"))}}]),t}(l.Component),$e=Object(Me.withStyles)(function(e){return{button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20},nameInput:{margin:e.spacing.unit}}})(qe),et=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).saveNewAsset=function(e,t){e===_e.PlayerCharacter?a.props.saveNewPlayerCharacter(t):e===_e.NonPlayerCharacter&&a.props.saveNewNonPlayerCharacter(t)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement($e,{uploads:this.props.uploads,saveNewAsset:this.saveNewAsset})}}]),t}(l.Component),tt=Object(h.c)(function(e){return{assets:e.assets.assets,uploads:e.images.images}},function(e){return{saveNewPlayerCharacter:function(t){return e((a=t,{type:U.ASSETS.PLAYERCHARACTER.NEW.SAVE,playerCharacterData:a}));var a},saveNewNonPlayerCharacter:function(t){return e((a=t,{type:U.ASSETS.NONPLAYERCHARACTER.NEW.SAVE,nonPlayerCharacterData:a}));var a}}})(et),at=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"copyRoomUrl",value:function(){var e=document.createElement("textarea"),t=JSON.parse(localStorage.getItem("firebaseConfig"));e.value=document.location+"?projectId=".concat(t.projectId,"&apiKey=").concat(t.apiKey),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},{key:"render",value:function(){return u.a.createElement("div",{className:"column"},u.a.createElement("h1",null,"Settings"),u.a.createElement(Ge.a,{onClick:this.copyRoomUrl},"Copy Room URL"),this.props.loggedIn&&u.a.createElement(Ge.a,{variant:"contained",color:"primary",onClick:this.props.logout},"Logout"))}}]),t}(l.Component),rt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(at,{loggedIn:this.props.loggedIn,logout:this.props.logout})}}]),t}(l.Component),nt=Object(h.c)(function(e){return{loggedIn:e.auth.loggedIn}},function(e){return{logout:function(){return e(le())}}})(rt),ct=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",null,this.props.characters.map(function(t){return u.a.createElement("div",{key:t.id,onClick:function(a){return e.openCharacterSheet(t)}},t.name)}))}},{key:"openCharacterSheet",value:function(e){this.props.openCharacterSheet(e.id)}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),it=Object(h.c)(function(e){return{characters:e.assets.playerCharacters}},function(e){return{openCharacterSheet:function(t){return e(function(e){return{type:M.CHARACTERS.OPEN_SHEET,characterId:e}}(t))}}})(ct),ot=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(it,this.props)}}]),t}(l.Component),st=Object(h.c)(function(e){return{messages:e.chat.messages,loggedIn:e.auth.loggedIn,user:e.auth.user}},function(e){return{sendMessage:function(t,a){return e(P(t,a))}}})(ot),lt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={value:0},a.handleChange=function(e,t){a.setState({value:t})},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.value;return u.a.createElement("div",null,u.a.createElement(Ee.a,{position:"static"},u.a.createElement(ge.a,{variant:"scrollable",value:e,onChange:this.handleChange},u.a.createElement(Oe.a,{label:"Chat"}),u.a.createElement(Oe.a,{label:"Characters"}),u.a.createElement(Oe.a,{label:"Upload"}),u.a.createElement(Oe.a,{label:"Assets"}),u.a.createElement(Oe.a,{label:"Settings"}))),0===e&&u.a.createElement(De,null),1===e&&u.a.createElement(st,null),2===e&&u.a.createElement(ee,null),3===e&&u.a.createElement("div",null,u.a.createElement(tt,null),u.a.createElement(We,null)),4===e&&u.a.createElement(nt,null))}}]),t}(l.Component),ut=Object(Me.createStyles)({toolbarWrapper:{backgroundColor:"grey",padding:"5px",display:"flex",flexDirection:"row",borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},toolbarButton:{width:"5vh",height:"5vh",margin:"5px",border:"none",borderRadius:"5px",boxShadow:"0px 2px 5px 0px rgba(0,0,0,0.5)",cursor:"pointer","&:hover":{background:"rgba(190,190,190,0.5)"}}}),pt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return u.a.createElement("div",{className:e.toolbarWrapper},u.a.createElement("button",{className:e.toolbarButton},"Add Asset"),u.a.createElement("button",{className:e.toolbarButton},"YY"),u.a.createElement("button",{className:e.toolbarButton},"ZZ"))}}]),t}(l.Component),mt=Object(Me.withStyles)(ut)(pt),dt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{style:this.props.style},u.a.createElement(mt,null))}}]),t}(l.Component),ht=Object(h.c)(function(e){return{}},function(e){return{}})(dt),ft=Object(Me.createStyles)({viewControlWrapper:{backgroundColor:"grey",padding:"8px",display:"flex",flexDirection:"column",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"},viewControlButton:{width:"3vh",height:"3vh",margin:"3px",border:"none",borderRadius:"5px",boxShadow:"0px 2px 5px 0px rgba(0,0,0,0.5)",cursor:"pointer","&:hover":{background:"rgba(190,190,190,0.5)"}}}),vt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.mapZoomIn,r=e.mapZoomOut;return u.a.createElement("div",{className:t.viewControlWrapper},u.a.createElement("button",{className:t.viewControlButton,onClick:a},"+"),u.a.createElement("button",{className:t.viewControlButton,onClick:r},"-"))}}]),t}(l.Component),Et=Object(Me.withStyles)(ft)(vt),bt={MAP:{ZOOM:{IN:"MAP.ZOOM.IN",OUT:"MAP.ZOOM.OUT"}}},gt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.mapZoomIn,a=e.mapZoomOut;return u.a.createElement("div",{style:this.props.style},u.a.createElement(Et,{mapZoomIn:t,mapZoomOut:a}))}}]),t}(l.Component),yt=Object(h.c)(function(e){return{}},function(e){return{mapZoomIn:function(){return e({type:bt.MAP.ZOOM.IN})},mapZoomOut:function(){return e({type:bt.MAP.ZOOM.OUT})}}})(gt),Ot=a(78),Ct=a(328),jt=a.n(Ct),St=a(31),kt=Object(Ot.PixiComponent)("DraggableSprite",{create:function(e){var t=St.Sprite.fromImage(e.image);return e.anchor&&t.anchor.set(e.anchor.x,e.anchor.y),e.pivot&&t.pivot.set(e.pivot.x,e.pivot.y),e.scale&&t.scale.set(e.scale.x,e.scale.y),e.position&&t.position.set(e.position.x,e.position.y),e.rotation&&(t.rotation=e.rotation),t.interactive=!0,t.buttonMode=!0,t.onUpdateObject=e.onUpdateObject,t.layerName=e.layerName,t.mapObjectId=e.mapObjectId,t},applyProps:function(e,t,a){t.position&&a.position&&(t.position.x!==a.position.x||t.position.y!==a.position.y)&&e.position.set(a.position.x,a.position.y)},didMount:function(e,t){var a=function(t){if(e.alpha=1,e.data&&e.dragging){var a=e.data.getLocalPosition(t.currentTarget.parent);e.dragging=!1,e.data=null,e.onUpdateObject&&e.onUpdateObject({layerName:e.layerName,mapObjectId:e.mapObjectId,newData:{position:a}})}};e.on("mousedown",function(t){e.alpha=.5,e.dragging=!0,e.data=t.data}),e.on("mouseup",a),e.on("mouseupoutside",a),e.on("mousemove",function(t){if(e.dragging){var a=e.data.getLocalPosition(t.currentTarget.parent);e.x=a.x,e.y=a.y}}),e.on("mouseover",function(t){e&&(e.tint=16711680)}),e.on("mouseout",function(t){e&&(e.tint=16777215)})},willUnmount:function(e,t){e.off("mousedown"),e.off("mouseup"),e.off("mouseupoutside"),e.off("mousemove"),e.off("mouseover"),e.off("mouseout")}}),Nt=Object(Ot.PixiComponent)("Viewport",{create:function(e){var t=new jt.a({screenWidth:.75*window.innerWidth,screenHeight:window.innerHeight,worldWidth:1e3,worldHeight:1e3});return t.drag({mouseButtons:"right"}).pinch().wheel().decelerate(),t}}),At=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={x:300,y:300,alpha:1,dragging:!1,data:null},a.sprite=void 0,a.app=void 0,a.root=void 0,a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.playerCharacters,r=t.nonPlayerCharacters;if(!this.props.testMap)return u.a.createElement("div",null,"No Map");var n=this.props.testMap.layers,c=n.background,i=n.tokens;return(0,this.props.connectDropTarget)(u.a.createElement("div",null,u.a.createElement(Ot.Stage,{width:.75*window.innerWidth,height:window.innerHeight},u.a.createElement(Nt,null,u.a.createElement(Ot.Container,{name:"layer-background"},Object.keys(c.children).map(function(t){var n=c.children[t],i=n.pcId?a.find(function(e){return e.id===n.pcId}):null,o=n.npcId?r.find(function(e){return e.id===n.npcId}):null,s=i&&i.imageUrl?i.imageUrl:o&&o.imageUrl?o.imageUrl:n.imageUrl||"http://placekitten.com/128/128";return u.a.createElement(kt,{key:t,position:n.position,scale:n.scale,rotation:n.rotation,pivot:n.pivot,anchor:n.anchor,image:s,onUpdateObject:e.props.onUpdateObject,mapObjectId:t,layerName:"background"})})),u.a.createElement(Ot.Container,{name:"layer-tokens"},Object.keys(i.children).map(function(t){var n=i.children[t],c=n.pcId?a.find(function(e){return e.id===n.pcId}):null,o=n.npcId?r.find(function(e){return e.id===n.npcId}):null,s=c&&c.imageUrl?c.imageUrl:o&&o.imageUrl?o.imageUrl:n.imageUrl||"http://placekitten.com/128/128";return u.a.createElement(kt,{key:t,position:n.position,scale:n.scale,rotation:n.rotation,pivot:n.pivot,anchor:n.anchor,image:s,onUpdateObject:e.props.onUpdateObject,mapObjectId:t,layerName:"tokens"})}))))))}}]),t}(l.Component),Tt={canDrop:function(e,t){return!0},hover:function(e,t,a){},drop:function(e,t,a){var r=t.getItem();console.log("dropped [DROPPER]:"),console.log(r),e.onAddAssetToMap&&e.onAddAssetToMap({assetType:r.assetType,assetId:r.id})}};var wt=Object(Pe.DropTarget)(Le,Tt,function(e,t){return{connectDropTarget:e.dropTarget()}})(At),It={TESTMAP:{SYNC:"TESTMAP.SYNC",SYNC_FAILED:"TESTMAP.SYNC_FAILED",UPDATE:{OBJECT:"TESTMAP.UPDATE.OBJECT"},ASSET:{ADD:"TESTMAP.ASSET.ADD"}}},xt=function(e){return{type:It.TESTMAP.SYNC,map:e}},Rt=function(e){return{type:It.TESTMAP.SYNC_FAILED,error:e}},Dt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.zoom,a=e.testMap,r=e.onUpdateObject,n=e.onAddAssetToMap,c=e.playerCharacters,i=e.nonPlayerCharacters;return u.a.createElement(wt,{updateSpriteLocation:function(){},zoom:t,testMap:a,playerCharacters:c,nonPlayerCharacters:i,onUpdateObject:r,onAddAssetToMap:n})}}]),t}(l.Component),Pt=Object(h.c)(function(e){return{zoom:e.map.zoom,testMap:e.testMap.map,playerCharacters:e.assets.playerCharacters,nonPlayerCharacters:e.assets.nonPlayerCharacters}},function(e){return{onUpdateObject:function(t){return e(function(e){var t=e.layerName,a=e.mapObjectId,r=e.newData;return{type:It.TESTMAP.UPDATE.OBJECT,layerName:t,mapObjectId:a,newData:r}}(t))},onAddAssetToMap:function(t){return e(function(e){var t=e.assetType,a=e.assetId;return{type:It.TESTMAP.ASSET.ADD,assetType:t,assetId:a}}(t))}}})(Dt),Lt=a(52),Mt=a(67),Ut=a(63),_t=a(146),Ft={messages:[],new:{},syncError:null};function Ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case R.CHAT.SYNC:return Object(f.a)({},e,{messages:t.messages});case R.CHAT.SYNC_FAILED:return Object(f.a)({},e,{syncError:t.error});default:return e}}var Yt=a(332),Wt={openCharacterSheets:[]};function Gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case M.CHARACTERS.OPEN_SHEET:return Object(f.a)({},e,{openCharacterSheets:[].concat(Object(Yt.a)(e.openCharacterSheets.filter(function(e){return e!==t.characterId})),[t.characterId])});case M.CHARACTERS.CLOSE_SHEET:return Object(f.a)({},e,{openCharacterSheets:e.openCharacterSheets.filter(function(e){return e!==t.characterId})});default:return e}}var Bt={loading:!1,loggedIn:!1,user:null,loginError:null};function Vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ce.LOGIN.REQUEST:case ce.LOGOUT.REQUEST:return Object(f.a)({},e,{loading:!0});case ce.LOGIN.SUCCESS:return Object(f.a)({},e,{loading:!1,loggedIn:!0,user:t.user,loginError:null});case ce.LOGIN.FAILURE:return Object(f.a)({},e,{loading:!1,loginError:t.error});case ce.LOGOUT.SUCCESS:return Bt;case ce.LOGOUT.FAILURE:return Object(f.a)({},e,{loading:!1});default:return e}}var zt={uploading:!1,url:null,uploadProgress:0,uploadError:null};function Zt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case B.STORAGE.SEND_FILE:return Object(f.a)({},e,{uploading:!0});case B.STORAGE.SEND_FILE_SUCCESS:return Object(f.a)({},e,{uploading:!1});case B.STORAGE.SEND_FILE_FAILURE:return Object(f.a)({},e,{uploading:!1,uploadError:t.error});case B.STORAGE.SEND_FILE_PROGRESS:return Object(f.a)({},e,{uploadProgress:t.progress});default:return e}}var Kt={IMAGES:{SYNC:"IMAGES.SYNC",SYNC_FAILED:"IMAGES.SYNC_FAILED"}},Qt=function(e){return{type:Kt.IMAGES.SYNC,images:e}},Jt=function(e){return{type:Kt.IMAGES.SYNC_FAILED,error:e}},Xt={images:[],syncError:null};function qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Kt.IMAGES.SYNC:return Object(f.a)({},e,{images:t.images});case Kt.IMAGES.SYNC_FAILED:return Object(f.a)({},e,{syncError:t.error});default:return e}}var $t={playerCharacters:[],nonPlayerCharacters:[],pcSyncError:null,npcSyncError:null};function ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case U.ASSETS.PLAYERCHARACTER.SYNC:return Object(f.a)({},e,{playerCharacters:t.playerCharacters});case U.ASSETS.PLAYERCHARACTER.UPDATE:return Object(f.a)({},e,{playerCharacters:e.playerCharacters.map(function(e){return e.id!==t.characterId?e:t.character})});case U.ASSETS.NONPLAYERCHARACTER.SYNC:return Object(f.a)({},e,{nonPlayerCharacters:t.nonPlayerCharacters});case U.ASSETS.PLAYERCHARACTER.SYNC_FAILED:return Object(f.a)({},e,{pcSyncError:t.error});case U.ASSETS.NONPLAYERCHARACTER.SYNC_FAILED:return Object(f.a)({},e,{npcSyncError:t.error});default:return e}}var ta={zoom:1};function aa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case bt.MAP.ZOOM.IN:return Object(f.a)({},e,{zoom:e.zoom*=1.2});case bt.MAP.ZOOM.OUT:return Object(f.a)({},e,{zoom:e.zoom*=.8});default:return e}}var ra={map:null,syncError:null};function na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case It.TESTMAP.SYNC:return Object(f.a)({},e,{map:t.map});case It.TESTMAP.SYNC_FAILED:return Object(f.a)({},e,{syncError:t.error});default:return e}}var ca=a(11),ia=a.n(ca),oa=a(10),sa=a(36),la=a.n(sa),ua=(a(319),a(330)),pa=a.n(ua),ma=JSON.parse(localStorage.getItem("firebaseConfig")),da=la.a.initializeApp(ma),ha=(da.database(),new pa.a(da)),fa=ia.a.mark(ba),va=ia.a.mark(ya),Ea=ia.a.mark(Oa);function ba(e){var t,a,r;return ia.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(oa.select)(function(e){return e.auth.user});case 2:return t=n.sent,a=e.message||"",r=e.data||{},n.next=7,Object(oa.call)(ha.database.create,"/chatroom",{sender:t.email,timestamp:sa.database.ServerValue.TIMESTAMP,msg:a,data:r});case 7:case"end":return n.stop()}},fa)}var ga=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(f.a)({},t[e],{id:e})})};function ya(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.fork)(ha.database.sync,Object(sa.database)(ha.app).ref("/chatroom").orderByChild("timestamp"),{successActionCreator:D,failureActionCreator:L,transform:ga},"value");case 2:case"end":return e.stop()}},va)}function Oa(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.all)([Object(oa.fork)(ya),Object(oa.takeEvery)(R.CHAT.NEW.SAVE,ba)]);case 2:case"end":return e.stop()}},Ea)}var Ca=ia.a.mark(Na),ja=ia.a.mark(Aa),Sa=ia.a.mark(Ta),ka=ia.a.mark(wa);new la.a.auth.EmailAuthProvider;function Na(e){return ia.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(oa.call)(ha.auth.signInWithEmailAndPassword,e.username,e.password);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object(oa.put)(se(t.t0));case 9:case"end":return t.stop()}},Ca,null,[[0,5]])}function Aa(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(oa.call)(ha.auth.signOut);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(oa.put)(pe(e.t0));case 9:case"end":return e.stop()}},ja,null,[[0,5]])}function Ta(){var e,t,a;return ia.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(oa.call)(ha.auth.channel);case 2:e=r.sent;case 3:return r.next=6,Object(oa.take)(e);case 6:if(t=r.sent,!(a=t.user)){r.next=13;break}return r.next=11,Object(oa.put)(oe(a));case 11:r.next=15;break;case 13:return r.next=15,Object(oa.put)(ue());case 15:r.next=3;break;case 17:case"end":return r.stop()}},Sa)}function wa(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.fork)(Ta);case 2:return e.next=4,Object(oa.all)([Object(oa.takeEvery)(ce.LOGIN.REQUEST,Na),Object(oa.takeEvery)(ce.LOGOUT.REQUEST,Aa)]);case 4:case"end":return e.stop()}},ka)}var Ia=ia.a.mark(Pa),xa=ia.a.mark(La),Ra=ia.a.mark(Ma),Da=Object(Mt.channel)();function Pa(e){var t,a;return ia.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(t=ha.storage.uploadFile(e.filePath,e.file)).on("state_changed",function(e){var t=100*e.bytesTransferred/e.totalBytes;console.log("".concat(t,"%")),Da.put(V(t))}),r.next=4,t;case 4:return r.prev=4,r.next=7,Object(oa.call)(ha.storage.getDownloadURL,e.filePath);case 7:return a=r.sent,r.next=10,Object(oa.call)(ha.database.create,"/uploads",{filePath:e.filePath,name:e.name,downloadUrl:a,uploadTime:sa.database.ServerValue.TIMESTAMP});case 10:return r.next=12,Object(oa.put)(z());case 12:r.next=19;break;case 14:return r.prev=14,r.t0=r.catch(4),console.error(r.t0),r.next=19,Object(oa.put)(Z(r.t0));case 19:case"end":return r.stop()}},Ia,null,[[4,14]])}function La(){var e;return ia.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(oa.take)(Da);case 3:return e=t.sent,t.next=6,Object(oa.put)(e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},xa)}function Ma(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.fork)(La);case 2:return e.next=4,Object(oa.all)([Object(oa.takeEvery)(B.STORAGE.SEND_FILE,Pa)]);case 4:case"end":return e.stop()}},Ra)}var Ua=ia.a.mark(Ha),_a=ia.a.mark(Ya),Fa=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(f.a)({},t[e],{id:e})})};function Ha(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.fork)(ha.database.sync,Object(sa.database)(ha.app).ref("/uploads").orderByChild("timestamp"),{successActionCreator:Qt,failureActionCreator:Jt,transform:Fa},"value");case 2:case"end":return e.stop()}},Ua)}function Ya(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.all)([Object(oa.fork)(Ha)]);case 2:case"end":return e.stop()}},_a)}var Wa=ia.a.mark(Ja),Ga=ia.a.mark(Xa),Ba=ia.a.mark(qa),Va=ia.a.mark($a),za=ia.a.mark(er),Za=ia.a.mark(tr),Ka=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(f.a)({},t[e],{id:e})})},Qa=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(f.a)({},t[e],{id:e})})};function Ja(e){var t,a;return ia.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(oa.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(f.a)({},e.nonPlayerCharacterData,{timestamp:sa.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(oa.call)(ha.database.create,"/nonPlayerCharacters",a);case 6:case"end":return r.stop()}},Wa)}function Xa(e){var t,a;return ia.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(oa.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(f.a)({},e.character,{timestamp:sa.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(oa.call)(ha.database.update,"/playerCharacters/"+e.character.id,a);case 6:case"end":return r.stop()}},Ga)}function qa(e){var t,a;return ia.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(oa.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(f.a)({},e.playerCharacterData,{timestamp:sa.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(oa.call)(ha.database.create,"/playerCharacters",a);case 6:case"end":return r.stop()}},Ba)}function $a(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.fork)(ha.database.sync,Object(sa.database)(ha.app).ref("/playerCharacters"),{successActionCreator:_,failureActionCreator:F,transform:Ka},"value");case 2:case"end":return e.stop()}},Va)}function er(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.fork)(ha.database.sync,Object(sa.database)(ha.app).ref("/nonPlayerCharacters"),{successActionCreator:H,failureActionCreator:Y,transform:Qa},"value");case 2:case"end":return e.stop()}},za)}function tr(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.all)([Object(oa.fork)($a),Object(oa.fork)(er),Object(oa.takeEvery)(U.ASSETS.PLAYERCHARACTER.UPDATE,Xa),Object(oa.takeEvery)(U.ASSETS.PLAYERCHARACTER.NEW.SAVE,qa),Object(oa.takeEvery)(U.ASSETS.NONPLAYERCHARACTER.NEW.SAVE,Ja)]);case 2:case"end":return e.stop()}},Za)}var ar=ia.a.mark(or),rr=ia.a.mark(sr),nr=ia.a.mark(lr),cr=ia.a.mark(ur),ir=function(e){return e.value};function or(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.fork)(ha.database.sync,Object(sa.database)(ha.app).ref("/testMap"),{successActionCreator:xt,failureActionCreator:Rt,transform:ir},"value");case 2:case"end":return e.stop()}},ar)}function sr(e){var t,a,r;return ia.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.layerName,a=e.mapObjectId,r=e.newData,n.next=3,Object(oa.call)(ha.database.patch,"/testMap/layers/".concat(t,"/children/").concat(a),r);case 3:case"end":return n.stop()}},rr)}function lr(e){var t,a,r;return ia.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.assetType,a=e.assetId,r={anchor:{x:.5,y:.5},pivot:{x:.5,y:.5},name:"New Asset",position:{x:0,y:0},rotation:0,scale:{x:1,y:1}},t===_e.PlayerCharacter?r.pcId=a:t===_e.NonPlayerCharacter&&(r.npcId=a),n.next=5,Object(oa.call)(ha.database.create,"/testMap/layers/tokens/children",r);case 5:case"end":return n.stop()}},nr)}function ur(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.all)([Object(oa.fork)(or),Object(oa.takeEvery)(It.TESTMAP.UPDATE.OBJECT,sr),Object(oa.takeEvery)(It.TESTMAP.ASSET.ADD,lr)]);case 2:case"end":return e.stop()}},cr)}var pr=ia.a.mark(mr);function mr(){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.all)([Object(oa.fork)(Oa),Object(oa.fork)(wa),Object(oa.fork)(Ma),Object(oa.fork)(Ya),Object(oa.fork)(tr),Object(oa.fork)(ur)]);case 2:case"end":return e.stop()}},pr)}var dr,hr=Object(Ut.a)({basename:""}),fr=Object(Mt.default)(),vr=[fr],Er=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Lt.compose).apply(void 0,[Lt.applyMiddleware.apply(void 0,vr)].concat([])),br=Object(Lt.createStore)((dr=hr,Object(Lt.combineReducers)({router:Object(_t.b)(dr),chat:Ht,auth:Vt,storage:Zt,images:qt,assets:ea,map:aa,characters:Gt,testMap:na})),{},Er);fr.run(mr);var gr=br,yr=a(331),Or=a.n(yr),Cr=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).configLoaded=void 0,a.configLoaded=!!localStorage.getItem("firebaseConfig"),a.state={projectName:"",apiKey:""},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=Object(Me.createMuiTheme)({palette:{type:"dark"}});return u.a.createElement(h.a,{store:gr},u.a.createElement(_t.a,{history:hr},u.a.createElement(Pe.DragDropContextProvider,{backend:Or.a},u.a.createElement("div",{className:"App"},u.a.createElement(Me.MuiThemeProvider,{theme:e},u.a.createElement(p.c,null,u.a.createElement(p.a,{exact:!0,path:"/",render:function(){return u.a.createElement("div",null,u.a.createElement(Pt,null),u.a.createElement(ht,{style:{position:"fixed",bottom:"0",left:"35%",transform:"translate(-50%, 0%)"}}),u.a.createElement(yt,{style:{position:"fixed",right:"25vw",top:"10vh"}}),u.a.createElement("div",null,u.a.createElement(G,null)),u.a.createElement("div",{className:d.a.chatWrapper},u.a.createElement(lt,null)))}}),u.a.createElement(p.a,{path:"/upload",render:function(){return u.a.createElement(ee,null)}}),u.a.createElement(p.a,{path:"/login",render:function(){return u.a.createElement(fe,null)}})))))))}}]),t}(l.Component);t.default=Cr},816:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(44),i=a.n(c);a(418),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(50),s=a(27),l=void 0,u={projectId:"",apiKey:""},p=function(){localStorage.setItem("firebaseConfig",JSON.stringify({apiKey:u.apiKey,authDomain:"".concat(u.projectId,".firebaseapp.com"),databaseURL:"https://".concat(u.projectId,".firebaseio.com"),projectId:u.projectId,storageBucket:"".concat(u.projectId,".appspot.com")})),window.location.replace(window.location.origin)},m=window.location.search.match(/\?projectId=(.*?)&apiKey=(.*)$/);if(m)u.projectId=m[1],u.apiKey=m[2],p();else if(null==localStorage.getItem("firebaseConfig")){var d=Object(o.createMuiTheme)({palette:{type:"dark"}});i.a.render(n.a.createElement("div",{className:"App"},n.a.createElement(o.MuiThemeProvider,{theme:d},n.a.createElement("div",{className:"projectInputs"},n.a.createElement(s.f,{label:"Project Name",placeholder:"dnd-player-b8372",onChange:function(e){return u.projectId=e.target.value},margin:"normal"}),n.a.createElement(s.f,{label:"API Key",placeholder:"AIzaSd***************pK5ao6g95Q-9auWt-8",onChange:function(e){return u.apiKey=e.target.value},margin:"normal",onKeyUp:function(e){13===e.keyCode&&l.saveConfig()}}),n.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){return p()}},"Save")))),document.getElementById("root"))}else{var h=a(815).default;i.a.render(n.a.createElement(h,null),document.getElementById("root"))}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[413,1,2]]]);
//# sourceMappingURL=main.d2a8e71a.chunk.js.map