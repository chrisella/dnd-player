(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){e.exports={wrapper:"ImageUploader_wrapper__wSUkk",fileInput:"ImageUploader_fileInput__bXesA",button:"ImageUploader_button__1wVu_",progressBar:"ImageUploader_progressBar__11JDB"}},292:function(e,t,a){e.exports={chatWrapper:"App_chatWrapper__1W4Il"}},294:function(e,t,a){e.exports={wrapper:"Authentication_wrapper__3mwEf",username:"Authentication_username__3aSnV",password:"Authentication_password__VxlmJ",loginButton:"Authentication_loginButton__3ig6u",logoutButton:"Authentication_logoutButton__3qUj0"}},381:function(e,t,a){e.exports=a(735)},386:function(e,t,a){},50:function(e,t,a){},510:function(e,t,a){},513:function(e,t,a){},734:function(e,t,a){"use strict";a.r(t);var n,r=a(3),c=a(4),i=a(6),s=a(5),l=a(7),o=a(0),u=a.n(o),p=a(58),m=a(292),d=a.n(m),h=a(24),f=a(36),v=a(37);a(50);!function(e){e[e.ToHit=0]="ToHit",e[e.Damage=1]="Damage",e[e.SavingThrow=2]="SavingThrow",e[e.Text=3]="Text"}(n||(n={}));var b,g,E=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"getProficiencyBonus",value:function(e){var t=e.levels.map(function(e){return e.level}).reduce(function(e,t){return e+t});return 1+Math.ceil(t/4)}},{key:"getSaveModifier",value:function(t,a){var n=this.getAbilityModifier(t,a),r=t.proficiencies.saves[a]||0,c=e.getProficiencyBonus(t);return n+Math.floor(r*c)}},{key:"getAbilityModifier",value:function(e,t){return Math.floor((e[t]-10)/2)}},{key:"getInitiativeModifier",value:function(e){return this.getAbilityModifier(e,"dexterity")}},{key:"getAttacks",value:function(e){var t=[];return t.push({name:"Longsword",range:5,effects:[{type:n.ToHit,modifier:this.getAbilityModifier(e,"strength")+this.getProficiencyBonus(e),critRange:20},{type:n.Damage,damageType:"slashing",diceCount:1,diceType:8,bonus:this.getAbilityModifier(e,"strength")}]}),t}},{key:"getShortAbilityName",value:function(e){switch(e){case"strength":return"STR";case"dexterity":return"DEX";case"constitution":return"CON";case"intelligence":return"INT";case"wisdom":return"WIS";case"charisma":return"CHA";default:return""}}},{key:"getLongAbilityName",value:function(e){switch(e){case"strength":return"Strength";case"dexterity":return"Dexterity";case"constitution":return"Consititution";case"intelligence":return"Intelligence";case"wisdom":return"Wisdom";case"charisma":return"Charisma";default:return""}}},{key:"getLongSkillName",value:function(e){switch(e){case"acrobatics":return"Acrobatics";case"animalHandling":return"Animal Handling";case"arcana":return"Arcana";case"athletics":return"Athletics";case"deception":return"Deception";case"history":return"History";case"insight":return"Insight";case"intimidation":return"Intimidation";case"investigation":return"Investigation";case"medicine":return"Medicine";case"nature":return"Nature";case"perception":return"Perception";case"performance":return"Performance";case"persuasion":return"Persuasion";case"religion":return"Religion";case"sleightOfHand":return"Sleight of Hand";case"stealth":return"Stealth";case"survival":return"Survival";default:return""}}}]),e}(),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(f.a)(a)),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,n=t.character,r=E.getAbilityModifier(n,a);return u.a.createElement("div",{className:"ability",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"ability-title"},this.getLongName(a)),u.a.createElement("div",{className:"ability-modifier"},u.a.createElement("div",{className:"ability-symbol"},r<0?"-":"+"),u.a.createElement("div",{className:"ability-number"},Math.abs(r))),u.a.createElement("div",{className:"ability-score"},n[a]))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"getLongName",value:function(e){switch(e){case"strength":return"Strength";case"dexterity":return"Dexterity";case"constitution":return"Constitution";case"intelligence":return"Intelligence";case"wisdom":return"Wisdom";case"charisma":return"Charisma";default:return""}}},{key:"handleClick",value:function(e,t){var a=E.getAbilityModifier(this.props.character,this.props.ability),n=(a<0?"":"+")+a,r=new v.DiceRoll("d20"+n),c={type:"roll",rollType:"Ability",rollName:this.getLongName(this.props.ability),modifier:n,roll1Total:r.total,roll1Details:r.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===r.rolls[0][0],roll1CritFail:1===r.rolls[0][0]};if(t){var i=new v.DiceRoll("d20"+n);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(f.a)(a)),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,n=t.character,r=E.getSaveModifier(n,a),c=2===n.proficiencies.saves[a]?"expertise":1===n.proficiencies.saves[a]?"proficient":.5===n.proficiencies.saves[a]?"half-proficient":"none";return u.a.createElement("div",{className:"save",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"save-wrapper"},u.a.createElement("div",{className:"save-proficiency ".concat(c)}),u.a.createElement("div",{className:"save-title"},E.getShortAbilityName(a)),u.a.createElement("div",{className:"save-modifier"},u.a.createElement("span",{className:"save-symbol"},r<0?"-":"+"),u.a.createElement("span",{className:"save-number"},Math.abs(r)))))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"getLongName",value:function(e){switch(e){case"strength":return"Strength Save";case"dexterity":return"Dexterity Save";case"constitution":return"Constitution Save";case"intelligence":return"Intelligence Save";case"wisdom":return"Wisdom Save";case"charisma":return"Charisma Save";default:return""}}},{key:"handleClick",value:function(e,t){var a=E.getSaveModifier(this.props.character,this.props.ability),n=(a<0?"":"+")+a,r=new v.DiceRoll("d20"+n),c={type:"roll",rollType:"Save",rollName:this.getLongName(this.props.ability),modifier:n,roll1Total:r.total,roll1Details:r.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===r.rolls[0][0],roll1CritFail:1===r.rolls[0][0]};if(t){var i=new v.DiceRoll("d20"+n);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(f.a)(a)),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,n=t.character,r=t.skill,c=this.getSkillModifier(n,r,a),i=2===n.proficiencies.skills[r]?"expertise":1===n.proficiencies.skills[r]?"proficient":.5===n.proficiencies.skills[r]?"half-proficient":"none";return u.a.createElement("div",{className:"skill",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"skill-wrapper"},u.a.createElement("div",{className:"skill-proficiency ".concat(i)}),u.a.createElement("div",{className:"skill-ability"},E.getShortAbilityName(a)),u.a.createElement("div",{className:"skill-title"},E.getLongSkillName(r)),u.a.createElement("div",{className:"skill-modifier"},u.a.createElement("div",{className:"skill-symbol"},c<0?"-":"+"),u.a.createElement("div",{className:"skill-number"},Math.abs(c)))))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"getSkillModifier",value:function(e,t,a){var n=Math.floor((e[a]-10)/2),r=e.proficiencies.skills[t]||0,c=E.getProficiencyBonus(e);return n+Math.floor(r*c)}},{key:"handleClick",value:function(e,t){var a=this.getSkillModifier(this.props.character,this.props.skill,this.props.ability),n=(a<0?"":"+")+a,r=new v.DiceRoll("d20"+n),c=(this.props.ability,{type:"roll",rollType:"Skill",rollName:"".concat(this.props.skill," (").concat(this.props.ability,")"),modifier:n,roll1Total:r.total,roll1Details:r.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===r.rolls[0][0],roll1CritFail:1===r.rolls[0][0]});if(t){var i=new v.DiceRoll("d20"+n);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character,t=E.getProficiencyBonus(e);return u.a.createElement("div",{className:"proficiency"},u.a.createElement("div",{className:"proficiency-title"},"Proficiency"),u.a.createElement("div",{className:"proficiency-modifier"},u.a.createElement("div",{className:"proficiency-symbol"},"+"),u.a.createElement("div",{className:"proficiency-number"},t)))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.character,t=[],a=0,n=Object.keys(e.speed);a<n.length;a++){var r=n[a];t.push(u.a.createElement("div",{className:"speed-container",key:r},u.a.createElement("div",{className:"speed-popup-wrap"},u.a.createElement("span",{className:"speed-number"},e.speed[r]),u.a.createElement("span",{className:"speed-unit"},"ft.")),u.a.createElement("div",{className:"speed-type"},r)))}return u.a.createElement("div",{className:"speed"},u.a.createElement("div",{className:"speed-title"},"Speed"),u.a.createElement("div",{className:"speed-container"},u.a.createElement("span",{className:"speed-number"},e.speed.walk),u.a.createElement("span",{className:"speed-unit"},"ft.")),u.a.createElement("div",{className:"speed-popup"},u.a.createElement("div",{className:"speed-title"},"Speed"),t))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),C=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(f.a)(a)),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=E.getInitiativeModifier(t);return u.a.createElement("div",{className:"initiative",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"initiative-title"},"Initiative"),u.a.createElement("div",{className:"initiative-modifier"},u.a.createElement("div",{className:"initiative-symbol"},a<0?"-":"+"),u.a.createElement("div",{className:"initiative-number"},Math.abs(a))))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handleClick",value:function(e,t){var a=E.getInitiativeModifier(this.props.character),n=(a<0?"":"+")+a,r=new v.DiceRoll("d20"+n),c={type:"roll",rollType:"Initiative",rollName:"Initiative",modifier:n,roll1Total:r.total,roll1Details:r.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===r.rolls[0][0],roll1CritFail:1===r.rolls[0][0]};if(t){var i=new v.DiceRoll("d20"+n);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),N=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;return u.a.createElement("div",{className:"ac"},u.a.createElement("div",{className:"ac-title"},"AC"),u.a.createElement("div",{className:"ac-number"},e.ac))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;return u.a.createElement("div",{className:"hp"},u.a.createElement("div",{className:"hp-title"},"Hit Points"),u.a.createElement("div",{className:"hp-current"},u.a.createElement("span",null,e.hp),u.a.createElement("span",{className:"hp-header"},"Current")),u.a.createElement("div",{className:"hp-divider"},"/"),u.a.createElement("div",{className:"hp-max"},u.a.createElement("span",null,e.maxHp),u.a.createElement("span",{className:"hp-header"},"Max")))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component);a(510);!function(e){e[e.Text=0]="Text",e[e.DiceRoll=1]="DiceRoll"}(b||(b={})),function(e){e[e.Disadvantage=-1]="Disadvantage",e[e.None=0]="None",e[e.Advantage=1]="Advantage"}(g||(g={}));var A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(f.a)(a)),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.attack,a=t.effects.filter(function(e){return e.type===n.ToHit})[0],r=t.effects.filter(function(e){return e.type===n.Damage})[0];return u.a.createElement("div",{className:"attack",onClick:function(t){return e.handleClick(t,0)}},a&&u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),void 0!==a&&u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"attack-name"},u.a.createElement("span",null,t.name)),u.a.createElement("div",{className:"attack-range"},t.range," ft."),u.a.createElement("div",{className:"attack-toHit"},a&&u.a.createElement("div",null,u.a.createElement("div",{className:"attack-toHit-symbol"},a.modifier<0?"-":"+"),u.a.createElement("div",{className:"attack-toHit-number"},Math.abs(a.modifier)))),u.a.createElement("div",{className:"attack-damage"},r.diceCount,"d",r.diceType,"+",r.bonus||0," ",r.damageType),u.a.createElement("div",{className:"attack-notes"},"Notes"))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handleClick",value:function(e,t){var a=this.props.attack,r=!1,c={type:"action",title:a.name,results:[]},i=!0,s=!1,l=void 0;try{for(var o,u=a.effects[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var p=o.value;switch(p.type){case n.ToHit:var m=p,d=(m.modifier<0?"":"+")+m.modifier,h={advantage:t,modifier:m.modifier,type:b.DiceRoll,rolls:[]},f=new v.DiceRoll("d20"+d),E=f.toString().match(/.*?: (.*?) =/)[1],O=f.rolls[0][0]===(m.critRange||20),y=1===f.rolls[0][0],j=void 0,S=void 0,k=void 0,C=void 0;t&&(S=(j=new v.DiceRoll("d20"+d)).toString().match(/.*?: (.*?) =/)[1],k=j.rolls[0][0]===(m.critRange||20),C=1===j.rolls[0][0]),r=t>=0?O||k:O&&k,h.rolls.push({total:f.total,critFail:y,critSuccess:O,details:E,ignore:!!j&&(t>0&&f.total<j.total||f.total>j.total)}),j&&h.rolls.push({total:j.total,critFail:C,critSuccess:k,details:S,ignore:t>0&&f.total>=j.total||f.total<=j.total}),c.results.push(h);break;case n.Damage:var N=p,w=new v.DiceRoll("".concat(N.diceCount*(r?2:1),"d").concat(N.diceType,"+").concat(N.bonus||0)),A={advantage:g.None,modifier:N.bonus,type:b.DiceRoll,rolls:[]},T=w.toString().match(/.*?: (.*?) =/)[1];A.rolls.push({critFail:!1,critSuccess:!1,details:T,ignore:!1,total:w.total}),c.results.push(A);break;default:throw new Error("Unexpected attack effect ".concat(p.type,"."))}}}catch(I){s=!0,l=I}finally{try{i||null==u.return||u.return()}finally{if(s)throw l}}this.props.sendMessage("",c)}}]),t}(u.a.Component),T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=E.getAttacks(t).map(function(t){return u.a.createElement(A,Object.assign({key:t.name,attack:t},e.props))});return u.a.createElement("div",{className:"attacks"},u.a.createElement("div",{className:"attack-container"},u.a.createElement("div",{className:"attack-header"},u.a.createElement("span",{className:"attack-name"},"Attack"),u.a.createElement("span",{className:"attack-range"},"Range"),u.a.createElement("span",{className:"attack-toHit"},"To Hit"),u.a.createElement("span",{className:"attack-damage"},"Damage"),u.a.createElement("span",{className:"attack-notes"},"Notes")),a),u.a.createElement("div",{className:"attacks-title"},"Attacks"))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character;return u.a.createElement("div",{className:"column character-sheet"},u.a.createElement("div",{className:"character-close",onClick:function(t){return e.closeSheet()}},"X"),u.a.createElement("div",{className:"row character-details"},u.a.createElement("div",{className:"character-name"},t.name),u.a.createElement("div",{className:"character-classes"},t.levels.map(function(e){return"".concat(e.className," ").concat(e.level)}).join(", "))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"ability-container"},u.a.createElement(O,Object.assign({ability:"strength",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"dexterity",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"constitution",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"intelligence",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"wisdom",character:t},this.props)),u.a.createElement(O,Object.assign({ability:"charisma",character:t},this.props))),u.a.createElement(S,Object.assign({character:t},this.props)),u.a.createElement(k,Object.assign({character:t},this.props)),u.a.createElement(w,Object.assign({character:t},this.props))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"column"},u.a.createElement("div",{className:"save-container"},u.a.createElement(y,Object.assign({ability:"strength",character:t},this.props)),u.a.createElement(y,Object.assign({ability:"dexterity",character:t},this.props)),u.a.createElement(y,Object.assign({ability:"constitution",character:t},this.props)),u.a.createElement(y,Object.assign({ability:"intelligence",character:t},this.props)),u.a.createElement(y,Object.assign({ability:"wisdom",character:t},this.props)),u.a.createElement(y,Object.assign({ability:"charisma",character:t},this.props)),u.a.createElement("div",{className:"section-title"},"Saving Throws"))),u.a.createElement("div",{className:"skill-container"},u.a.createElement(j,Object.assign({skill:"acrobatics",ability:"dexterity",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"animalHandling",ability:"wisdom",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"arcana",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"athletics",ability:"strength",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"deception",ability:"charisma",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"history",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"insight",ability:"wisdom",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"intimidation",ability:"charisma",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"investigation",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"medicine",ability:"wisdom",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"nature",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"perception",ability:"wisdom",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"performance",ability:"charisma",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"persuasion",ability:"charisma",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"religion",ability:"intelligence",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"sleightOfHand",ability:"dexterity",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"stealth",ability:"dexterity",character:t},this.props)),u.a.createElement(j,Object.assign({skill:"survival",ability:"wisdom",character:t},this.props)),u.a.createElement("div",{className:"section-title"},"Skills")),u.a.createElement("div",{className:"column",style:{flex:1}},u.a.createElement("div",{className:"row"},u.a.createElement(C,Object.assign({character:t},this.props)),u.a.createElement(N,Object.assign({character:t},this.props))),u.a.createElement("div",{className:"row"},u.a.createElement(T,Object.assign({character:t},this.props))))))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"closeSheet",value:function(){this.props.closeCharacterSheet(this.props.character.id)}}]),t}(u.a.Component),x={CHAT:{SYNC:"CHAT.SYNC",SYNC_FAILED:"CHAT.SYNC_FAILED",NEW:{SAVE:"CHAT.NEW.SAVE"}}},D=function(e){return{type:x.CHAT.SYNC,messages:e}},_=function(e,t){return{type:x.CHAT.NEW.SAVE,message:e,data:t}},M=function(e){return{type:x.CHAT.SYNC_FAILED,error:e}},R={CHARACTERS:{OPEN_SHEET:"CHARACTERS.OPEN_SHEET",CLOSE_SHEET:"CHARACTERS.CLOSE_SHEET"}},L=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=[],a=!0,n=!1,r=void 0;try{for(var c,i=function(){var a=c.value;t.push(u.a.createElement(I,Object.assign({key:a,character:e.props.characters.filter(function(e){return e.id===a})[0]},e.props)))},s=this.props.openCharacterSheets[Symbol.iterator]();!(a=(c=s.next()).done);a=!0)i()}catch(l){n=!0,r=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}return u.a.createElement("div",null,t)}}]),t}(o.Component),U=Object(h.c)(function(e){return{openCharacterSheets:e.characters.openCharacterSheets,characters:e.characters.characters}},function(e){return{sendMessage:function(t,a){return e(_(t,a))},closeCharacterSheet:function(t){return e(function(e){return{type:R.CHARACTERS.CLOSE_SHEET,characterId:e}}(t))}}})(L),F={STORAGE:{SEND_FILE:"STORAGE.SEND_FILE",SEND_FILE_SUCCESS:"STORAGE.SEND_FILE_SUCCESS",SEND_FILE_FAILURE:"STORAGE.SEND_FILE_FAILURE",SEND_FILE_PROGRESS:"STORAGE.SEND_FILE_PROGRESS"}},H=function(e){return{type:F.STORAGE.SEND_FILE_PROGRESS,progress:e}},P=function(){return{type:F.STORAGE.SEND_FILE_SUCCESS}},W=function(e){return{type:F.STORAGE.SEND_FILE_FAILURE,error:e}},G=a(293),B=a.n(G),Y=a(101),Z=a.n(Y),z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={uploadName:"",file:null},a.onUpload=a.onUpload.bind(Object(f.a)(a)),a.onChangeFile=a.onChangeFile.bind(Object(f.a)(a)),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"onChangeFile",value:function(e){var t=e.target.files[0];this.setState({file:t})}},{key:"onUpload",value:function(e){if(this.state.file&&this.state.uploadName&&0!==this.state.uploadName.length){var t="uploads/".concat(B()());this.props.onUpload(this.state.uploadName,this.state.file,t)}}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:Z.a.wrapper},u.a.createElement("div",null,u.a.createElement("input",{className:Z.a.fileInput,placeholder:"Upload Name",onChange:function(t){return e.setState({uploadName:t.target.value})},type:"text",disabled:this.props.inProgress}),u.a.createElement("input",{onChange:this.onChangeFile,type:"file"}),u.a.createElement("button",{className:Z.a.button,onClick:this.onUpload,disabled:this.props.inProgress},"Upload")),u.a.createElement("progress",{className:Z.a.progressBar,max:"100",value:this.props.progress}))}}]),t}(o.Component),V=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(z,{onUpload:this.props.sendFile,progress:this.props.uploadProgress,inProgress:this.props.uploading})}}]),t}(o.Component),Q=Object(h.c)(function(e){return{uploadProgress:e.storage.uploadProgress,uploading:e.storage.uploading}},function(e){return{sendFile:function(t,a,n){return e(function(e,t,a){return{type:F.STORAGE.SEND_FILE,name:e,file:t,filePath:a}}(t,a,n))}}})(V),K=a(131),X=a.n(K),J=a(72),q=a.n(J),$={LOGIN:{REQUEST:"LOGIN.REQUEST",SUCCESS:"LOGIN.SUCCESS",FAILURE:"LOGIN.FAILURE"},LOGOUT:{REQUEST:"LOGOUT.REQUEST",SUCCESS:"LOGOUT.SUCCESS",FAILURE:"LOGOUT.FAILURE"}},ee=function(e,t){return{type:$.LOGIN.REQUEST,username:e,password:t}},te=function(e){return{type:$.LOGIN.SUCCESS,user:e}},ae=function(e){return{type:$.LOGIN.FAILURE,error:e}},ne=function(){return{type:$.LOGOUT.REQUEST}},re=function(){return{type:$.LOGOUT.SUCCESS}},ce=function(e){return{type:$.LOGOUT.FAILURE,error:e}},ie=a(294),se=a.n(ie),le=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={username:"",password:""},a.updateState=a.updateState.bind(Object(f.a)(a)),a.login=a.login.bind(Object(f.a)(a)),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"updateState",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"login",value:function(){0!==this.state.username.length&&0!==this.state.password.length&&this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedIn;t.logout;return a?u.a.createElement("div",null):u.a.createElement("div",{className:se.a.wrapper},u.a.createElement(q.a,{label:"Username",onChange:function(t){return e.updateState("username",t.target.value)},value:this.state.username,margin:"normal"}),u.a.createElement(q.a,{label:"Password",onChange:function(t){return e.updateState("password",t.target.value)},value:this.state.password,margin:"normal",onKeyUp:function(t){13===t.keyCode&&e.login()}}),u.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){return e.login()}},"Login"))}}]),t}(o.PureComponent),oe=Object(h.c)(function(e){return{loggedIn:e.auth.loggedIn}},function(e){return{login:function(t,a){return e(ee(t,a))},logout:function(){return e(ne())}}})(le),ue=a(132),pe=a.n(ue),me=a(133),de=a.n(me),he=a(67),fe=a.n(he),ve=a(74),be=a.n(ve),ge=(a(513),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,a=(e.isOwner,t.sender||"unknown");return u.a.createElement("div",{className:"message",key:t.id},u.a.createElement("div",{className:be.a.username},a," :"),u.a.createElement("div",null,t.msg))}}]),t}(u.a.Component)),Ee=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.message,a=t.data;switch(a.rollType){case"Skill":e="roll-skill";break;case"Ability":e="roll-ability";break;case"Initiative":e="roll-initiative";break;case"Attack":e="roll-attack";break;case"Ad-hoc":default:e="roll-adhoc"}var n=a.rollAdvantageType>0&&a.roll1Total<a.roll2Total||a.rollAdvantageType<0&&a.roll1Total>a.roll2Total,r=a.rollAdvantageType&&!n;return u.a.createElement("div",{className:"roll-container ".concat(e)},u.a.createElement("div",{className:"roll-header"},u.a.createElement("span",{className:"roll-user"},t.sender),u.a.createElement("span",{className:"roll-type"},a.rollType)),u.a.createElement("div",{className:"roll-title"},u.a.createElement("span",{className:"roll-name"},a.rollName),null!==a.modifier&&void 0!==a.modifier&&u.a.createElement("span",{className:"roll-modifier"},"(",a.modifier,")")),u.a.createElement("div",{className:"roll-rolls"},u.a.createElement("div",{className:"roll-1 ".concat(n?"ignore":"")},u.a.createElement("span",{className:"summary "+(a.roll1CritSuccess?"crit":a.roll1CritFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},a.roll1Total),u.a.createElement("span",{className:"roll-suffix"},a.rollSuffix)),u.a.createElement("span",{className:"details"},a.roll1Details)),a.roll2Details&&a.rollAdvantageType&&u.a.createElement("div",{className:a.rollAdvantageType>0?"roll-advantage":"roll-disadvantage"},a.rollAdvantageType>0?"A":"D"),a.roll2Details&&u.a.createElement("div",{className:"roll-2 ".concat(r?"ignore":"")},u.a.createElement("span",{className:"summary "+(a.roll2CritSuccess?"crit":a.roll2CritFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},a.roll2Total),u.a.createElement("span",{className:"roll-suffix"},a.rollSuffix)),u.a.createElement("span",{className:"details"},a.roll2Details))))}}]),t}(u.a.Component),Oe=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result,t=[],a=0,n=!0,r=!1,c=void 0;try{for(var i,s=e.rolls[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value;t.push(u.a.createElement("div",{key:a++,className:"roll ".concat(l.ignore?"ignore":"")},u.a.createElement("span",{className:"summary "+(l.critSuccess?"crit":l.critFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},l.total)),u.a.createElement("span",{className:"details"},l.details))),e.advantage&&t.push(u.a.createElement("div",{key:a++,className:e.advantage===g.Advantage?"roll-advantage":"roll-disadvantage"},e.advantage===g.Advantage?"A":"D"))}}catch(o){r=!0,c=o}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}return u.a.createElement("div",{className:"roll-rolls"},t)}}]),t}(u.a.Component),ye=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result;return u.a.createElement("div",{className:"text"},e.text)}}]),t}(u.a.Component),je=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.message,t=e.data,a=[];for(var n in t.results){var r=t.results[n];switch(r.type){case b.Text:a.push(u.a.createElement(ye,{key:n,result:r}));break;case b.DiceRoll:a.push(u.a.createElement(Oe,{key:n,result:r}));break;default:throw new Error("Unknown result type ".concat(r.type,"."))}}return u.a.createElement("div",{className:"character-action-container"},u.a.createElement("div",{className:"action-header"},u.a.createElement("span",{className:"action-user"},e.sender)),u.a.createElement("div",{className:"action-title"},u.a.createElement("span",{className:"action-name"},t.title)),a)}}]),t}(u.a.Component),Se=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={msg:"",messages:[]},a.scrollDiv=void 0,a.scrollToBottomOfChat=function(){a.scrollDiv&&(a.scrollDiv.scrollTop=a.scrollDiv.scrollHeight)},a.handleMsgChange=function(e){a.setState({msg:e.target.value})},a.handleKeyDown=function(e){if("Enter"===e.key){if(a.state.msg.match(/^\d*?d(\d+|%)/)){var t=new v.DiceRoll(a.state.msg),n={type:"roll",rollType:"Ad-hoc",rollName:t.notation,modifier:null,roll1Total:t.total,roll1Details:t.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:!1,roll1CritFail:!1};a.props.sendMessage("",n)}else a.sendMessage(a.state.msg);a.setState({msg:""})}},a.sendMessage=function(e){a.props.sendMessage(e)},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.scrollToBottomOfChat()}},{key:"componentDidMount",value:function(){this.scrollToBottomOfChat()}},{key:"render",value:function(){var e=this,t=this.props.messages;return u.a.createElement("div",{style:{padding:"0 10px 10px 10px"}},this.props.loggedIn?u.a.createElement("div",{style:{}},u.a.createElement("div",{style:{paddingBottom:"15px"}},u.a.createElement(oe,null)),u.a.createElement("h1",{className:be.a.chatHeader},"Chat"),u.a.createElement("div",{className:be.a.messageWrapper},u.a.createElement("div",{className:be.a.messages,ref:function(t){return e.scrollDiv=t}},t.map(function(t,a){switch(t.data&&t.data.type){case"roll":return u.a.createElement(Ee,{message:t,key:a});case"action":return u.a.createElement(je,{message:t,key:a});default:return u.a.createElement(ge,{message:t,key:a,isOwner:t.sender===e.props.user.email})}})),u.a.createElement("div",{className:be.a.chatInputWrapper},u.a.createElement(q.a,{placeholder:"msg or d20+4 etc",onChange:this.handleMsgChange,onKeyDown:this.handleKeyDown,value:this.state.msg,variant:"filled",margin:"normal"})))):u.a.createElement(oe,null))}}]),t}(u.a.Component),ke=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(Se,this.props)}}]),t}(o.Component),Ce=Object(h.c)(function(e){return{messages:e.chat.messages,loggedIn:e.auth.loggedIn,user:e.auth.user}},function(e){return{sendMessage:function(t,a){return e(_(t,a))},login:function(t,a){return e(ee(t,a))}}})(ke),Ne=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.asset;return u.a.createElement("div",null,e.name||"unknown")}}]),t}(o.Component),we=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.assets;return u.a.createElement("div",null,u.a.createElement("ul",null,e.map(function(e){return u.a.createElement(Ne,{asset:e,key:e.id})})))}}]),t}(o.Component),Ae=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.assets;return u.a.createElement("div",null,u.a.createElement("h1",null,"Asset List"),u.a.createElement(we,{assets:e}))}}]),t}(o.Component),Te=Object(h.c)(function(e){return{assets:e.assets.assets}},function(e){return{}})(Ae),Ie=a(35),xe=a(295),De=a.n(xe),_e=a(49),Me=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={current:""},a.handleChange=function(e){a.setState({current:e.target.value}),a.props.onChange&&a.props.onChange(e.target.value)},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.options;return u.a.createElement(Ie.b,{className:t.formControl},u.a.createElement(Ie.c,{htmlFor:"upload-input"},"Images"),u.a.createElement(Ie.e,{value:this.state.current,onChange:this.handleChange,inputProps:{name:"upload",id:"upload-input"}},a.map(function(e){return u.a.createElement(Ie.d,{key:e.id,value:e.id},e.name)})))}}]),t}(o.Component),Re=Object(_e.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit}}})(Me),Le=a(20),Ue=a.n(Le),Fe=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).onSave=function(){a.props.saveNewAsset({imageUrl:"xyz",type:0})},a.onChangeUpload=function(e){},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.uploads;return u.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.a.createElement("h1",null,"Create Asset"),u.a.createElement(Ie.f,{label:"Name",margin:"normal",className:t.nameInput}),u.a.createElement(Re,{onChange:this.onChangeUpload,options:a}),u.a.createElement(Ie.a,{variant:"contained",className:t.button,onClick:this.onSave},u.a.createElement(De.a,{className:Ue()(t.leftIcon,t.iconSmall)}),"Save"))}}]),t}(o.Component),He=Object(_e.withStyles)(function(e){return{button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20},nameInput:{margin:e.spacing.unit}}})(Fe),Pe={ASSETS:{SYNC:"ASSETS.SYNC",SYNC_FAILED:"ASSETS.SYNC_FAILED",NEW:{SAVE:"ASSETS.NEW.SAVE"}}},We=function(e){return{type:Pe.ASSETS.SYNC,assets:e}},Ge=function(e){return{type:Pe.ASSETS.SYNC_FAILED,error:e}},Be=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(He,{uploads:this.props.uploads,saveNewAsset:this.props.saveNewAsset})}}]),t}(o.Component),Ye=Object(h.c)(function(e){return{assets:e.assets.assets,uploads:e.images.images}},function(e){return{saveNewAsset:function(t){return e(function(e){return{type:Pe.ASSETS.NEW.SAVE,asset:e}}(t))}}})(Be),Ze=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("h1",null,"Settings"),this.props.loggedIn&&u.a.createElement(Ie.a,{variant:"contained",color:"primary",onClick:this.props.logout},"Logout"))}}]),t}(o.Component),ze=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(Ze,{loggedIn:this.props.loggedIn,logout:this.props.logout})}}]),t}(o.Component),Ve=Object(h.c)(function(e){return{loggedIn:e.auth.loggedIn}},function(e){return{logout:function(){return e(ne())}}})(ze),Qe=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",null,this.props.characters.map(function(t){return u.a.createElement("div",{key:t.id,onClick:function(a){return e.openCharacterSheet(t)}},t.name)}))}},{key:"openCharacterSheet",value:function(e){this.props.openCharacterSheet(e.id)}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(u.a.Component),Ke=Object(h.c)(function(e){return{characters:e.characters.characters}},function(e){return{openCharacterSheet:function(t){return e(function(e){return{type:R.CHARACTERS.OPEN_SHEET,characterId:e}}(t))}}})(Qe),Xe=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(Ke,this.props)}}]),t}(o.Component),Je=Object(h.c)(function(e){return{messages:e.chat.messages,loggedIn:e.auth.loggedIn,user:e.auth.user}},function(e){return{sendMessage:function(t,a){return e(_(t,a))}}})(Xe),qe=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={value:0},a.handleChange=function(e,t){a.setState({value:t})},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.value;return u.a.createElement("div",null,u.a.createElement(pe.a,{position:"static"},u.a.createElement(de.a,{variant:"scrollable",value:e,onChange:this.handleChange},u.a.createElement(fe.a,{label:"Chat"}),u.a.createElement(fe.a,{label:"Characters"}),u.a.createElement(fe.a,{label:"Upload"}),u.a.createElement(fe.a,{label:"Assets"}),u.a.createElement(fe.a,{label:"Settings"}))),0===e&&u.a.createElement(Ce,null),1===e&&u.a.createElement(Je,null),2===e&&u.a.createElement(Q,null),3===e&&u.a.createElement("div",null,u.a.createElement(Ye,null),u.a.createElement(Te,null)),4===e&&u.a.createElement(Ve,null))}}]),t}(o.Component),$e=Object(_e.createStyles)({toolbarWrapper:{backgroundColor:"grey",padding:"5px",display:"flex",flexDirection:"row",borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},toolbarButton:{width:"5vh",height:"5vh",margin:"5px",border:"none",borderRadius:"5px",boxShadow:"0px 2px 5px 0px rgba(0,0,0,0.5)",cursor:"pointer","&:hover":{background:"rgba(190,190,190,0.5)"}}}),et=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return u.a.createElement("div",{className:e.toolbarWrapper},u.a.createElement("button",{className:e.toolbarButton},"Add Asset"),u.a.createElement("button",{className:e.toolbarButton},"YY"),u.a.createElement("button",{className:e.toolbarButton},"ZZ"))}}]),t}(o.Component),tt=Object(_e.withStyles)($e)(et),at=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{style:this.props.style},u.a.createElement(tt,null))}}]),t}(o.Component),nt=Object(h.c)(function(e){return{}},function(e){return{}})(at),rt=Object(_e.createStyles)({viewControlWrapper:{backgroundColor:"grey",padding:"8px",display:"flex",flexDirection:"column",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"},viewControlButton:{width:"3vh",height:"3vh",margin:"3px",border:"none",borderRadius:"5px",boxShadow:"0px 2px 5px 0px rgba(0,0,0,0.5)",cursor:"pointer","&:hover":{background:"rgba(190,190,190,0.5)"}}}),ct=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.mapZoomIn,n=e.mapZoomOut;return u.a.createElement("div",{className:t.viewControlWrapper},u.a.createElement("button",{className:t.viewControlButton,onClick:a},"+"),u.a.createElement("button",{className:t.viewControlButton,onClick:n},"-"))}}]),t}(o.Component),it=Object(_e.withStyles)(rt)(ct),st={MAP:{ZOOM:{IN:"MAP.ZOOM.IN",OUT:"MAP.ZOOM.OUT"}}},lt=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.mapZoomIn,a=e.mapZoomOut;return u.a.createElement("div",{style:this.props.style},u.a.createElement(it,{mapZoomIn:t,mapZoomOut:a}))}}]),t}(o.Component),ot=Object(h.c)(function(e){return{}},function(e){return{mapZoomIn:function(){return e({type:st.MAP.ZOOM.IN})},mapZoomOut:function(){return e({type:st.MAP.ZOOM.OUT})}}})(lt),ut=a(296),pt=a(29),mt=a(297),dt=a.n(mt),ht=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={x:300,y:300,alpha:1,dragging:!1,data:null},a.sprite=void 0,a.app=void 0,a.root=void 0,a.onMapMount=function(e){var t=new dt.a({screenWidth:.75*window.innerWidth,screenHeight:window.innerHeight,worldWidth:1e3,worldHeight:1e3,interaction:e.renderer.plugins.interaction});e.renderer.autoResize=!0,e.renderer.view.style.position="absolute",e.renderer.view.style.display="block",e.renderer.resize(.75*window.innerWidth,window.innerHeight),e.stage.addChild(t),t.drag({mouseButtons:"right"}).pinch().wheel().decelerate();var n=t.addChild(pt.Sprite.fromImage("https://firebasestorage.googleapis.com/v0/b/dnd-player-a7776.appspot.com/o/uploads%2F5e9a7b59-678a-477c-a18b-4739c9cb197a?alt=media&token=73ec57e9-87e2-44ca-9b08-4243d584cd91"));n.width=n.height=100,n.anchor.set(.5,.5),n.position.set(100,100),n.interactive=!0,n.cursor="pointer",n.on("mousedown",a.onDragStart),n.on("mousemove",a.onDragMove),n.on("mouseup",a.onDragEnd),n.on("mouseupoutside",a.onDragEnd),n.on("mouseover",function(e){var t=e.currentTarget;t&&(t.tint=16711680)}),n.on("mouseout",function(e){var t=e.currentTarget;t&&(t.tint=16777215)});var r=t.addChild(pt.Sprite.fromImage("https://firebasestorage.googleapis.com/v0/b/dnd-player-a7776.appspot.com/o/uploads%2F8b58cc32-ae8f-4ed9-ba32-21a23087050c?alt=media&token=cf5989aa-73c7-4c96-9aaa-95ab11649fa5"));r.width=r.height=150,r.position.set(350,400),r.anchor.set(.5,.5),r.interactive=!0,r.cursor="pointer"},a.onDragStart=function(e){var t=e.currentTarget;t.alpha=.5,t.dragging=!0,t.data=e.data},a.onDragEnd=function(e){var t=e.currentTarget;t.alpha=1,t.dragging=!1,t.data=null},a.onDragMove=function(e){var t=e.currentTarget;if(t.dragging){var a=t.data.getLocalPosition(e.currentTarget.parent);t.x=a.x,t.y=a.y}},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(ut.Stage,{onMount:this.onMapMount,width:.75*window.innerWidth,height:window.innerHeight}))}}]),t}(o.Component),ft=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.zoom;return u.a.createElement(ht,{updateSpriteLocation:function(){},zoom:e})}}]),t}(o.Component),vt=Object(h.c)(function(e){return{zoom:e.map.zoom}},function(e){return{}})(ft),bt=a(54),gt=a(65),Et=a(61),Ot=a(136),yt=a(18),jt={messages:[],new:{},syncError:null};function St(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case x.CHAT.SYNC:return Object(yt.a)({},e,{messages:t.messages});case x.CHAT.SYNC_FAILED:return Object(yt.a)({},e,{syncError:t.error});default:return e}}var kt=a(300),Ct={openCharacterSheets:[],characters:[{id:"1",name:"Garrick Crownguard",size:"M",strength:25,dexterity:12,constitution:18,intelligence:9,wisdom:12,charisma:12,ac:19,hp:41,maxHp:87,hitDice:8,speed:{walk:30,climb:0,fly:0},proficiencies:{saves:{strength:1,constitution:1},skills:{athletics:2,insight:1,intimidation:1,perception:1}},levels:[{className:"Fighter",level:8}]}]};function Nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case R.CHARACTERS.OPEN_SHEET:return Object(yt.a)({},e,{openCharacterSheets:[].concat(Object(kt.a)(e.openCharacterSheets.filter(function(e){return e!==t.characterId})),[t.characterId])});case R.CHARACTERS.CLOSE_SHEET:return Object(yt.a)({},e,{openCharacterSheets:e.openCharacterSheets.filter(function(e){return e!==t.characterId})});default:return e}}var wt={loading:!1,loggedIn:!1,user:null,loginError:null};function At(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case $.LOGIN.REQUEST:case $.LOGOUT.REQUEST:return Object(yt.a)({},e,{loading:!0});case $.LOGIN.SUCCESS:return Object(yt.a)({},e,{loading:!1,loggedIn:!0,user:t.user,loginError:null});case $.LOGIN.FAILURE:return Object(yt.a)({},e,{loading:!1,loginError:t.error});case $.LOGOUT.SUCCESS:return wt;case $.LOGOUT.FAILURE:return Object(yt.a)({},e,{loading:!1});default:return e}}var Tt={uploading:!1,url:null,uploadProgress:0,uploadError:null};function It(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case F.STORAGE.SEND_FILE:return Object(yt.a)({},e,{uploading:!0});case F.STORAGE.SEND_FILE_SUCCESS:return Object(yt.a)({},e,{uploading:!1});case F.STORAGE.SEND_FILE_FAILURE:return Object(yt.a)({},e,{uploading:!1,uploadError:t.error});case F.STORAGE.SEND_FILE_PROGRESS:return Object(yt.a)({},e,{uploadProgress:t.progress});default:return e}}var xt={IMAGES:{SYNC:"IMAGES.SYNC",SYNC_FAILED:"IMAGES.SYNC_FAILED"}},Dt=function(e){return{type:xt.IMAGES.SYNC,images:e}},_t=function(e){return{type:xt.IMAGES.SYNC_FAILED,error:e}},Mt={images:[],syncError:null};function Rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case xt.IMAGES.SYNC:return Object(yt.a)({},e,{images:t.images});case xt.IMAGES.SYNC_FAILED:return Object(yt.a)({},e,{syncError:t.error});default:return e}}var Lt={assets:[],syncError:null};function Ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Pe.ASSETS.SYNC:return Object(yt.a)({},e,{assets:t.assets});case Pe.ASSETS.SYNC_FAILED:return Object(yt.a)({},e,{syncError:t.error});default:return e}}var Ft={zoom:1};function Ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case st.MAP.ZOOM.IN:return Object(yt.a)({},e,{zoom:e.zoom*=1.2});case st.MAP.ZOOM.OUT:return Object(yt.a)({},e,{zoom:e.zoom*=.8});default:return e}}var Pt=a(15),Wt=a.n(Pt),Gt=a(10),Bt=a(44),Yt=a.n(Bt),Zt=(a(289),a(299)),zt=a.n(Zt),Vt=JSON.parse(localStorage.getItem("firebaseConfig")),Qt=Yt.a.initializeApp(Vt),Kt=(Qt.database(),new zt.a(Qt)),Xt=Wt.a.mark($t),Jt=Wt.a.mark(ta),qt=Wt.a.mark(aa);function $t(e){var t,a,n;return Wt.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Gt.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=e.message||"",n=e.data||{},r.next=7,Object(Gt.call)(Kt.database.create,"/chatroom",{sender:t.email,timestamp:Bt.database.ServerValue.TIMESTAMP,msg:a,data:n});case 7:case"end":return r.stop()}},Xt)}var ea=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(yt.a)({},t[e],{id:e})})};function ta(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.fork)(Kt.database.sync,Object(Bt.database)(Kt.app).ref("/chatroom").orderByChild("timestamp"),{successActionCreator:D,failureActionCreator:M,transform:ea},"value");case 2:case"end":return e.stop()}},Jt)}function aa(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.all)([Object(Gt.fork)(ta),Object(Gt.takeEvery)(x.CHAT.NEW.SAVE,$t)]);case 2:case"end":return e.stop()}},qt)}var na=Wt.a.mark(sa),ra=Wt.a.mark(la),ca=Wt.a.mark(oa),ia=Wt.a.mark(ua);new Yt.a.auth.EmailAuthProvider;function sa(e){return Wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Gt.call)(Kt.auth.signInWithEmailAndPassword,e.username,e.password);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object(Gt.put)(ae(t.t0));case 9:case"end":return t.stop()}},na,null,[[0,5]])}function la(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Gt.call)(Kt.auth.signOut);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(Gt.put)(ce(e.t0));case 9:case"end":return e.stop()}},ra,null,[[0,5]])}function oa(){var e,t,a;return Wt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Gt.call)(Kt.auth.channel);case 2:e=n.sent;case 3:return n.next=6,Object(Gt.take)(e);case 6:if(t=n.sent,!(a=t.user)){n.next=13;break}return n.next=11,Object(Gt.put)(te(a));case 11:n.next=15;break;case 13:return n.next=15,Object(Gt.put)(re());case 15:n.next=3;break;case 17:case"end":return n.stop()}},ca)}function ua(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.fork)(oa);case 2:return e.next=4,Object(Gt.all)([Object(Gt.takeEvery)($.LOGIN.REQUEST,sa),Object(Gt.takeEvery)($.LOGOUT.REQUEST,la)]);case 4:case"end":return e.stop()}},ia)}var pa=Wt.a.mark(fa),ma=Wt.a.mark(va),da=Wt.a.mark(ba),ha=Object(gt.channel)();function fa(e){var t,a;return Wt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(t=Kt.storage.uploadFile(e.filePath,e.file)).on("state_changed",function(e){var t=100*e.bytesTransferred/e.totalBytes;console.log("".concat(t,"%")),ha.put(H(t))}),n.next=4,t;case 4:return n.prev=4,n.next=7,Object(Gt.call)(Kt.storage.getDownloadURL,e.filePath);case 7:return a=n.sent,n.next=10,Object(Gt.call)(Kt.database.create,"/uploads",{filePath:e.filePath,name:e.name,downloadUrl:a,uploadTime:Bt.database.ServerValue.TIMESTAMP});case 10:return n.next=12,Object(Gt.put)(P());case 12:n.next=19;break;case 14:return n.prev=14,n.t0=n.catch(4),console.error(n.t0),n.next=19,Object(Gt.put)(W(n.t0));case 19:case"end":return n.stop()}},pa,null,[[4,14]])}function va(){var e;return Wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Gt.take)(ha);case 3:return e=t.sent,t.next=6,Object(Gt.put)(e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ma)}function ba(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.fork)(va);case 2:return e.next=4,Object(Gt.all)([Object(Gt.takeEvery)(F.STORAGE.SEND_FILE,fa)]);case 4:case"end":return e.stop()}},da)}var ga=Wt.a.mark(ya),Ea=Wt.a.mark(ja),Oa=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(yt.a)({},t[e],{id:e})})};function ya(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.fork)(Kt.database.sync,Object(Bt.database)(Kt.app).ref("/uploads").orderByChild("timestamp"),{successActionCreator:Dt,failureActionCreator:_t,transform:Oa},"value");case 2:case"end":return e.stop()}},ga)}function ja(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.all)([Object(Gt.fork)(ya)]);case 2:case"end":return e.stop()}},Ea)}var Sa=Wt.a.mark(wa),ka=Wt.a.mark(Aa),Ca=Wt.a.mark(Ta),Na=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(yt.a)({},t[e],{id:e})})};function wa(e){var t,a;return Wt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Gt.select)(function(e){return e.auth.user});case 2:return t=n.sent,a=e.asset,n.next=6,Object(Gt.call)(Kt.database.create,"/assets",Object(yt.a)({},a,{creator:t.uid,timestamp:Bt.database.ServerValue.TIMESTAMP}));case 6:case"end":return n.stop()}},Sa)}function Aa(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.fork)(Kt.database.sync,Object(Bt.database)(Kt.app).ref("/assets").orderByChild("name"),{successActionCreator:We,failureActionCreator:Ge,transform:Na},"value");case 2:case"end":return e.stop()}},ka)}function Ta(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.all)([Object(Gt.fork)(Aa),Object(Gt.takeEvery)(Pe.ASSETS.NEW.SAVE,wa)]);case 2:case"end":return e.stop()}},Ca)}var Ia=Wt.a.mark(xa);function xa(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.all)([Object(Gt.fork)(aa),Object(Gt.fork)(ua),Object(Gt.fork)(ba),Object(Gt.fork)(ja),Object(Gt.fork)(Ta)]);case 2:case"end":return e.stop()}},Ia)}var Da,_a=Object(Et.a)({basename:"/dnd-player"}),Ma=Object(gt.default)(),Ra=[Ma],La=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||bt.d).apply(void 0,[bt.a.apply(void 0,Ra)].concat([])),Ua=Object(bt.e)((Da=_a,Object(bt.c)({router:Object(Ot.b)(Da),chat:St,auth:At,storage:It,images:Rt,assets:Ut,map:Ht,characters:Nt})),{},La);Ma.run(xa);var Fa=Ua,Ha=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).configLoaded=void 0,a.configLoaded=!!localStorage.getItem("firebaseConfig"),a.state={projectName:"",apiKey:""},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=Object(_e.createMuiTheme)({palette:{type:"dark"}});return u.a.createElement(h.a,{store:Fa},u.a.createElement(Ot.a,{history:_a},u.a.createElement("div",{className:"App"},u.a.createElement(_e.MuiThemeProvider,{theme:e},u.a.createElement(p.c,null,u.a.createElement(p.a,{exact:!0,path:"/",render:function(){return u.a.createElement("div",null,u.a.createElement(vt,null),u.a.createElement(nt,{style:{position:"fixed",bottom:"0",left:"35%",transform:"translate(-50%, 0%)"}}),u.a.createElement(ot,{style:{position:"fixed",right:"25vw",top:"10vh"}}),u.a.createElement("div",null,u.a.createElement(U,null)),u.a.createElement("div",{className:d.a.chatWrapper},u.a.createElement(qe,null)))}}),u.a.createElement(p.a,{path:"/upload",render:function(){return u.a.createElement(Q,null)}}),u.a.createElement(p.a,{path:"/login",render:function(){return u.a.createElement(oe,null)}}))))))}}]),t}(o.Component);t.default=Ha},735:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(42),i=a.n(c);a(386),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(49),l=a(35),o=void 0,u={projectName:"",apiKey:""};if(null==localStorage.getItem("firebaseConfig")){var p=Object(s.createMuiTheme)({palette:{type:"dark"}});i.a.render(r.a.createElement("div",{className:"App"},r.a.createElement(s.MuiThemeProvider,{theme:p},r.a.createElement("div",{className:"projectInputs"},r.a.createElement(l.f,{label:"Project Name",placeholder:"dnd-player-b8372",onChange:function(e){return u.projectName=e.target.value},margin:"normal"}),r.a.createElement(l.f,{label:"API Key",placeholder:"AIzaSd***************pK5ao6g95Q-9auWt-8",onChange:function(e){return u.apiKey=e.target.value},margin:"normal",onKeyUp:function(e){13===e.keyCode&&o.saveConfig()}}),r.a.createElement(l.a,{variant:"contained",color:"primary",onClick:function(){return localStorage.setItem("firebaseConfig",JSON.stringify({apiKey:u.apiKey,authDomain:"".concat(u.projectName,".firebaseapp.com"),databaseURL:"https://".concat(u.projectName,".firebaseio.com"),projectId:u.projectName,storageBucket:"".concat(u.projectName,".appspot.com")})),void window.location.reload()}},"Save")))),document.getElementById("root"))}else{var m=a(734).default;i.a.render(r.a.createElement(m,null),document.getElementById("root"))}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,a){e.exports={chatinput:"Chat_chatinput__t09l3",messageWrapper:"Chat_messageWrapper__aBXHq",messages:"Chat_messages__1eOv3",rollButton:"Chat_rollButton__2pWqq",chat:"Chat_chat__3QwoS",chatHeader:"Chat_chatHeader__pIhFX",username:"Chat_username__6SOBQ",chatInputWrapper:"Chat_chatInputWrapper__eio3O"}}},[[381,1,2]]]);
//# sourceMappingURL=main.15d85b89.chunk.js.map