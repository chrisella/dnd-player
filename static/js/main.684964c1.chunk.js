(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports={wrapper:"EquipmentItem_wrapper__1gmMl",name:"EquipmentItem_name__JQKN0",quantity:"EquipmentItem_quantity__3fjZi",weight:"EquipmentItem_weight__IGS_H",notes:"EquipmentItem_notes__1ObZa"}},121:function(e,t,a){e.exports={item:"AssetListItem_item__FHViu",image:"AssetListItem_image__3AR_3",title:"AssetListItem_title__3GLMy"}},122:function(e,t,a){e.exports={enter:"OverlayPanel_enter__32t_D",enterActive:"OverlayPanel_enterActive__3mHNX",exit:"OverlayPanel_exit__1TtZt",exitActive:"OverlayPanel_exitActive__aa--v"}},14:function(e,t,a){e.exports={row:"NonPlayerCharacterSheet_row__2WSWI",column:"NonPlayerCharacterSheet_column__1tRCs",center:"NonPlayerCharacterSheet_center__PVa9Q",popupAdvantage:"NonPlayerCharacterSheet_popupAdvantage__1W1CH",popupDisadvantage:"NonPlayerCharacterSheet_popupDisadvantage__1UDfA",characterSheet:"NonPlayerCharacterSheet_characterSheet__1ITIM",characterImageContainer:"NonPlayerCharacterSheet_characterImageContainer__3ssK9",characterName:"NonPlayerCharacterSheet_characterName__2Pk6i",button:"NonPlayerCharacterSheet_button__3KA_K",characterType:"NonPlayerCharacterSheet_characterType__1hRFz",boldHeading:"NonPlayerCharacterSheet_boldHeading__iF3Wx",italicHeading:"NonPlayerCharacterSheet_italicHeading__21qNT",divider:"NonPlayerCharacterSheet_divider__11Rzp",abilityContainer:"NonPlayerCharacterSheet_abilityContainer__1_94c",ability:"NonPlayerCharacterSheet_ability__2qAo4",abilityTitle:"NonPlayerCharacterSheet_abilityTitle__1tqn_",speedTitle:"NonPlayerCharacterSheet_speedTitle__3FGrm",skill:"NonPlayerCharacterSheet_skill__3oqJh",save:"NonPlayerCharacterSheet_save__2zIu_",trait:"NonPlayerCharacterSheet_trait__1sDOR",action:"NonPlayerCharacterSheet_action__vmiUS",subheading:"NonPlayerCharacterSheet_subheading__WYOtH",rollable:"NonPlayerCharacterSheet_rollable__2hCTt"}},163:function(e,t,a){e.exports={messages:"Chat_messages__umiIH",rollButton:"Chat_rollButton__2gB8L",chat:"Chat_chat__1_6O9",chatHeader:"Chat_chatHeader__2t-78",username:"Chat_username__2zIlL"}},23:function(e,t,a){e.exports={row:"PlayerCharacterSheetEditor_row__qX09K",column:"PlayerCharacterSheetEditor_column__1oSRB",abilityContainer:"PlayerCharacterSheetEditor_abilityContainer__2tbzW"}},236:function(e,t,a){e.exports={mapWrapper:"App_mapWrapper__w0tfJ",overlayWrapper:"App_overlayWrapper__2ea5A",chatWrapper:"App_chatWrapper__2U1dO"}},364:function(e,t,a){e.exports={wrapper:"CharacterImage_wrapper__3sak9"}},365:function(e,t,a){e.exports={wrapper:"Authentication_wrapper__1wnUP",username:"Authentication_username__1zpTM",password:"Authentication_password__1usTz",loginButton:"Authentication_loginButton__36BHo",logoutButton:"Authentication_logoutButton__1QowG"}},457:function(e,t,a){e.exports=a(861)},464:function(e,t,a){},667:function(e,t,a){},69:function(e,t,a){},79:function(e,t,a){e.exports={equipment:"Equipment_equipment__3cDCi",title:"Equipment_title__1QYuE",header:"Equipment_header__2uM8D",name:"Equipment_name__2M0UY",quantity:"Equipment_quantity__2AxDK",weight:"Equipment_weight__2FpQP",notes:"Equipment_notes__31VK1"}},831:function(e,t){},858:function(e,t,a){},860:function(e,t,a){"use strict";a.r(t);var r,n=a(1),c=a(2),i=a(4),o=a(3),s=a(5),l=a(0),u=a.n(l),p=a(51),m=a(236),h=a.n(m),d=a(374),f=a(33),v=a(34),b=a(35),E=(a(69),a(56)),g=a(10);!function(e){e[e.Tiny=0]="Tiny",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large",e[e.Huge=4]="Huge",e[e.Gargantuan=5]="Gargantuan"}(r||(r={}));var y,O,j=function(){function e(){Object(n.a)(this,e)}return Object(c.a)(e,null,[{key:"mapCharacterAttackEffect",value:function(e,t){var a=this.attackEffectMap[e.type];return a?a(e,t):{type:O.Text,text:"Unknown attack type ".concat(e.type,"!")}}},{key:"mapToHitCharacterEffect",value:function(e,t){var a=e;return{type:O.ToHit,modifier:C.getAbilityModifier(t,a.ability)+C.getProficiencyBonus(t),critRange:20}}},{key:"mapDamageCharacterEffect",value:function(e,t){var a=e;return{type:O.Damage,damageType:a.damageType,diceCount:a.diceCount,diceSize:a.diceSize,bonus:(a.bonus||0)+(a.ability?C.getAbilityModifier(t,a.ability):0)}}},{key:"mapSavingThrowCharacterEffect",value:function(t,a){var r=t;return{type:O.SavingThrow,saveType:r.saveType,saveDC:10+C.getAbilityModifier(a,r.DCAbility),onSave:e.mapCharacterAttackEffect(r.onSave,a),onFail:e.mapCharacterAttackEffect(r.onFail,a)}}},{key:"mapTextCharacterEffect",value:function(e){var t=e;return{type:O.Text,text:t.text}}}]),e}();j.attackEffectMap={0:j.mapToHitCharacterEffect,1:j.mapDamageCharacterEffect,2:j.mapSavingThrowCharacterEffect,3:j.mapTextCharacterEffect},function(e){e[e.ToHit=0]="ToHit",e[e.Damage=1]="Damage",e[e.SavingThrow=2]="SavingThrow",e[e.Text=3]="Text"}(O||(O={}));var C=function(){function e(){Object(n.a)(this,e)}return Object(c.a)(e,null,[{key:"getProficiencyBonus",value:function(e){if(!e||!e.levels)return null;var t=e.levels.map(function(e){return e.level}).reduce(function(e,t){return e+t});return t>20?null:1+Math.ceil(t/4)}},{key:"getSaveModifier",value:function(t,a){if(!t||!t.saves)return null;var r=this.getAbilityModifier(t,a);if(null===r)return null;var n=t.saves[a]||0,c=e.getProficiencyBonus(t);return r+Math.floor(n*c)}},{key:"getAbilityModifier",value:function(e,t){return e&&void 0!==e[t]?Math.floor((e[t]-10)/2):null}},{key:"getInitiativeModifier",value:function(e){return this.getAbilityModifier(e,"dexterity")}},{key:"getSkillModifier",value:function(t,a,r){if(!t||void 0===t[r])return null;var n=Math.floor((t[r]-10)/2),c=(t.skills||{})[a]||0,i=e.getProficiencyBonus(t);return n+Math.floor(c*i)}},{key:"getAttacks",value:function(e){return[].concat((e.equipment||[]).map(function(e){return e.attacks||[]})).concat(e.attacks||[]).concat((e.spells||[]).map(function(e){return Object(g.a)({},e,{title:e.name})})).flat().map(function(t){return{name:t.title,range:t.range,effects:t.effects.map(function(t){return j.mapCharacterAttackEffect(t,e)})}})}},{key:"getShortAbilityName",value:function(t){var a=e.abilityNameMap[t];return a&&a.short}},{key:"getLongAbilityName",value:function(t){var a=e.abilityNameMap[t];return a&&a.long}},{key:"getLongSkillName",value:function(t){return e.skillNameMap[t]}},{key:"getSaveName",value:function(t){return e.saveNameMap[t]}},{key:"getSenseName",value:function(t){return e.senseNameMap[t]}},{key:"getSizeName",value:function(t){return e.sizeNameMap[t]}},{key:"getSpeedName",value:function(t){return e.speedNameMap[t]}}]),e}();C.abilityNameMap={strength:{short:"STR",long:"Strength"},dexterity:{short:"DEX",long:"Dexterity"},constitution:{short:"CON",long:"Constitution"},intelligence:{short:"INT",long:"Intelligence"},wisdom:{short:"WIS",long:"Wisdom"},charisma:{short:"CHA",long:"Charisma"}},C.skillNameMap={acrobatics:"Acrobatics",animalHandling:"Animal Handling",arcana:"Arcana",athletics:"Athletics",deception:"Deception",history:"History",insight:"Insight",intimidation:"Intimidation",investigation:"Investigation",medicine:"Medicine",nature:"Nature",perception:"Perception",performance:"Performance",persuasion:"Persuasion",religion:"Religion",sleightOfHand:"Sleight of Hand",stealth:"Stealth",survival:"Survival"},C.saveNameMap={strength:"Strength Save",dexterity:"Dexterity Save",constitution:"Constitution Save",intelligence:"Intelligence Save",wisdom:"Wisdom Save",charisma:"Charisma Save"},C.senseNameMap={tremorsense:"tremorsense",darkvision:"darkvision",blindsight:"blindsight",truesight:"truesight"},C.sizeNameMap=(y={},Object(E.a)(y,r.Tiny,"Tiny"),Object(E.a)(y,r.Small,"Small"),Object(E.a)(y,r.Medium,"Medium"),Object(E.a)(y,r.Large,"Large"),Object(E.a)(y,r.Huge,"Huge"),Object(E.a)(y,r.Gargantuan,"Gargantuan"),y),C.speedNameMap={walk:"",fly:"fly",burrow:"burrow",swim:"swim",climb:"climb"},C.classNameMap={barbarian:"Barbarian",bard:"Bard",cleric:"Cleric",druid:"Druid",fighter:"Fighter",monk:"Monk",paladin:"Paladin",ranger:"Ranger",rogue:"Rogue",sorcerer:"Sorcerer",warlock:"Warlock",wizard:"Wizard"};var S,N,k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=C.getAbilityModifier(r,a);return u.a.createElement("div",{className:"ability",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"ability-title"},C.getLongAbilityName(a)),u.a.createElement("div",{className:"ability-modifier"},u.a.createElement("div",{className:"ability-symbol"},n<0?"-":"+"),u.a.createElement("div",{className:"ability-number"},Math.abs(n))),u.a.createElement("div",{className:"ability-score"},r[a]))}},{key:"handleClick",value:function(e,t){var a=C.getAbilityModifier(this.props.character,this.props.ability),r=(a<0?"":"+")+a,n=new b.DiceRoll("d20"+r),c={type:"roll",rollType:"Ability",rollName:C.getLongAbilityName(this.props.ability),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new b.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=r.saves||{},c=C.getSaveModifier(r,a),i=Z[n[a]||0];return u.a.createElement("div",{className:"save",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"save-wrapper"},u.a.createElement("div",{className:"save-proficiency ".concat(i)}),u.a.createElement("div",{className:"save-title"},C.getShortAbilityName(a)),u.a.createElement("div",{className:"save-modifier"},u.a.createElement("span",{className:"save-symbol"},c<0?"-":"+"),u.a.createElement("span",{className:"save-number"},Math.abs(c)))))}},{key:"handleClick",value:function(e,t){var a=C.getSaveModifier(this.props.character,this.props.ability),r=(a<0?"":"+")+a,n=new b.DiceRoll("d20"+r),c={type:"roll",rollType:"Save",rollName:C.getSaveName(this.props.ability),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new b.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),T=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=t.skill,c=r.skills||{},i=C.getSkillModifier(r,n,a),o=Z[c[n]||0];return u.a.createElement("div",{className:"skill",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"skill-wrapper"},u.a.createElement("div",{className:"skill-proficiency ".concat(o)}),u.a.createElement("div",{className:"skill-ability"},C.getShortAbilityName(a)),u.a.createElement("div",{className:"skill-title"},C.getLongSkillName(n)),u.a.createElement("div",{className:"skill-modifier"},u.a.createElement("div",{className:"skill-symbol"},i<0?"-":"+"),u.a.createElement("div",{className:"skill-number"},Math.abs(i)))))}},{key:"handleClick",value:function(e,t){var a=C.getSkillModifier(this.props.character,this.props.skill,this.props.ability),r=(a<0?"":"+")+a,n=new b.DiceRoll("d20"+r),c={type:"roll",rollType:"Skill",rollName:"".concat(this.props.skill," (").concat(this.props.ability,")"),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new b.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),P=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character,t=C.getProficiencyBonus(e);return u.a.createElement("div",{className:"proficiency"},u.a.createElement("div",{className:"proficiency-title"},"Proficiency"),u.a.createElement("div",{className:"proficiency-modifier"},u.a.createElement("div",{className:"proficiency-symbol"},"+"),u.a.createElement("div",{className:"proficiency-number"},t)))}}]),t}(u.a.Component),w=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.character.speed||{walk:0},t=[],a=0,r=Object.keys(e);a<r.length;a++){var n=r[a];t.push(u.a.createElement("div",{className:"speed-container",key:n},u.a.createElement("div",{className:"speed-popup-wrap"},u.a.createElement("span",{className:"speed-number"},e[n]),u.a.createElement("span",{className:"speed-unit"},"ft.")),u.a.createElement("div",{className:"speed-type"},n)))}return u.a.createElement("div",{className:"speed"},u.a.createElement("div",{className:"speed-title"},"Speed"),u.a.createElement("div",{className:"speed-container"},u.a.createElement("span",{className:"speed-number"},e.walk),u.a.createElement("span",{className:"speed-unit"},"ft.")),u.a.createElement("div",{className:"speed-popup"},u.a.createElement("div",{className:"speed-title"},"Speed"),t))}}]),t}(u.a.Component),_=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=C.getInitiativeModifier(t);return u.a.createElement("div",{className:"initiative",onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"initiative-title"},"Initiative"),u.a.createElement("div",{className:"initiative-modifier"},u.a.createElement("div",{className:"initiative-symbol"},a<0?"-":"+"),u.a.createElement("div",{className:"initiative-number"},Math.abs(a))))}},{key:"handleClick",value:function(e,t){var a=C.getInitiativeModifier(this.props.character),r=(a<0?"":"+")+a,n=new b.DiceRoll("d20"+r),c={type:"roll",rollType:"Initiative",rollName:"Initiative",modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new b.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(u.a.Component),x=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;return u.a.createElement("div",{className:"ac"},u.a.createElement("div",{className:"ac-title"},"AC"),u.a.createElement("div",{className:"ac-number"},e.ac))}}]),t}(u.a.Component),I=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;return u.a.createElement("div",{className:"hp"},u.a.createElement("div",{className:"hp-title"},"Hit Points"),u.a.createElement("div",{className:"hp-current"},u.a.createElement("span",null,e.hp),u.a.createElement("span",{className:"hp-header"},"Current")),u.a.createElement("div",{className:"hp-divider"},"/"),u.a.createElement("div",{className:"hp-max"},u.a.createElement("span",null,e.maxHp),u.a.createElement("span",{className:"hp-header"},"Max")))}}]),t}(u.a.Component);a(667);!function(e){e[e.Text=0]="Text",e[e.DiceRoll=1]="DiceRoll",e[e.Condition=2]="Condition"}(S||(S={})),function(e){e[e.Disadvantage=-1]="Disadvantage",e[e.None=0]="None",e[e.Advantage=1]="Advantage"}(N||(N={}));var D=function(){function e(){Object(n.a)(this,e)}return Object(c.a)(e,null,[{key:"doAction",value:function(t,a,r,n){var c=!1,i={type:"action",title:a.title||a.name,characterName:t.name,results:[]},o=!0,s=!1,l=void 0;try{for(var u,p=a.effects[Symbol.iterator]();!(o=(u=p.next()).done);o=!0){var m=u.value,h=e.applyEffect(m,r,c);c=h.crit,i.results.push(h.result)}}catch(d){s=!0,l=d}finally{try{o||null==p.return||p.return()}finally{if(s)throw l}}n("",i)}},{key:"applyEffect",value:function(e,t,a){switch(e.type){case O.ToHit:var r,n,c,i,o=e,s=(o.modifier<0?"":"+")+o.modifier,l={advantage:t,modifier:o.modifier,type:S.DiceRoll,rolls:[]},u=new b.DiceRoll("d20"+s),p=u.toString().match(/.*?: (.*?) =/)[1],m=u.rolls[0][0]===(o.critRange||20),h=1===u.rolls[0][0];return t&&(n=(r=new b.DiceRoll("d20"+s)).toString().match(/.*?: (.*?) =/)[1],c=r.rolls[0][0]===(o.critRange||20),i=1===r.rolls[0][0]),a=t>=0?m||c:m&&c,l.rolls.push({total:u.total,critFail:h,critSuccess:m,details:p,ignore:!!r&&(t>0&&u.total<r.total||u.total>r.total)}),r&&l.rolls.push({total:r.total,critFail:i,critSuccess:c,details:n,ignore:t>0&&u.total>=r.total||u.total<=r.total}),{result:l,crit:a};case O.Damage:var d=e,f=new b.DiceRoll("".concat(d.diceCount*(a?2:1),"d").concat(d.diceSize,"+").concat(d.bonus||0)),v={advantage:N.None,modifier:d.bonus,type:S.DiceRoll,rolls:[]},E=f.toString().match(/.*?: (.*?) =/)[1];return v.rolls.push({critFail:!1,critSuccess:!1,details:E,ignore:!1,total:f.total}),{result:v,crit:a};case O.SavingThrow:var g=e;return{result:{type:S.Condition,condition:"DC ".concat(g.saveDC," ").concat(C.getLongAbilityName(g.saveType)," save"),onSuccess:this.applyEffect(g.onSave,0,a).result,onFailure:this.applyEffect(g.onFail,0,a).result},crit:a};case O.Text:var y=e;return{result:{type:S.Text,text:y.text},crit:a};default:return{result:{type:S.Text,text:"Unexpected attack effect ".concat(e.type,"!")},crit:a}}}}]),e}(),R=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.attack,a=t.effects.filter(function(e){return e.type===O.ToHit})[0],r=t.effects.filter(function(e){return e.type===O.Damage})[0];return u.a.createElement("div",{className:"attack",onClick:function(t){return e.handleClick(t,0)}},a&&u.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),void 0!==a&&u.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",{className:"attack-name"},u.a.createElement("span",null,t.name)),u.a.createElement("div",{className:"attack-range"},t.range," ft."),u.a.createElement("div",{className:"attack-toHit"},a&&u.a.createElement("div",null,u.a.createElement("div",{className:"attack-toHit-symbol"},a.modifier<0?"-":"+"),u.a.createElement("div",{className:"attack-toHit-number"},Math.abs(a.modifier)))),u.a.createElement("div",{className:"attack-damage"},r.diceCount,"d",r.diceSize,"+",r.bonus||0," ",r.damageType))}},{key:"handleClick",value:function(e,t){var a=this.props.attack,r=!1,n={type:"action",characterName:this.props.character.name,title:a.name,results:[]},c=!0,i=!1,o=void 0;try{for(var s,l=a.effects[Symbol.iterator]();!(c=(s=l.next()).done);c=!0){var u=s.value,p=D.applyEffect(u,t,r);r=p.crit,n.results.push(p.result)}}catch(m){i=!0,o=m}finally{try{c||null==l.return||l.return()}finally{if(i)throw o}}this.props.sendMessage("",n)}}]),t}(u.a.Component),M=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=C.getAttacks(t).map(function(t){return u.a.createElement(R,Object.assign({key:t.name,attack:t},e.props))});return u.a.createElement("div",{className:"attacks"},u.a.createElement("div",{className:"attack-container"},u.a.createElement("div",{className:"attack-header"},u.a.createElement("span",{className:"attack-name"},"Attack"),u.a.createElement("span",{className:"attack-range"},"Range"),u.a.createElement("span",{className:"attack-toHit"},"To Hit"),u.a.createElement("span",{className:"attack-damage"},"Damage")),a),u.a.createElement("div",{className:"attacks-title"},"Attacks"))}}]),t}(u.a.Component),L=a(79),H=a.n(L),U=a(106),F=a.n(U),G=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.character,e.item);return u.a.createElement("div",{className:F.a.wrapper},u.a.createElement("span",{className:F.a.name},t.name),u.a.createElement("span",{className:F.a.quantity},t.quantity||"-"),u.a.createElement("span",{className:F.a.weight},t.weight?t.weight+" lb.":"-"),u.a.createElement("span",{className:F.a.notes},t.notes))}}]),t}(u.a.Component),Y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=(this.props.character.equipment||[]).map(function(t,a){return u.a.createElement(G,Object.assign({key:a,item:t},e.props))});return u.a.createElement("div",{className:H.a.equipment},u.a.createElement("div",{className:H.a.wrapper},u.a.createElement("div",{className:H.a.header},u.a.createElement("span",{className:H.a.name},"Name"),u.a.createElement("span",{className:H.a.quantity},"Quantity"),u.a.createElement("span",{className:H.a.weight},"Weight"),u.a.createElement("span",{className:H.a.notes},"Notes")),t),u.a.createElement("div",{className:H.a.title},"Equipment"))}}]),t}(u.a.Component),W=a(72),B="player_character_asset",z="upload_image",q=a(364),J=a.n(q),V=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,a=e.imageUrl;return t(u.a.createElement("div",{className:J.a.wrapper},u.a.createElement("img",{src:a||"http://placekitten.com/128/128"})))}}]),t}(l.Component),K={canDrop:function(e,t){return!0},hover:function(e,t,a){},drop:function(e,t,a){var r=t.getItem();e.updateCharacter&&e.updateCharacter(e.character.id,Object(g.a)({},e.character,{imageRef:r.imageRef}))}};var Q,X=Object(W.DropTarget)(z,K,function(e,t){return{connectDropTarget:e.dropTarget()}})(V),Z={0:"none",.5:"half-proficienct",1:"proficient",2:"expertise"},$=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={newCharacter:JSON.stringify(a.props.character,void 0," ")},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.character,a=e.editPlayerCharacter;return u.a.createElement("div",{className:"column character-sheet ".concat(this.props.popout?"popout":"")},u.a.createElement("div",{className:"character-edit",onClick:function(){return a(t.id)}},"EDIT"),u.a.createElement("div",{className:"row character-details"},u.a.createElement("div",{className:"character-name"},t.name),u.a.createElement("div",{className:"character-image"},u.a.createElement(X,{imageUrl:this.props.image?this.props.image.downloadUrl:t.imageRef,character:t,updateCharacter:this.props.updatePlayerCharacter})),u.a.createElement("div",{className:"character-classes"},(t.levels||[]).map(function(e){return"".concat(C.classNameMap[e.className]," ").concat(e.level)}).join(", "))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"ability-container"},u.a.createElement(k,Object.assign({ability:"strength",character:t},this.props)),u.a.createElement(k,Object.assign({ability:"dexterity",character:t},this.props)),u.a.createElement(k,Object.assign({ability:"constitution",character:t},this.props)),u.a.createElement(k,Object.assign({ability:"intelligence",character:t},this.props)),u.a.createElement(k,Object.assign({ability:"wisdom",character:t},this.props)),u.a.createElement(k,Object.assign({ability:"charisma",character:t},this.props))),u.a.createElement(P,Object.assign({character:t},this.props)),u.a.createElement(w,Object.assign({character:t},this.props)),u.a.createElement(I,Object.assign({character:t},this.props))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"column"},u.a.createElement("div",{className:"save-container"},u.a.createElement(A,Object.assign({ability:"strength",character:t},this.props)),u.a.createElement(A,Object.assign({ability:"dexterity",character:t},this.props)),u.a.createElement(A,Object.assign({ability:"constitution",character:t},this.props)),u.a.createElement(A,Object.assign({ability:"intelligence",character:t},this.props)),u.a.createElement(A,Object.assign({ability:"wisdom",character:t},this.props)),u.a.createElement(A,Object.assign({ability:"charisma",character:t},this.props)),u.a.createElement("div",{className:"section-title"},"Saving Throws"))),u.a.createElement("div",{className:"skill-container"},u.a.createElement(T,Object.assign({skill:"acrobatics",ability:"dexterity",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"animalHandling",ability:"wisdom",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"arcana",ability:"intelligence",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"athletics",ability:"strength",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"deception",ability:"charisma",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"history",ability:"intelligence",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"insight",ability:"wisdom",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"intimidation",ability:"charisma",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"investigation",ability:"intelligence",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"medicine",ability:"wisdom",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"nature",ability:"intelligence",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"perception",ability:"wisdom",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"performance",ability:"charisma",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"persuasion",ability:"charisma",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"religion",ability:"intelligence",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"sleightOfHand",ability:"dexterity",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"stealth",ability:"dexterity",character:t},this.props)),u.a.createElement(T,Object.assign({skill:"survival",ability:"wisdom",character:t},this.props)),u.a.createElement("div",{className:"section-title"},"Skills")),u.a.createElement("div",{className:"column",style:{flex:1}},u.a.createElement("div",{className:"row"},u.a.createElement(_,Object.assign({character:t},this.props)),u.a.createElement(x,Object.assign({character:t},this.props))),u.a.createElement("div",{className:"row"},u.a.createElement(M,Object.assign({character:t},this.props))),u.a.createElement("div",{className:"row"},u.a.createElement(Y,Object.assign({character:t},this.props))))))}}]),t}(u.a.Component),ee=a(23),te=a.n(ee),ae=a(31),re=a.n(ae),ne=a(32),ce=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character;return u.a.createElement("div",{className:te.a.ability},u.a.createElement("div",{className:te.a.abilityTitle},C.getShortAbilityName(a)),u.a.createElement("input",{value:r[a],type:"number",min:0,max:30,placeholder:"10",onChange:function(t){return e.props.updateCharacterProperty(a,t.target.value)}}))}}]),t}(u.a.Component),ie=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:te.a.abilityContainer},u.a.createElement(ce,Object.assign({ability:"strength"},this.props)),u.a.createElement(ce,Object.assign({ability:"dexterity"},this.props)),u.a.createElement(ce,Object.assign({ability:"constitution"},this.props)),u.a.createElement(ce,Object.assign({ability:"intelligence"},this.props)),u.a.createElement(ce,Object.assign({ability:"wisdom"},this.props)),u.a.createElement(ce,Object.assign({ability:"charisma"},this.props)))}}]),t}(u.a.Component),oe=a(27),se=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).prop="levels",a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"mapItem",value:function(e,t){var a=this;return u.a.createElement(le,{key:e,level:t,updateLevelProperty:function(t,r){return a.updateItemProperty(e,t,r)},removeLevel:function(){return a.removeItem(e)}})}}]),t}(function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).prop=void 0,a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=this.prop,r=[];for(var n in t[a]||[]){var c=n,i=t[a][c];r.push(this.mapItem(c,i))}return u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:te.a.boldHeading},"Levels"),u.a.createElement("div",{className:"".concat(te.a.column," ").concat(te.a.center)},r,u.a.createElement("div",{className:te.a.button,onClick:function(){return e.addItem()}},u.a.createElement(re.a,{path:ne.e,size:1,color:"#ccc"}))))}},{key:"updateItemProperty",value:function(e,t,a){var r=Object(oe.a)(this.props.character[this.prop]);r[e][t]=a,this.props.updateCharacterProperty(this.prop,r)}},{key:"removeItem",value:function(e){var t=Object(oe.a)(this.props.character[this.prop]);t.splice(parseInt(e),1),this.props.updateCharacterProperty(this.prop,t)}},{key:"addItem",value:function(){this.props.updateCharacterProperty(this.prop,[].concat(Object(oe.a)(this.props.character[this.prop]||[]),[{}]))}}]),t}(u.a.Component)),le=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.level,a=[];for(var r in C.classNameMap)a.push(u.a.createElement("option",{key:r,value:r},C.classNameMap[r]));return u.a.createElement("div",{className:te.a.level},u.a.createElement("div",{className:te.a.button,onClick:this.props.removeLevel,style:{background:"#333"}},u.a.createElement(re.a,{path:ne.c,size:1,color:"#ccc"})),u.a.createElement("select",{value:t.className,onChange:function(t){return e.props.updateLevelProperty("className",t.target.value)}},a),u.a.createElement("input",{type:"number",min:"1",max:"20",value:t.level,onChange:function(t){return e.props.updateLevelProperty("level",t.target.value)}}))}}]),t}(u.a.Component),ue=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:te.a.row},u.a.createElement("span",null,"Saving throws:"),u.a.createElement(pe,Object.assign({prop:"strength"},this.props)),u.a.createElement(pe,Object.assign({prop:"dexterity"},this.props)),u.a.createElement(pe,Object.assign({prop:"constitution"},this.props)),u.a.createElement(pe,Object.assign({prop:"intelligence"},this.props)),u.a.createElement(pe,Object.assign({prop:"wisdom"},this.props)),u.a.createElement(pe,Object.assign({prop:"charisma"},this.props)))}}]),t}(u.a.Component),pe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.character,r=t.prop;return u.a.createElement("div",{className:te.a.column},u.a.createElement("div",null,C.getShortAbilityName(r)),u.a.createElement("select",{value:(a.saves||{})[r],onChange:function(t){return e.updateSaveProperty(t.target.value)}},u.a.createElement("option",{value:0},"Not proficient"),u.a.createElement("option",{value:.5},"Half proficient"),u.a.createElement("option",{value:1},"Proficient"),u.a.createElement("option",{value:2},"Expertise")))}},{key:"updateSaveProperty",value:function(e){this.props.updateCharacterProperty("saves",Object(g.a)({},this.props.character.saves,Object(E.a)({},this.props.prop,e)))}}]),t}(u.a.Component),me=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:te.a.row},u.a.createElement("span",null,"Skills:"),u.a.createElement("div",{className:te.a.column},u.a.createElement("div",{className:te.a.row},u.a.createElement(he,Object.assign({prop:"acrobatics"},this.props)),u.a.createElement(he,Object.assign({prop:"animalHandling"},this.props)),u.a.createElement(he,Object.assign({prop:"arcana"},this.props)),u.a.createElement(he,Object.assign({prop:"athletics"},this.props)),u.a.createElement(he,Object.assign({prop:"deception"},this.props))),u.a.createElement("div",{className:te.a.row},u.a.createElement(he,Object.assign({prop:"history"},this.props)),u.a.createElement(he,Object.assign({prop:"insight"},this.props)),u.a.createElement(he,Object.assign({prop:"intimidation"},this.props)),u.a.createElement(he,Object.assign({prop:"investigation"},this.props)),u.a.createElement(he,Object.assign({prop:"medicine"},this.props))),u.a.createElement("div",{className:te.a.row},u.a.createElement(he,Object.assign({prop:"nature"},this.props)),u.a.createElement(he,Object.assign({prop:"perception"},this.props)),u.a.createElement(he,Object.assign({prop:"performance"},this.props)),u.a.createElement(he,Object.assign({prop:"persuasion"},this.props)),u.a.createElement(he,Object.assign({prop:"religion"},this.props))),u.a.createElement("div",{className:te.a.row},u.a.createElement(he,Object.assign({prop:"sleightOfHand"},this.props)),u.a.createElement(he,Object.assign({prop:"stealth"},this.props)),u.a.createElement(he,Object.assign({prop:"survival"},this.props)))))}}]),t}(u.a.Component),he=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.character,r=t.prop;return u.a.createElement("div",{className:te.a.column},u.a.createElement("div",null,C.getLongSkillName(r)),u.a.createElement("select",{value:(a.skills||{})[r],onChange:function(t){return e.updateSkillProperty(t.target.value)}},u.a.createElement("option",{value:0},"Not proficient"),u.a.createElement("option",{value:.5},"Half proficient"),u.a.createElement("option",{value:1},"Proficient"),u.a.createElement("option",{value:2},"Expertise")))}},{key:"updateSkillProperty",value:function(e){this.props.updateCharacterProperty("skills",Object(g.a)({},this.props.character.skills,Object(E.a)({},this.props.prop,e)))}}]),t}(u.a.Component),de=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={newCharacter:Object(g.a)({},a.props.character)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.newCharacter,a=this.update.bind(this);return u.a.createElement("div",{className:"".concat(te.a.column," character-sheet ").concat(this.props.popout?"popout":"")},u.a.createElement("div",{className:"".concat(te.a.column," ").concat(te.a.characterSheet," 'popout'}")},u.a.createElement("div",{className:te.a.characterImageContainer},u.a.createElement(X,{imageUrl:this.props.image?this.props.image.downloadUrl:t.imageRef,character:t,updateCharacter:this.props.updatePlayerCharacter})),u.a.createElement("div",{onClick:function(){return e.abortEditSheet()},className:te.a.button},u.a.createElement(re.a,{path:ne.a,size:1,color:"#a6792d"})),u.a.createElement("div",{onClick:function(){return e.saveSheet()},className:te.a.button},u.a.createElement(re.a,{path:ne.b,size:1,color:"#a6792d"})),u.a.createElement("div",{className:te.a.column},u.a.createElement("input",{value:t.name,placeholder:"Name",onChange:function(t){return e.update("name",t.target.value)}}),u.a.createElement(se,{character:t,updateCharacterProperty:a}),u.a.createElement(ie,{character:t,updateCharacterProperty:a}),u.a.createElement("div",{className:te.a.row},u.a.createElement("span",null,"HP:"),u.a.createElement("input",{value:t.hp,type:"number",placeholder:"10",onChange:function(t){return e.update("hp",t.target.value)}}),"/",u.a.createElement("input",{value:t.maxHp,type:"number",placeholder:"20",onChange:function(t){return e.update("maxHp",t.target.value)}})),u.a.createElement("div",{className:te.a.row},u.a.createElement("span",null,"Hit dice:"),u.a.createElement("input",{value:t.hitDice,type:"number",placeholder:"10",onChange:function(t){return e.update("hitDice",t.target.value)}})),u.a.createElement("div",{className:te.a.row},u.a.createElement("span",null,"AC:"),u.a.createElement("input",{value:t.ac,type:"number",placeholder:"20",onChange:function(t){return e.update("ac",t.target.value)}})),u.a.createElement(ue,{character:t,updateCharacterProperty:a}),u.a.createElement(me,{character:t,updateCharacterProperty:a})),"Equipment",u.a.createElement("textarea",{rows:10,value:JSON.stringify(t.equipment),onChange:function(t){return e.update("equipment",JSON.parse(t.target.value))}}),"Spells",u.a.createElement("textarea",{rows:10,value:JSON.stringify(t.spells),onChange:function(t){return e.update("spells",JSON.parse(t.target.value))}}),"Spell slots",u.a.createElement("textarea",{rows:5,value:JSON.stringify(t.spellSlots),onChange:function(t){return e.update("spellSlots",JSON.parse(t.target.value))}}),"Attacks",u.a.createElement("textarea",{rows:10,value:JSON.stringify(t.attacks),onChange:function(t){return e.update("attacks",JSON.parse(t.target.value))}}),"Traits",u.a.createElement("textarea",{rows:5,value:JSON.stringify(t.traits),onChange:function(t){return e.update("traits",JSON.parse(t.target.value))}}),"Resources",u.a.createElement("textarea",{rows:5,value:JSON.stringify(t.resources),onChange:function(t){return e.update("resources",JSON.parse(t.target.value))}}),"Money",u.a.createElement("textarea",{rows:5,value:JSON.stringify(t.money),onChange:function(t){return e.update("money",JSON.parse(t.target.value))}})))}},{key:"update",value:function(e,t){this.setState(function(a){var r={newCharacter:Object(g.a)({},a.newCharacter)};return r.newCharacter[e]=t,r})}},{key:"saveSheet",value:function(){this.props.updatePlayerCharacter(this.props.character.id,this.state.newCharacter),this.props.abortEditPlayerCharacter(this.props.character.id)}},{key:"abortEditSheet",value:function(){this.props.abortEditPlayerCharacter(this.props.character.id)}}]),t}(u.a.Component),fe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={editing:!1},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.editing?u.a.createElement(de,this.props):u.a.createElement($,this.props);return u.a.createElement("div",{className:"character-sheet popout"}," ",e," ")}}]),t}(u.a.Component),ve={CHAT:{SYNC:"CHAT.SYNC",SYNC_FAILED:"CHAT.SYNC_FAILED",NEW:{SAVE:"CHAT.NEW.SAVE"}}},be=function(e){return{type:ve.CHAT.SYNC,messages:e}},Ee=function(e,t){return{type:ve.CHAT.NEW.SAVE,message:e,data:t}},ge=function(e){return{type:ve.CHAT.SYNC_FAILED,error:e}},ye={ASSETS:{PLAYERCHARACTER:{SYNC:"ASSETS.PLAYERCHARACTER.SYNC",SYNC_FAILED:"ASSETS.PLAYERCHARACTER.SYNC_FAILED",UPDATE:"ASSETS.PLAYERCHARACTER.UPDATE",NEW:{SAVE:"ASSETS.PLAYERCHARACTER.NEW.SAVE"}},NONPLAYERCHARACTER:{SYNC:"ASSETS.NONPLAYERCHARACTER.SYNC",SYNC_FAILED:"ASSETS.NONPLAYERCHARACTER.SYNC_FAILED",UPDATE:"ASSETS.NONPLAYERCHARACTER.UPDATE",NEW:{SAVE:"ASSETS.NONPLAYERCHARACTER.NEW.SAVE"}}}},Oe=function(e){return{type:ye.ASSETS.PLAYERCHARACTER.SYNC,playerCharacters:e}},je=function(e){return{type:ye.ASSETS.PLAYERCHARACTER.SYNC_FAILED,error:e}},Ce=function(e){return{type:ye.ASSETS.NONPLAYERCHARACTER.SYNC,nonPlayerCharacters:e}},Se=function(e){return{type:ye.ASSETS.NONPLAYERCHARACTER.SYNC_FAILED,error:e}},Ne=a(14),ke=a.n(Ne),Ae=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=C.getAbilityModifier(r,a);return u.a.createElement("div",{className:ke.a.ability,onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("div",{className:ke.a.abilityTitle},C.getShortAbilityName(a)),u.a.createElement("div",{className:ke.a.rollable},u.a.createElement("div",{className:ke.a.popupAdvantage,onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:ke.a.popupDisadvantage,onClick:function(t){return e.handleClick(t,-1)}},"D"),u.a.createElement("div",null,r[a]," (",n>=0?"+".concat(n):n,")")))}},{key:"handleClick",value:function(e,t){var a=C.getAbilityModifier(this.props.character,this.props.ability),r=(a<0?"":"+")+a,n=new b.DiceRoll("d20"+r),c=C.getLongAbilityName(this.props.ability),i={type:"roll",characterName:this.props.character.name,rollType:"Ability",rollName:c,modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var o=new b.DiceRoll("d20"+r);i.rollAdvantageType=t,i.roll2Total=o.total,i.roll2Details=o.toString().match(/.*?: (.*?) =/)[1],i.roll2CritSuccess=20===o.rolls[0][0],i.roll2CritFail=1===o.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",i)}}]),t}(u.a.Component),Te=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){this.props.character;return u.a.createElement("div",{className:ke.a.abilityContainer},u.a.createElement(Ae,Object.assign({ability:"strength"},this.props)),u.a.createElement(Ae,Object.assign({ability:"dexterity"},this.props)),u.a.createElement(Ae,Object.assign({ability:"constitution"},this.props)),u.a.createElement(Ae,Object.assign({ability:"intelligence"},this.props)),u.a.createElement(Ae,Object.assign({ability:"wisdom"},this.props)),u.a.createElement(Ae,Object.assign({ability:"charisma"},this.props)))}}]),t}(u.a.Component),Pe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.skill,r=(t.character,C.getLongSkillName(a.skill));return u.a.createElement("div",{className:ke.a.skill,onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("span",null,r),u.a.createElement("div",{className:ke.a.rollable},u.a.createElement("div",{className:ke.a.popupAdvantage,onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:ke.a.popupDisadvantage,onClick:function(t){return e.handleClick(t,-1)}},"D"),a.modifier>=0?"+".concat(a.modifier):a.modifier))}},{key:"handleClick",value:function(e,t){var a=this.props.skill.modifier,r=(a<0?"":"+")+a,n=new b.DiceRoll("d20"+r),c=C.getLongSkillName(this.props.skill.skill),i={type:"roll",characterName:this.props.character.name,rollType:"Skill",rollName:c,modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var o=new b.DiceRoll("d20"+r);i.rollAdvantageType=t,i.roll2Total=o.total,i.roll2Details=o.toString().match(/.*?: (.*?) =/)[1],i.roll2CritSuccess=20===o.rolls[0][0],i.roll2CritFail=1===o.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",i)}}]),t}(u.a.Component),we=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;if(!e.skills||!e.skills.length)return null;var t=[];for(var a in e.skills){var r=e.skills[a];t.push(u.a.createElement(Pe,Object.assign({key:a,skill:r},this.props)))}return u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:ke.a.boldHeading},"Skills"),t)}}]),t}(u.a.Component),_e=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;if(!e.traits||!e.traits.length)return null;var t=[];for(var a in e.traits){var r=e.traits[a];t.push(u.a.createElement("div",{className:ke.a.trait,key:a},u.a.createElement("span",{className:ke.a.italicHeading},r.title,"."),u.a.createElement("span",null,r.description)))}return u.a.createElement("div",null,t)}}]),t}(u.a.Component),xe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.character,r=t.actionProperty;if(!a[r]||!a[r].length)return null;var n=[],c=function(t){var c=a[r][t],i=c.effects.map(function(e,t){switch(e.type){case O.Text:var a=e;return u.a.createElement("span",{key:t},a.text);case O.ToHit:var r=e;return u.a.createElement("span",{key:t},r.modifier," to hit, range ",c.range," ft.");case O.Damage:var n=e;return u.a.createElement("span",{key:t},"Hit: ",n.diceCount,"d",n.diceSize,"+",n.bonus," ",n.damageType," damage.");default:return u.a.createElement("div",{key:t})}});n.push(u.a.createElement("div",{className:ke.a.action,onClick:function(){return e.doAction(c,0)},key:t},u.a.createElement("span",{className:ke.a.italicHeading},c.name,"."),u.a.createElement("span",null,i)))};for(var i in a[r])c(i);return u.a.createElement("div",null,n)}},{key:"doAction",value:function(e,t){D.doAction(this.props.character,e,t,this.props.sendMessage)}}]),t}(u.a.Component),Ie=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;if(!e.senses)return null;var t=[];for(var a in e.senses){var r=e.senses[a];r&&t.push(u.a.createElement("div",{key:a},C.getSenseName(a)," ",r.toString()," ft."))}return u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:ke.a.boldHeading},"Senses"),t)}}]),t}(u.a.Component),De=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"getFormat",value:function(e,t){return e.speed&&e.speed[t]?"".concat(e.speed[t]," ft. ").concat(C.getSpeedName(t)):""}},{key:"render",value:function(){var e=this.props.character,t=[this.getFormat(e,"walk"),this.getFormat(e,"fly"),this.getFormat(e,"climb"),this.getFormat(e,"swim"),this.getFormat(e,"burrow")].filter(function(e){return e}).join(", ");return u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:ke.a.boldHeading},"Speed"),u.a.createElement("span",null,t))}}]),t}(u.a.Component),Re=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.save,r=t.character.saves[a],n=C.getLongAbilityName(a);return u.a.createElement("div",{className:ke.a.save,onClick:function(t){return e.handleClick(t,0)}},u.a.createElement("span",null,n),u.a.createElement("div",{className:ke.a.rollable},u.a.createElement("div",{className:ke.a.popupAdvantage,onClick:function(t){return e.handleClick(t,1)}},"A"),u.a.createElement("div",{className:ke.a.popupDisadvantage,onClick:function(t){return e.handleClick(t,-1)}},"D"),r>=0?"+".concat(r):r))}},{key:"handleClick",value:function(e,t){var a=this.props.character.saves[this.props.save],r=(a<0?"":"+")+a,n=new b.DiceRoll("d20"+r),c=C.getSaveName(this.props.save),i={type:"roll",characterName:this.props.character.name,rollType:"Saving Throw",rollName:c,modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var o=new b.DiceRoll("d20"+r);i.rollAdvantageType=t,i.roll2Total=o.total,i.roll2Details=o.toString().match(/.*?: (.*?) =/)[1],i.roll2CritSuccess=20===o.rolls[0][0],i.roll2CritFail=1===o.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",i)}}]),t}(u.a.Component),Me=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.character;if(!e.saves)return null;var t=[];for(var a in e.saves)e.saves[a]&&t.push(u.a.createElement(Re,Object.assign({key:a,save:a},this.props)));return t.length?u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:ke.a.boldHeading},"Saving Throws"),t):null}}]),t}(u.a.Component),Le=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.character,a=e.editNonPlayerCharacter;return u.a.createElement("div",{className:"column ".concat(ke.a.characterSheet," ").concat(this.props.popout?"popout":"")},u.a.createElement("div",{className:ke.a.characterImageContainer},u.a.createElement(X,{imageUrl:this.props.image?this.props.image.downloadUrl:t.imageRef,character:t,updateCharacter:this.props.updateNonPlayerCharacter})),u.a.createElement("div",{className:ke.a.characterName+" row"},u.a.createElement("span",null,t.name),u.a.createElement("div",{onClick:function(){return a(t.id)},className:ke.a.button},u.a.createElement(ae.Icon,{path:ne.d,size:1,color:"#a6792d"}))),u.a.createElement("div",{className:ke.a.characterType},C.getSizeName(t.size)," ",t.class,", ",t.alignment),u.a.createElement("hr",{className:ke.a.divider}),u.a.createElement("div",null,u.a.createElement("span",{className:ke.a.boldHeading},"Armor Class"),u.a.createElement("span",null,t.ac," (",t.acType,")")),u.a.createElement("div",null,u.a.createElement("span",{className:ke.a.boldHeading},"Hit Points"),u.a.createElement("span",null,t.hpDice)),u.a.createElement(De,this.props),u.a.createElement("hr",{className:ke.a.divider}),u.a.createElement(Te,this.props),u.a.createElement("hr",{className:ke.a.divider}),u.a.createElement(Me,this.props),u.a.createElement(we,this.props),t.damageResistances&&u.a.createElement("div",null,u.a.createElement("span",{className:ke.a.boldHeading},"Damage Resistances"),u.a.createElement("span",null,t.damageResistances)),t.damageImmunities&&u.a.createElement("div",null,u.a.createElement("span",{className:ke.a.boldHeading},"Damage Immunities"),u.a.createElement("span",null,t.damageImmunities)),t.conditionImmunities&&u.a.createElement("div",null,u.a.createElement("span",{className:ke.a.boldHeading},"Condition Immunities"),u.a.createElement("span",null,t.conditionImmunities)),u.a.createElement(Ie,this.props),u.a.createElement("div",null,u.a.createElement("span",{className:ke.a.boldHeading},"Languages"),u.a.createElement("span",null,t.languages)),u.a.createElement("div",null,u.a.createElement("span",{className:ke.a.boldHeading},"Challenge"),u.a.createElement("span",null,t.cr)),u.a.createElement("hr",{className:ke.a.divider}),u.a.createElement(_e,this.props),t.actions&&t.actions.length&&u.a.createElement("div",null,u.a.createElement("div",{className:ke.a.subheading},"Actions"),u.a.createElement(xe,Object.assign({actionProperty:"actions"},this.props))),t.reactions&&t.reactions.length&&u.a.createElement("div",null,u.a.createElement("div",{className:ke.a.subheading},"Reactions"),u.a.createElement(xe,Object.assign({actionProperty:"reactions"},this.props))),t.legendaryActions&&t.legendaryActions.length&&u.a.createElement("div",null,u.a.createElement("div",{className:ke.a.subheading},"Legendary Actions"),u.a.createElement("div",{style:{marginBottom:"8px"}},"The ".concat(t.name," can take ").concat(t.legendaryActionCount||1," legendary actions, choosing from the options below. Only one legendary action option can be used at a time and only at the end of another creature's turn. The ").concat(t.name," regains spent legendary actions at the start of its turn.")),u.a.createElement(xe,Object.assign({actionProperty:"legendaryActions"},this.props))))}}]),t}(u.a.Component),He=a(9),Ue=a.n(He),Fe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.skill,a=[];for(var r in C.skillNameMap)a.push(u.a.createElement("option",{key:r,value:r},C.skillNameMap[r]));return u.a.createElement("div",{className:Ue.a.skill},u.a.createElement("div",{className:Ue.a.button,onClick:this.props.removeSkill,style:{background:"#333"}},u.a.createElement(re.a,{path:ne.c,size:1,color:"#ccc"})),u.a.createElement("select",{value:t.skill,onChange:function(t){return e.props.updateSkillProperty("skill",t.target.value)}},a),u.a.createElement("input",{type:"number",min:"-30",max:"+30",value:t.modifier,onChange:function(t){return e.props.updateSkillProperty("modifier",t.target.value)}}))}}]),t}(u.a.Component),Ge=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=[],r=function(r){var n=r,c=t.skills[n];a.push(u.a.createElement(Fe,{key:n,skill:c,updateSkillProperty:function(t,a){return e.updateSkillProperty(n,t,a)},removeSkill:function(){return e.removeSkill(n)}}))};for(var n in t.skills)r(n);return u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:Ue.a.boldHeading},"Skills"),u.a.createElement("div",{className:"".concat(Ue.a.column," ").concat(Ue.a.center)},a,u.a.createElement("div",{className:Ue.a.button,onClick:function(){return e.addSkill()}},u.a.createElement(re.a,{path:ne.e,size:1,color:"#ccc"}))))}},{key:"updateSkillProperty",value:function(e,t,a){var r=Object(oe.a)(this.props.character.skills);r[e][t]=a,this.props.updateCharacterProperty("skills",r)}},{key:"removeSkill",value:function(e){var t=Object(oe.a)(this.props.character.skills);t.splice(parseInt(e),1),this.props.updateCharacterProperty("skills",t)}},{key:"addSkill",value:function(){this.props.updateCharacterProperty("skills",[].concat(Object(oe.a)(this.props.character.skills||[]),[{skill:"acrobatics",modifier:0}]))}}]),t}(u.a.Component),Ye=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character;return u.a.createElement("div",{className:Ue.a.ability},u.a.createElement("div",{className:Ue.a.abilityTitle},C.getShortAbilityName(a)),u.a.createElement("input",{value:r[a],type:"number",min:0,max:30,placeholder:"10",onChange:function(t){return e.props.updateCharacterProperty(a,t.target.value)}}))}}]),t}(u.a.Component),We=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:Ue.a.abilityContainer},u.a.createElement(Ye,Object.assign({ability:"strength"},this.props)),u.a.createElement(Ye,Object.assign({ability:"dexterity"},this.props)),u.a.createElement(Ye,Object.assign({ability:"constitution"},this.props)),u.a.createElement(Ye,Object.assign({ability:"intelligence"},this.props)),u.a.createElement(Ye,Object.assign({ability:"wisdom"},this.props)),u.a.createElement(Ye,Object.assign({ability:"charisma"},this.props)))}}]),t}(u.a.Component),Be=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=(t.character.speed||{})[a]||0;return u.a.createElement("div",{className:Ue.a.speed},u.a.createElement("div",{className:Ue.a.speedTitle},a," (ft.)"),u.a.createElement("input",{value:r,type:"number",min:0,placeholder:"10",onChange:function(t){return e.props.updateSpeedProperty(a,t.target.value)}}))}}]),t}(u.a.Component),ze=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.update.bind(this),t=this.props.character;return u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:Ue.a.boldHeading},"Speed"),u.a.createElement("div",{className:"".concat(Ue.a.speedContainer," ").concat(Ue.a.row)},u.a.createElement(Be,{type:"walk",character:t,updateSpeedProperty:e}),u.a.createElement(Be,{type:"fly",character:t,updateSpeedProperty:e}),u.a.createElement(Be,{type:"climb",character:t,updateSpeedProperty:e}),u.a.createElement(Be,{type:"swim",character:t,updateSpeedProperty:e}),u.a.createElement(Be,{type:"burrow",character:t,updateSpeedProperty:e})))}},{key:"update",value:function(e,t){var a=Object(g.a)({},this.props.character.speed);a[e]=t,this.props.updateCharacterProperty("speed",a)}}]),t}(u.a.Component),qe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=(t.character.senses||{})[a]||0;return u.a.createElement("div",{className:Ue.a.sense},u.a.createElement("div",{className:Ue.a.senseTitle},a," (ft.)"),u.a.createElement("input",{value:r,type:"number",min:0,placeholder:"10",onChange:function(t){return e.props.updateSenseProperty(a,t.target.value)}}))}}]),t}(u.a.Component),Je=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.update.bind(this),a=this.props.character;return u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:Ue.a.boldHeading},"Senses"),u.a.createElement("div",{className:"".concat(Ue.a.speedContainer," ").concat(Ue.a.row)},u.a.createElement("div",null,u.a.createElement("label",null,"Blind"),u.a.createElement("input",{type:"checkbox",name:"blind",checked:a.senses&&a.senses.blind||!1,onChange:function(t){return e.update("blind",t.target.checked)}})),u.a.createElement(qe,{type:"darkvision",character:a,updateSenseProperty:t}),u.a.createElement(qe,{type:"blindsight",character:a,updateSenseProperty:t}),u.a.createElement(qe,{type:"truesight",character:a,updateSenseProperty:t}),u.a.createElement(qe,{type:"tremorsense",character:a,updateSenseProperty:t})))}},{key:"update",value:function(e,t){var a=Object(g.a)({},this.props.character.senses);a[e]=t,this.props.updateCharacterProperty("senses",a)}}]),t}(u.a.Component),Ve=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=(t.character.saves||{})[a]||0;return u.a.createElement("div",{className:Ue.a.save},u.a.createElement("div",{className:Ue.a.saveTitle},C.getShortAbilityName(a)),u.a.createElement("input",{value:r,type:"number",min:0,placeholder:"10",onChange:function(t){return e.props.updateSaveProperty(a,t.target.value)}}))}}]),t}(u.a.Component),Ke=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.update.bind(this),t=this.props.character;return u.a.createElement("div",{className:"row"},u.a.createElement("span",{className:Ue.a.boldHeading},"Saving Throws"),u.a.createElement("div",{className:"".concat(Ue.a.savesContainer," ").concat(Ue.a.row)},u.a.createElement(Ve,{type:"strength",character:t,updateSaveProperty:e}),u.a.createElement(Ve,{type:"dexterity",character:t,updateSaveProperty:e}),u.a.createElement(Ve,{type:"constitution",character:t,updateSaveProperty:e}),u.a.createElement(Ve,{type:"intelligence",character:t,updateSaveProperty:e}),u.a.createElement(Ve,{type:"wisdom",character:t,updateSaveProperty:e}),u.a.createElement(Ve,{type:"charisma",character:t,updateSaveProperty:e})))}},{key:"update",value:function(e,t){var a=Object(g.a)({},this.props.character.saves);a[e]=t,this.props.updateCharacterProperty("saves",a)}}]),t}(u.a.Component),Qe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.trait;return u.a.createElement("div",{className:Ue.a.trait},u.a.createElement("div",{className:Ue.a.button,onClick:this.props.removeTrait},u.a.createElement(re.a,{path:ne.c,size:1,color:"#ccc"})),u.a.createElement("input",{className:Ue.a.italicHeading,value:t.title,placeholder:"Title",onChange:function(t){return e.props.updateTraitProperty("title",t.target.value)}}),u.a.createElement("textarea",{value:t.description,placeholder:"Description",onChange:function(t){return e.props.updateTraitProperty("description",t.target.value)}}))}}]),t}(u.a.Component),Xe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=[],r=function(r){var n=r,c=t.traits[n];a.push(u.a.createElement(Qe,{key:n,trait:c,updateTraitProperty:function(t,a){return e.updateTraitProperty(n,t,a)},removeTrait:function(){return e.removeTrait(n)}}))};for(var n in t.traits)r(n);return u.a.createElement("div",{className:"column"},u.a.createElement("span",{className:Ue.a.subheading},"Traits"),u.a.createElement("div",{className:"".concat(Ue.a.column," ").concat(Ue.a.center)},a,u.a.createElement("div",{className:Ue.a.button,onClick:function(){return e.addTrait()}},u.a.createElement(re.a,{path:ne.e,size:1,color:"#ccc"}))))}},{key:"updateTraitProperty",value:function(e,t,a){var r=Object(oe.a)(this.props.character.traits);r[e][t]=a,this.props.updateCharacterProperty("traits",r)}},{key:"removeTrait",value:function(e){var t=Object(oe.a)(this.props.character.traits);t.splice(parseInt(e),1),this.props.updateCharacterProperty("traits",t)}},{key:"addTrait",value:function(){this.props.updateCharacterProperty("traits",[].concat(Object(oe.a)(this.props.character.traits||[]),[{title:"",description:""}]))}}]),t}(u.a.Component),Ze=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.effect;a||(a={type:O.Text,text:"No effect"});switch(a.type){case O.ToHit:var r=a;e=u.a.createElement($e,Object.assign({toHitEffect:r},this.props));break;case O.Damage:var n=a;e=u.a.createElement(et,Object.assign({damageEffect:n},this.props));break;case O.SavingThrow:var c=a;e=u.a.createElement(tt,Object.assign({saveEffect:c},this.props));break;case O.Text:var i=a;e=u.a.createElement(at,Object.assign({textEffect:i},this.props))}return u.a.createElement("div",{className:"".concat(Ue.a.effect," ").concat(Ue.a.row)},u.a.createElement("div",{className:Ue.a.button,onClick:this.props.removeEffect},u.a.createElement(re.a,{path:ne.c,size:1,color:"#ccc"})),u.a.createElement("select",{value:a.type,onChange:function(e){return t.props.updateEffectProperty("type",parseInt(e.target.value))}},u.a.createElement("option",{value:O.ToHit},"To Hit"),u.a.createElement("option",{value:O.Damage},"Damage"),u.a.createElement("option",{value:O.SavingThrow},"Saving Throw"),u.a.createElement("option",{value:O.Text},"Text")),e)}}]),t}(u.a.Component),$e=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toHitEffect,a=e.updateEffectProperty;return u.a.createElement("div",{className:Ue.a.effect},u.a.createElement("input",{value:t.modifier,onChange:function(e){return a("modifier",e.target.value)}}))}}]),t}(u.a.Component),et=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.damageEffect,a=e.updateEffectProperty;return u.a.createElement("div",{className:Ue.a.effect},u.a.createElement("input",{value:t.diceCount,type:"number",onChange:function(e){return a("diceCount",e.target.value)}}),u.a.createElement("select",{value:t.diceSize,onChange:function(e){return a("diceSize",parseInt(e.target.value))}},u.a.createElement("option",{value:4},"d4"),u.a.createElement("option",{value:6},"d6"),u.a.createElement("option",{value:8},"d8"),u.a.createElement("option",{value:10},"d10"),u.a.createElement("option",{value:12},"d12")),"+",u.a.createElement("input",{value:t.bonus,type:"number",onChange:function(e){return a("bonus",e.target.value)}}),u.a.createElement("input",{value:t.damageType,onChange:function(e){return a("damageType",e.target.value)}}))}}]),t}(u.a.Component),tt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.saveEffect,r=t.updateEffectProperty;return u.a.createElement("div",{className:Ue.a.effect},"DC",u.a.createElement("input",{value:a.saveDC,type:"number",onChange:function(e){return r("saveDC",e.target.value)}}),u.a.createElement("select",{value:a.saveType,onChange:function(e){return r("saveType",e.target.value)}},u.a.createElement("option",{value:"strength"},C.getSaveName("strength")),u.a.createElement("option",{value:"dexterity"},C.getSaveName("dexterity")),u.a.createElement("option",{value:"constitution"},C.getSaveName("constitution")),u.a.createElement("option",{value:"intelligence"},C.getSaveName("intelligence")),u.a.createElement("option",{value:"wisdom"},C.getSaveName("wisdom")),u.a.createElement("option",{value:"charisma"},C.getSaveName("charisma"))),"On save:",u.a.createElement(Ze,{effect:a.onSave,removeEffect:function(){},updateEffectProperty:function(t,a){return e.updateInnerEffectProperty("onSave",t,a)}}),"On fail:",u.a.createElement(Ze,{effect:a.onFail,removeEffect:function(){},updateEffectProperty:function(t,a){return e.updateInnerEffectProperty("onFail",t,a)}}))}},{key:"updateInnerEffectProperty",value:function(e,t,a){var r=Object(g.a)({},this.props.effect[e]);r[t]=a,this.props.updateEffectProperty(e,r)}}]),t}(u.a.Component),at=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.textEffect,a=e.updateEffectProperty;return u.a.createElement("div",{className:Ue.a.effect},u.a.createElement("textarea",{value:t.text,onChange:function(e){return a("text",e.target.value)}}))}}]),t}(u.a.Component),rt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.effects;return u.a.createElement("div",{className:"column"},u.a.createElement("div",{className:"".concat(Ue.a.column," ").concat(Ue.a.center)},(t||[]).map(function(t,a){return u.a.createElement(Ze,{key:a,effect:t,updateEffectProperty:function(t,r){return e.updateEffectProperty(a,t,r)},removeEffect:function(){return e.removeEffect(a)}})}),u.a.createElement("div",{className:Ue.a.button,onClick:function(){return e.addEffect()}},u.a.createElement(re.a,{path:ne.e,size:1,color:"#ccc"}))))}},{key:"updateEffectProperty",value:function(e,t,a){var r=Object(oe.a)(this.props.effects);r[e][t]=a,this.props.updateEffects(r)}},{key:"removeEffect",value:function(e){var t=Object(oe.a)(this.props.effects);t.splice(e,1),this.props.updateEffects(t)}},{key:"addEffect",value:function(){this.props.updateEffects([].concat(Object(oe.a)(this.props.effects||[]),[{type:3}]))}}]),t}(u.a.Component),nt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.action;return u.a.createElement("div",{className:Ue.a.action},u.a.createElement("div",{className:Ue.a.button,onClick:this.props.removeAction},u.a.createElement(re.a,{path:ne.c,size:1,color:"#ccc"})),u.a.createElement("input",{className:Ue.a.italicHeading,value:t.name,placeholder:"Name",onChange:function(t){return e.props.updateActionProperty("name",t.target.value)}}),u.a.createElement(rt,{effects:t.effects,updateEffects:function(t){return e.props.updateActionProperty("effects",Object(oe.a)(t))}}))}},{key:"removeEffect",value:function(e){var t=Object(oe.a)(this.props.action.effects);t.splice(parseInt(e),1),this.props.updateActionProperty("effects",t)}},{key:"addEffect",value:function(){this.props.updateActionProperty("effects",[].concat(Object(oe.a)(this.props.action.effects||[]),[{type:"3",text:""}]))}}]),t}(u.a.Component),ct=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.character,r=t.actionProperty,n=[],c=function(t){var c=t,i=a[r][c];n.push(u.a.createElement(nt,{key:c,action:i,updateActionProperty:function(t,a){return e.updateActionProperty(c,t,a)},removeAction:function(){return e.removeAction(c)}}))};for(var i in a[r]||[])c(i);return u.a.createElement("div",{className:"column"},u.a.createElement("div",{className:"".concat(Ue.a.column," ").concat(Ue.a.center)},n,u.a.createElement("div",{className:Ue.a.button,onClick:function(){return e.addAction()}},u.a.createElement(re.a,{path:ne.e,size:1,color:"#ccc"}))))}},{key:"updateActionProperty",value:function(e,t,a){var r=Object(oe.a)(this.props.character[this.props.actionProperty]);r[e][t]=a,this.props.updateCharacterProperty(this.props.actionProperty,r)}},{key:"removeAction",value:function(e){var t=Object(oe.a)(this.props.character[this.props.actionProperty]);t.splice(parseInt(e),1),this.props.updateCharacterProperty(this.props.actionProperty,t)}},{key:"addAction",value:function(){this.props.updateCharacterProperty(this.props.actionProperty,[].concat(Object(oe.a)(this.props.character[this.props.actionProperty]||[]),[{title:"",description:""}]))}}]),t}(u.a.Component),it=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={newCharacter:Object(g.a)({},a.props.character)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.newCharacter,a=this.update.bind(this);return u.a.createElement("div",{className:"column character-sheet ".concat(this.props.popout?"popout":"")},u.a.createElement("div",{className:"column ".concat(Ue.a.characterSheet," 'popout'}")},u.a.createElement("div",{className:Ue.a.characterImageContainer},u.a.createElement(X,{imageUrl:this.props.image?this.props.image.downloadUrl:t.imageRef,character:t,updateCharacter:this.props.updateNonPlayerCharacter})),u.a.createElement("div",{className:Ue.a.characterName+" row"},u.a.createElement("input",{value:t.name,placeholder:"Name",onChange:function(t){return e.update("name",t.target.value)}}),u.a.createElement("div",{onClick:function(){return e.abortEditSheet()},className:Ue.a.button},u.a.createElement(ae.Icon,{path:ne.a,size:1,color:"#a6792d"})),u.a.createElement("div",{onClick:function(){return e.saveSheet()},className:Ue.a.button},u.a.createElement(ae.Icon,{path:ne.b,size:1,color:"#a6792d"}))),u.a.createElement("div",{className:Ue.a.characterType},u.a.createElement("select",{value:t.size,placeholder:"Class",onChange:function(t){return e.update("size",t.target.value)}},u.a.createElement("option",{value:r.Tiny},"Tiny"),u.a.createElement("option",{value:r.Small},"Small"),u.a.createElement("option",{value:r.Medium},"Medium"),u.a.createElement("option",{value:r.Large},"Large"),u.a.createElement("option",{value:r.Huge},"Huge"),u.a.createElement("option",{value:r.Gargantuan},"Gargantuan")),u.a.createElement("input",{value:t.class,placeholder:"Class",onChange:function(t){return e.update("class",t.target.value)}}),u.a.createElement("input",{value:t.alignment,placeholder:"Alignment",onChange:function(t){return e.update("alignment",t.target.value)}})),u.a.createElement("hr",{className:Ue.a.divider}),u.a.createElement("div",null,u.a.createElement("span",{className:Ue.a.boldHeading},"Armor Class"),u.a.createElement("span",null,u.a.createElement("input",{value:t.ac,type:"number",min:"0",onChange:function(t){return e.update("ac",t.target.value||0)}}),u.a.createElement("input",{value:t.acType,placeholder:"natural armor",onChange:function(t){return e.update("acType",t.target.value)}}))),u.a.createElement("div",null,u.a.createElement("span",{className:Ue.a.boldHeading},"Hit Points"),u.a.createElement("span",null,u.a.createElement("input",{value:t.hpDice,placeholder:"8d10 + 40",onChange:function(t){return e.update("hpDice",t.target.value)}}))),u.a.createElement(ze,{updateCharacterProperty:a,character:t}),u.a.createElement("hr",{className:Ue.a.divider}),u.a.createElement(We,{updateCharacterProperty:a,character:t}),u.a.createElement("hr",{className:Ue.a.divider}),u.a.createElement(Ke,{updateCharacterProperty:a,character:t}),u.a.createElement(Ge,{updateCharacterProperty:a,character:t}),u.a.createElement("div",null,u.a.createElement("span",{className:Ue.a.boldHeading},"Damage Resistances"),u.a.createElement("input",{value:t.damageResistances,placeholder:"cold",onChange:function(t){return e.update("damageResistances",t.target.value)}})),u.a.createElement("div",null,u.a.createElement("span",{className:Ue.a.boldHeading},"Damage Immunities"),u.a.createElement("input",{value:t.damageImmunities,placeholder:"cold",onChange:function(t){return e.update("damageImmunities",t.target.value)}})),u.a.createElement("div",null,u.a.createElement("span",{className:Ue.a.boldHeading},"Condition Immunities"),u.a.createElement("input",{value:t.conditionImmunities,placeholder:"poisoned",onChange:function(t){return e.update("conditionImmunities",t.target.value)}})),u.a.createElement(Je,{updateCharacterProperty:a,character:t}),u.a.createElement("div",null,u.a.createElement("span",{className:Ue.a.boldHeading},"Languages"),u.a.createElement("input",{value:t.languages,placeholder:"Common",onChange:function(t){return e.update("languages",t.target.value)}})),u.a.createElement("div",null,u.a.createElement("span",{className:Ue.a.boldHeading},"Challenge"),u.a.createElement("input",{value:t.cr,placeholder:"1/2",onChange:function(t){return e.update("cr",t.target.value)}})),u.a.createElement("hr",{className:Ue.a.divider}),u.a.createElement(Xe,{updateCharacterProperty:a,character:t}),u.a.createElement("div",{className:Ue.a.subheading},"Actions"),u.a.createElement(ct,{updateCharacterProperty:a,character:t,actionProperty:"actions"}),u.a.createElement("div",{className:Ue.a.subheading},"Reactions"),u.a.createElement(ct,{updateCharacterProperty:a,character:t,actionProperty:"reactions"}),u.a.createElement("div",{className:Ue.a.subheading},"Legendary Actions"),u.a.createElement("label",null,"Number of legendary actions:"),u.a.createElement("input",{value:t.legendaryActionCount,type:"number",min:1,onChange:function(t){return e.update("legendaryActionCount",t.target.value)}}),u.a.createElement(ct,{updateCharacterProperty:a,character:t,actionProperty:"legendaryActions"})))}},{key:"update",value:function(e,t){this.setState(function(a){var r={newCharacter:Object(g.a)({},a.newCharacter)};return r.newCharacter[e]=t,r})}},{key:"saveSheet",value:function(){this.props.updateNonPlayerCharacter(this.props.character.id,this.state.newCharacter),this.props.abortEditNonPlayerCharacter(this.props.character.id)}},{key:"abortEditSheet",value:function(){this.props.abortEditNonPlayerCharacter(this.props.character.id)}}]),t}(u.a.Component),ot=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={editing:!1},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.editing?u.a.createElement(it,this.props):u.a.createElement(Le,this.props);return u.a.createElement("div",{className:"character-sheet popout"}," ",e," ")}}]),t}(u.a.Component),st={CHARACTERS:{EDIT_SHEET:"CHARACTERS.EDIT_SHEET",ABORT_EDIT_SHEET:"CHARACTERS.ABORT_EDIT_SHEET"}},lt=function(e){return{type:st.CHARACTERS.EDIT_SHEET,characterId:e}},ut=function(e){return{type:st.CHARACTERS.ABORT_EDIT_SHEET,characterId:e}},pt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.popout,r=t.images,n=t.playerCharacters,c=t.nonPlayerCharacters,i=t.editingCharacterSheets;if(a){var o=n.find(function(t){return t.id===e.props.popout});if(o){var s=r.find(function(e){return e.filePath===o.imageRef});return u.a.createElement(fe,Object.assign({key:a,character:o,popout:"popout",image:s,editing:i.some(function(e){return e===o.id})},this.props))}var l=c.find(function(t){return t.id===e.props.popout});if(l){var p=r.find(function(e){return e.filePath===l.imageRef});return u.a.createElement(ot,Object.assign({key:a,character:l,popout:"popout",image:p,editing:i.some(function(e){return e===l.id})},this.props))}}return u.a.createElement("div",null,[])}}]),t}(l.Component),mt=Object(f.c)(function(e){return{playerCharacters:e.assets.playerCharacters,nonPlayerCharacters:e.assets.nonPlayerCharacters,editingCharacterSheets:e.characters.editingCharacterSheets,images:e.images.images}},function(e){return{sendMessage:function(t,a){return e(Ee(t,a))},updatePlayerCharacter:function(t,a){return e(function(e,t){return{type:ye.ASSETS.PLAYERCHARACTER.UPDATE,characterId:e,character:t}}(t,a))},editPlayerCharacter:function(t){return e(lt(t))},abortEditPlayerCharacter:function(t){return e(ut(t))},updateNonPlayerCharacter:function(t,a){return e(function(e,t){return{type:ye.ASSETS.NONPLAYERCHARACTER.UPDATE,characterId:e,character:t}}(t,a))},editNonPlayerCharacter:function(t){return e(lt(t))},abortEditNonPlayerCharacter:function(t){return e(ut(t))}}})(pt),ht={STORAGE:{SEND_FILE:"STORAGE.SEND_FILE",SEND_FILE_SUCCESS:"STORAGE.SEND_FILE_SUCCESS",SEND_FILE_FAILURE:"STORAGE.SEND_FILE_FAILURE",SEND_FILE_PROGRESS:"STORAGE.SEND_FILE_PROGRESS"}},dt=function(e){return{type:ht.STORAGE.SEND_FILE_PROGRESS,progress:e}},ft=function(){return{type:ht.STORAGE.SEND_FILE_SUCCESS}},vt=function(e){return{type:ht.STORAGE.SEND_FILE_FAILURE,error:e}},bt=a(20),Et=a(63),gt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleHitAreaTypeChange=function(e){a.setState({hitAreaType:e.target.value})},a.state={uploadName:"",file:null,hitAreaType:"default"},a.onUpload=a.onUpload.bind(Object(v.a)(a)),a.onChangeFile=a.onChangeFile.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"onChangeFile",value:function(e){var t=e.target.files[0];this.setState({file:t})}},{key:"onUpload",value:function(e){this.state.file&&(this.state.uploadName&&0!==this.state.uploadName.length&&new RegExp(/^[a-z0-9_-]+$/,"i").test(this.state.uploadName)&&this.props.onUpload(this.state.uploadName,this.state.file))}},{key:"render",value:function(){var e=this,t=this.props.classes;return u.a.createElement("div",{className:t.wrapper},u.a.createElement(bt.i,{label:"Upload Name",onChange:function(t){return e.setState({uploadName:t.target.value})},disabled:this.props.inProgress,margin:"normal"}),u.a.createElement(bt.d,{onChange:this.onChangeFile,type:"file",margin:"dense"}),u.a.createElement(bt.a,{className:t.button,variant:"contained",onClick:this.onUpload,disabled:this.props.inProgress,color:"primary"},"Upload"),u.a.createElement(bt.b,{className:t.formControl},u.a.createElement(bt.e,{htmlFor:"hitAreaType"},"Hit Area Type"),u.a.createElement(bt.h,{value:this.state.hitAreaType,onChange:this.handleHitAreaTypeChange,inputProps:{name:"hitAreaType",id:"hitAreaType"}},u.a.createElement(bt.g,{value:"default"},"Default (Bounds)"),u.a.createElement(bt.g,{value:"circle"},"Circle"))),u.a.createElement(bt.f,{value:this.props.progress,variant:"determinate",color:"secondary"}))}}]),t}(l.Component),yt=Object(Et.withStyles)(function(e){return{wrapper:{display:"flex",flexDirection:"column",padding:"5px"},button:{marginTop:"10px",marginBottom:"10px"}}})(gt);!function(e){e.DEFAULT="default",e.CIRCLE="circle"}(Q||(Q={}));var Ot=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(yt,{onUpload:this.props.sendFile,progress:this.props.uploadProgress,inProgress:this.props.uploading})}}]),t}(l.Component),jt=Object(f.c)(function(e){return{uploadProgress:e.storage.uploadProgress,uploading:e.storage.uploading}},function(e){return{sendFile:function(t,a){return e(function(e,t,a){return{type:ht.STORAGE.SEND_FILE,name:e,file:t,hitAreaType:a}}(t,a,Q.DEFAULT))}}})(Ot),Ct=a(157),St=a.n(Ct),Nt=a(94),kt=a.n(Nt),At={LOGIN:{REQUEST:"LOGIN.REQUEST",SUCCESS:"LOGIN.SUCCESS",FAILURE:"LOGIN.FAILURE"},LOGOUT:{REQUEST:"LOGOUT.REQUEST",SUCCESS:"LOGOUT.SUCCESS",FAILURE:"LOGOUT.FAILURE"}},Tt=function(e,t){return{type:At.LOGIN.REQUEST,username:e,password:t}},Pt=function(e){return{type:At.LOGIN.SUCCESS,user:e}},wt=function(e){return{type:At.LOGIN.FAILURE,error:e}},_t=function(){return{type:At.LOGOUT.SUCCESS}},xt=function(e){return{type:At.LOGOUT.FAILURE,error:e}},It=a(365),Dt=a.n(It),Rt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={username:"",password:""},a.updateState=a.updateState.bind(Object(v.a)(a)),a.login=a.login.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"updateState",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"login",value:function(){0!==this.state.username.length&&0!==this.state.password.length&&this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedIn;t.logout;return a?u.a.createElement("div",null):u.a.createElement("div",{className:Dt.a.wrapper},u.a.createElement(kt.a,{label:"Username",onChange:function(t){return e.updateState("username",t.target.value)},value:this.state.username,margin:"normal"}),u.a.createElement(kt.a,{label:"Password",onChange:function(t){return e.updateState("password",t.target.value)},value:this.state.password,margin:"normal",onKeyUp:function(t){13===t.keyCode&&e.login()}}),u.a.createElement(St.a,{variant:"contained",color:"primary",onClick:function(){return e.login()}},"Login"))}}]),t}(l.PureComponent),Mt=Object(f.c)(function(e){return{loggedIn:e.auth.loggedIn}},function(e){return{login:function(t,a){return e(Tt(t,a))},logout:function(){return e({type:At.LOGOUT.REQUEST})}}})(Rt),Lt=a(77),Ht=a(17),Ut=a(366),Ft=a.n(Ut),Gt=a(78),Yt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).layerName=void 0,a.mapObjectId=void 0,a.onUpdateObject=void 0,a.innerApplyProps=function(e,t,a){a.position!==t.position&&(new Gt.list).add(new Gt.to(e,{x:a.position.x,y:a.position.y},300,{ease:"easeInOutCubic"}));a.pivot!==t.pivot&&e.pivot.set(a.pivot?a.pivot.x:.5,a.pivot?a.pivot.y:.5),a.scale!==t.scale&&e.scale.set(a.scale?a.scale.x:1,a.scale?a.scale.y:1)},a}return Object(s.a)(t,e),t}(Ht.Container),Wt=a(160),Bt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).dragGrabOffset=void 0,a.dragging=void 0,a.dragData=void 0,a.dragLocked=void 0,a.clickedAvailable=void 0,a.hoverFilters=[new Wt.a(4,16711680)],a.dragFilters=[],a.interactive=!0,a.buttonMode=!0,a.isSelected=!1,a.isSelectable=!0,a.onSelected=void 0,a.dragStartPosition=void 0,a.onDragStart=function(e){a.alpha=.7,a.dragging=!0,a.dragData=e.data,a.dragGrabOffset=e.data.getLocalPosition(e.currentTarget),a.clickedAvailable=!0,a.dragStartPosition=new Ht.Point(e.data.global.x,e.data.global.y);var t=a.getChildByName("sprite");t&&(t.filters=[].concat(Object(oe.a)(t.filters||[]),Object(oe.a)(a.dragFilters)))},a.onDragEnd=function(e){if(e.stopPropagation(),a.alpha=1,a.dragData&&a.dragging){var t=a.dragData.getLocalPosition(e.currentTarget.parent);a.dragGrabOffset&&(t.x-=a.dragGrabOffset.x,t.y-=a.dragGrabOffset.y),a.isSelectable&&a.clickedAvailable&&a.onSelected&&(a.isSelected||a.onSelected({mapObjectId:a.mapObjectId})),a.dragging=!1,a.dragData=null,a.dragGrabOffset=null,a.dragStartPosition=null,a.clickedAvailable=!1,a.filters&&(a.filters=a.filters.filter(function(e){return!(a.dragFilters.indexOf(e)>=0)})),a.onUpdateObject&&a.onUpdateObject({mapObjectId:a.mapObjectId,newData:{position:t}})}},a.onDragMove=function(e){if(a.dragging){var t=a.dragData.getLocalPosition(e.currentTarget.parent);a.x=t.x-(a.dragGrabOffset?a.dragGrabOffset.x:0),a.y=t.y-(a.dragGrabOffset?a.dragGrabOffset.y:0),a.clickedAvailable=!1}},a.onMouseOver=function(e){var t=a.getChildByName("sprite");t&&(t.filters=a.hoverFilters)},a.onMouseOut=function(e){var t=a.getChildByName("sprite");t&&(t.filters=null)},a}return Object(s.a)(t,e),t}(Yt);Bt.clickThreshold=.1;var zt=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).call(this))).hp=void 0,e.hpMax=void 0,e.alwaysShowText=!1,e._barGraphic=void 0,e._barText=void 0,e._barWidth=void 0,e._barHeight=void 0,e._showText=!1,e._lastTargetWidth=0,e.redraw=function(t){if(e.hpMax){var a=e.hp/e.hpMax;e._lastTargetWidth=t||e._lastTargetWidth;var r=Math.max(240,e._lastTargetWidth);e._barWidth=r,e._barHeight=100,e._barGraphic.clear(),e._barGraphic.beginFill(7738931),e._barGraphic.drawRect(0,0,r,100),e._barGraphic.endFill(),e._barGraphic.beginFill(16711680),e._barGraphic.drawRect(0,0,r*a,100),e._barGraphic.endFill(),e._barGraphic.hitArea=new Ht.Rectangle(0,0,r,100),e._barText.position.set(r/2,50),e._barText.text="".concat(e.hp,"/").concat(e.hpMax),e._barText.style.fill="white",e._barText.visible=e._showText}else e._barText.text=""},e.onAdded=function(){e.on("mouseover",e.onMouseOver,Object(v.a)(e)),e.on("mouseout",e.onMouseOut,Object(v.a)(e))},e.onRemoved=function(){e.off("mouseover"),e.off("mouseout")},e.onMouseOver=function(t){e._showText=!0,e.redraw()},e.onMouseOut=function(t){e._showText=!1,e.redraw()},e._barGraphic=new Ht.Graphics,e._barText=new Ht.Text(e.hpMax?"".concat(e.hp,"/").concat(e.hpMax):"",new Ht.TextStyle({fontSize:90,fontWeight:"bold"})),e._barText.anchor.set(.5,.5),e.interactive=!0,e.addChild(e._barGraphic),e.addChild(e._barText),e.on("added",e.onAdded),e.on("removed",e.onRemoved),e}return Object(s.a)(t,e),Object(c.a)(t,[{key:"barWidth",get:function(){return this._barWidth}},{key:"barHeight",get:function(){return this._barHeight}}]),t}(Ht.Container),qt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(Bt),Jt=Object(Lt.PixiComponent)("Token",{create:function(e){var t=new qt;t.isSelectable=e.isSelectable||!0,t.onSelected=e.onSelected,t.onUpdateObject=e.onUpdateObject,t.layerName=e.layerName,t.mapObjectId=e.mapObjectId,t.dragLocked=!1;var a=new Ht.Sprite(e.resource);e.isCircleHitarea?a.hitArea=new Ht.Circle(0,0,a.width/2):e.customHitArea&&(a.hitArea=e.customHitArea),a.name="sprite";var r=new zt;return r.name="healthbar",t.addChild(a),t.addChild(r),t},applyProps:function(e,t,a){var r=e.getChildByName("healthbar"),n=e.getChildByName("sprite");(e.innerApplyProps(e,t,a),a.resource!==t.resource&&n&&(n.texture=a.resource),a.anchor!==t.anchor&&n&&n.anchor.set(a.anchor?a.anchor.x:.5,a.anchor?a.anchor.y:.5),a.rotation!==t.rotation)&&(new Gt.list).add(new Gt.to(n,{rotation:a.rotation||0},300,{ease:"easeInOutCubic"}));if(a.hp!==t.hp){r.hp=a.hp.value,r.hpMax=a.hp.max,r.redraw(n.width);r.position.set(-r.barWidth/2,-n.height/2-r.barHeight-10)}a.isSelected!==t.isSelected&&n&&(n.tint=a.isSelected&&!t.isSelected?255:16777215)},didMount:function(e,t){e.on("mousedown",e.onDragStart),e.on("mouseup",e.onDragEnd),e.on("mouseupoutside",e.onDragEnd),e.on("mousemove",e.onDragMove),e.on("mouseover",e.onMouseOver),e.on("mouseout",e.onMouseOut),e.on("click",function(e){})},willUnmount:function(e,t){e.off("mousedown"),e.off("mouseup"),e.off("mouseupoutside"),e.off("mousemove"),e.off("mouseover"),e.off("mouseout"),e.off("click")}}),Vt=Object(Lt.PixiComponent)("Scenery",{create:function(e){var t=new Ht.Sprite(e.resource);t.name="sprite";var a=new Bt;return a.addChild(t),a.hoverFilters=[new Wt.a(4,65280)],a.isSelectable=e.isSelectable||!0,a.onSelected=e.onSelected,a.onUpdateObject=e.onUpdateObject,a.layerName=e.layerName,a.mapObjectId=e.mapObjectId,a},applyProps:function(e,t,a){var r=e.getChildByName("sprite");(e.innerApplyProps(e,t,a),a.resource!==t.resource&&r&&(r.texture=a.resource),a.anchor!==t.anchor&&r&&r.anchor.set(a.anchor?a.anchor.x:.5,a.anchor?a.anchor.y:.5),a.rotation!==t.rotation)&&(new Gt.list).add(new Gt.to(r,{rotation:a.rotation||0},300,{ease:"easeInOutCubic"}));a.isSelected!==t.isSelected&&r&&(r.tint=a.isSelected&&!t.isSelected?255:16777215)},didMount:function(e,t){e.on("mousedown",e.onDragStart),e.on("mouseup",e.onDragEnd),e.on("mouseupoutside",e.onDragEnd),e.on("mousemove",e.onDragMove),e.on("mouseover",e.onMouseOver),e.on("mouseout",e.onMouseOut)},willUnmount:function(e,t){e.off("mousedown"),e.off("mouseup"),e.off("mouseupoutside"),e.off("mousemove"),e.off("mouseover"),e.off("mouseout")}}),Kt=Object(Lt.PixiComponent)("Viewport",{create:function(e){var t=new Ft.a({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:1e3,worldHeight:1e3,divWheel:e.app?e.app.renderer.plugins.interaction.interactionDOMElement:null,interaction:e.app?e.app.renderer.plugins.interaction:null});return t.name=e.name||"viewport",t.drag({mouseButtons:"right"}).pinch().wheel({smooth:5}).decelerate(),t},applyProps:function(e,t,a){t.app,a.app}}),Qt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={loadingAssets:!0,loadProgress:0,app:null},a.app=void 0,a.root=void 0,a._viewport=void 0,a._stage=void 0,a._mainWrapper=void 0,a.loader=Ht.loader,a.onMapMount=function(e){a.setState({app:e}),e.stage.hitArea=new Ht.Rectangle(0,0,e.renderer.width/e.renderer.resolution,e.renderer.height/e.renderer.resolution),e.stage.interactive=!0,e.stage.on("mousedown",function(e){e.target.name===a._viewport.name&&a.props.onSelectObject&&a.props.onSelectObject({mapObjectId:null})})},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(t.loadingAssets&&!this.state.loadingAssets&&this._viewport&&this._viewport.fitWorld(),this.props.mapData&&!e.mapData||this.props.mapData&&this.props.mapData.objects!==e.mapData.objects){this.loader.resources.__missing__||this.loader.add("__missing__","http://placekitten.com/128/128");var r=Object.keys(this.props.mapData.objects).map(function(e){var t=a.props.mapData.objects[e],r=t.pcId?a.props.playerCharacters.find(function(e){return e.id===t.pcId}):null,n=t.npcId?a.props.nonPlayerCharacters.find(function(e){return e.id===t.npcId}):null,c=t&&t.imageRef?t.imageRef:r?r.imageRef:n?n.imageRef:"__missing__";if(!!a.loader.resources[c])return null;var i=a.props.images.find(function(e){return e.filePath===c});return{name:c,url:i?i.downloadUrl:c,loadType:2}}).filter(function(e){return e}),n=Array.from(new Set(r.map(function(e){return e.name}))).map(function(e){return Object(g.a)({},r.find(function(t){return t.name===e}))});this.loader.add(n),this.loader.load(function(){a.setState({loadingAssets:!1})}),this.loader.onProgress.add(function(e){return a.setState({loadProgress:e.progress})})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.playerCharacters,c=t.nonPlayerCharacters,i=t.selectedObjects;if(this.state.loadingAssets)return u.a.createElement("div",{className:a.loadingWrapper},u.a.createElement("div",{className:a.loadingText},"LOADING..."),u.a.createElement(bt.f,{variant:"determinate",value:this.state.loadProgress}));if(!this.props.mapData)return u.a.createElement("div",null,"No Map");this.props.mapData.objects;var o=this.props.mapData.layers,s=(o.background,o.tokens,this.props),l=s.connectDropTarget,p=null;s.isHovering&&(p=u.a.createElement("div",{className:a.dragAddObjectWrapper},u.a.createElement("div",{className:a.dragAddObjectText},"+")));var m,h=(m=this.props.mapData)&&m.objects?Object.keys(m.objects).reduce(function(e,t){var a=m.objects[t].layer;return e[a]||(e[a]=[]),e[a].push(Object(g.a)({},m.objects[t],{id:t})),e},{}):{},d=function(e,t){return h[e].zIndex<h[t].zIndex?-1:h[e].zIndex>h[t].zIndex?1:0};return l(u.a.createElement("div",{ref:function(t){return e._mainWrapper=t}},p,u.a.createElement(Lt.Stage,{ref:function(t){return e._stage=t},onMount:this.onMapMount,width:window.innerWidth,height:window.innerHeight,options:{antialias:!0,backgroundColor:16777215}},u.a.createElement(Lt.AppConsumer,null,function(t){return u.a.createElement(Kt,{name:"viewport",ref:function(t){return e._viewport=t},app:t},Object.keys(h).sort(d).reverse().map(function(t){var a=h[t];return u.a.createElement(Lt.Container,{key:t,name:"layer-".concat(t)},a.map(function(t){var a=!!t.pcId,o=!!t.npcId,s=t.pcId?n.find(function(e){return e.id===t.pcId}):null,l=t.npcId?c.find(function(e){return e.id===t.npcId}):null,p=s&&s.imageRef?s.imageRef:l&&l.imageRef?l.imageRef:t.imageRef||"__missing__",m=Ht.loader.resources[p]&&Ht.loader.resources[p].texture,h=!!i.find(function(e){return e===t.id}),d=a||o,f=s||l,v=t.scale;if(f){var b=(f.size||"").toString();switch(parseInt(b)){case r.Tiny:v={x:.25,y:.25};break;case r.Small:case r.Medium:v={x:.5,y:.5};break;case r.Large:v={x:1,y:1};break;case r.Huge:v={x:1.5,y:1.5};break;case r.Gargantuan:v={x:2,y:2}}}return d?u.a.createElement(Jt,{key:t.id,resource:m,hp:s?{value:s.hp,max:s.maxHp}:void 0,position:t.position,scale:v,rotation:t.rotation,pivot:t.pivot,anchor:t.anchor,onUpdateObject:e.props.onUpdateObject,isSelected:h,isSelectable:!0,onSelected:e.props.onSelectObject,mapObjectId:t.id,layerName:"tokens"}):u.a.createElement(Vt,{key:t.id,position:t.position,scale:t.scale,rotation:t.rotation,pivot:t.pivot,anchor:t.anchor,resource:m,onUpdateObject:e.props.onUpdateObject,isSelected:h,isSelectable:!0,onSelected:e.props.onSelectObject,mapObjectId:t.id,layerName:"background"})}))}))}))))}}]),t}(l.Component),Xt={canDrop:function(e,t){return!0},hover:function(e,t,a){},drop:function(e,t,a){var r=t.getItem();switch(t.getItemType()){case B:e.onAddAssetToMap&&e.onAddAssetToMap({assetType:r.assetType,assetId:r.id});break;case z:e.onAddImageToMap&&e.onAddImageToMap({imageRef:r.imageRef})}}};var Zt=Object(W.DropTarget)([B,z],Xt,function(e,t){return{connectDropTarget:e.dropTarget(),itemType:t.getItemType(),isHovering:t.isOver()}})(Object(Et.withStyles)(function(e){return{loadingWrapper:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, 0)"},loadingText:{fontSize:"200%"},dragAddObjectWrapper:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)"},dragAddObjectText:{position:"absolute",top:"50%",left:"50%",color:"white",transform:"translate(-50%, -50%)",fontSize:120}}})(Qt)),$t={TESTMAP:{SYNC:"TESTMAP.SYNC",SYNC_FAILED:"TESTMAP.SYNC_FAILED",UPDATE:{OBJECT:"TESTMAP.UPDATE.OBJECT"},REMOVE:{OBJECT:"TESTMAP.REMOVE.OBJECT"},ASSET:{ADD:"TESTMAP.ASSET.ADD"},IMAGE:{ADD:"TESTMAP.IMAGE.ADD"},SELECT:{OBJECT:"TESTMAP.SELECT.OBJECT"}}},ea=function(e){return{type:$t.TESTMAP.SYNC,map:e}},ta=function(e){return{type:$t.TESTMAP.SYNC_FAILED,error:e}},aa=function(e){var t=e.mapObjectId,a=e.newData;return{type:$t.TESTMAP.UPDATE.OBJECT,mapObjectId:t,newData:a}},ra=function(e){var t=e.mapObjectId;return{type:$t.TESTMAP.SELECT.OBJECT,mapObjectId:t}},na=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.zoom,a=e.testMap,r=e.selectedObjects,n=e.onUpdateObject,c=e.onSelectObject,i=e.onAddAssetToMap,o=e.onAddImageToMap,s=e.playerCharacters,l=e.nonPlayerCharacters,p=e.images;return u.a.createElement(Zt,{updateSpriteLocation:function(){},zoom:t,mapData:a,selectedObjects:r,playerCharacters:s,nonPlayerCharacters:l,onUpdateObject:n,onAddAssetToMap:i,onAddImageToMap:o,onSelectObject:c,images:p})}}]),t}(l.Component),ca=Object(f.c)(function(e){return{zoom:e.map.zoom,testMap:e.testMap.map,selectedObjects:e.testMap.selectedObjects,images:e.images.images,playerCharacters:e.assets.playerCharacters,nonPlayerCharacters:e.assets.nonPlayerCharacters}},function(e){return{onUpdateObject:function(t){return e(aa(t))},onAddAssetToMap:function(t){return e(function(e){var t=e.assetType,a=e.assetId;return{type:$t.TESTMAP.ASSET.ADD,assetType:t,assetId:a}}(t))},onAddImageToMap:function(t){return e(function(e){var t=e.imageRef;return{type:$t.TESTMAP.IMAGE.ADD,imageRef:t}}(t))},onSelectObject:function(t){return e(ra(t))}}})(na),ia=a(65),oa=a(83),sa=a(58),la=a(375),ua={messages:[],new:{},syncError:null};function pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ve.CHAT.SYNC:return Object(g.a)({},e,{messages:t.messages});case ve.CHAT.SYNC_FAILED:return Object(g.a)({},e,{syncError:t.error});default:return e}}var ma={editingCharacterSheets:[]};function ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case st.CHARACTERS.EDIT_SHEET:return Object(g.a)({},e,{editingCharacterSheets:[].concat(Object(oe.a)(e.editingCharacterSheets.filter(function(e){return e!==t.characterId})),[t.characterId])});case st.CHARACTERS.ABORT_EDIT_SHEET:return Object(g.a)({},e,{editingCharacterSheets:Object(oe.a)(e.editingCharacterSheets.filter(function(e){return e!==t.characterId}))});default:return e}}var da={loading:!1,loggedIn:!1,user:null,loginError:null};function fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case At.LOGIN.REQUEST:case At.LOGOUT.REQUEST:return Object(g.a)({},e,{loading:!0});case At.LOGIN.SUCCESS:return Object(g.a)({},e,{loading:!1,loggedIn:!0,user:t.user,loginError:null});case At.LOGIN.FAILURE:return Object(g.a)({},e,{loading:!1,loginError:t.error});case At.LOGOUT.SUCCESS:return da;case At.LOGOUT.FAILURE:return Object(g.a)({},e,{loading:!1});default:return e}}var va={uploading:!1,url:null,uploadProgress:0,uploadError:null};function ba(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ht.STORAGE.SEND_FILE:return Object(g.a)({},e,{uploading:!0});case ht.STORAGE.SEND_FILE_SUCCESS:return Object(g.a)({},e,{uploading:!1});case ht.STORAGE.SEND_FILE_FAILURE:return Object(g.a)({},e,{uploading:!1,uploadError:t.error});case ht.STORAGE.SEND_FILE_PROGRESS:return Object(g.a)({},e,{uploadProgress:t.progress});default:return e}}var Ea={IMAGES:{SYNC:"IMAGES.SYNC",SYNC_FAILED:"IMAGES.SYNC_FAILED"}},ga=function(e){return{type:Ea.IMAGES.SYNC,images:e}},ya=function(e){return{type:Ea.IMAGES.SYNC_FAILED,error:e}},Oa={images:[],syncError:null};function ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Ea.IMAGES.SYNC:return Object(g.a)({},e,{images:t.images});case Ea.IMAGES.SYNC_FAILED:return Object(g.a)({},e,{syncError:t.error});default:return e}}var Ca={playerCharacters:[],nonPlayerCharacters:[],pcSyncError:null,npcSyncError:null};function Sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ca,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ye.ASSETS.PLAYERCHARACTER.SYNC:return Object(g.a)({},e,{playerCharacters:t.playerCharacters});case ye.ASSETS.PLAYERCHARACTER.UPDATE:return Object(g.a)({},e,{playerCharacters:e.playerCharacters.map(function(e){return e.id!==t.characterId?e:t.character})});case ye.ASSETS.NONPLAYERCHARACTER.SYNC:return Object(g.a)({},e,{nonPlayerCharacters:t.nonPlayerCharacters});case ye.ASSETS.PLAYERCHARACTER.SYNC_FAILED:return Object(g.a)({},e,{pcSyncError:t.error});case ye.ASSETS.NONPLAYERCHARACTER.SYNC_FAILED:return Object(g.a)({},e,{npcSyncError:t.error});default:return e}}var Na={MAP:{ZOOM:{IN:"MAP.ZOOM.IN",OUT:"MAP.ZOOM.OUT"}}},ka={zoom:1};function Aa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case Na.MAP.ZOOM.IN:return Object(g.a)({},e,{zoom:e.zoom*=1.2});case Na.MAP.ZOOM.OUT:return Object(g.a)({},e,{zoom:e.zoom*=.8});default:return e}}var Ta={map:null,syncError:null,selectedObjects:[]};function Pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ta,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case $t.TESTMAP.SYNC:return Object(g.a)({},e,{map:t.map});case $t.TESTMAP.SYNC_FAILED:return Object(g.a)({},e,{syncError:t.error});case $t.TESTMAP.SELECT.OBJECT:var a=t;return Object(g.a)({},e,{selectedObjects:a.mapObjectId?[a.mapObjectId]:[]});default:return e}}var wa={UI:{PROPERTY_PANEL:{VISIBILITY:"UI.PROPERTY_PANEL.VISIBILITY"},SIDEBAR:{OPEN:"UI.SIDEBAR.OPEN",CLOSE:"UI.SIDEBAR.CLOSE",TOGGLE:"UI.SIDEBAR.TOGGLE",OPEN_PANEL:"UI.SIDEBAR.OPEN_PANEL"}}},_a={propertyPanel:{visible:!1},sidebarOpen:!1,sidebarPanel:null};function xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case wa.UI.PROPERTY_PANEL.VISIBILITY:var a=t;return Object(g.a)({},e,{propertyPanel:Object(g.a)({},e.propertyPanel,{visible:a.visible})});case wa.UI.SIDEBAR.OPEN:return Object(g.a)({},e,{sidebarOpen:!0});case wa.UI.SIDEBAR.CLOSE:return Object(g.a)({},e,{sidebarOpen:!1});case wa.UI.SIDEBAR.TOGGLE:return Object(g.a)({},e,{sidebarOpen:!e.sidebarOpen});case wa.UI.SIDEBAR.OPEN_PANEL:var r=t;return Object(g.a)({},e,{sidebarPanel:r.panel});default:return e}}var Ia=a(13),Da=a.n(Ia),Ra=a(11),Ma=a(40),La=a.n(Ma),Ha=(a(179),a(368)),Ua=a.n(Ha),Fa=JSON.parse(localStorage.getItem("firebaseConfig")),Ga=La.a.initializeApp(Fa),Ya=(Ga.database(),new Ua.a(Ga)),Wa=Da.a.mark(qa),Ba=Da.a.mark(Va),za=Da.a.mark(Ka);function qa(e){var t,a,r;return Da.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ra.select)(function(e){return e.auth.user});case 2:return t=n.sent,a=e.message||"",r=e.data||{},n.next=7,Object(Ra.call)(Ya.database.create,"/chatroom",{sender:t.email,timestamp:Ma.database.ServerValue.TIMESTAMP,msg:a,data:r});case 7:case"end":return n.stop()}},Wa)}var Ja=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(g.a)({},t[e],{id:e})})};function Va(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.fork)(Ya.database.sync,Object(Ma.database)(Ya.app).ref("/chatroom").orderByChild("timestamp").limitToLast(100),{successActionCreator:be,failureActionCreator:ge,transform:Ja},"value");case 2:case"end":return e.stop()}},Ba)}function Ka(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.all)([Object(Ra.fork)(Va),Object(Ra.takeEvery)(ve.CHAT.NEW.SAVE,qa)]);case 2:case"end":return e.stop()}},za)}var Qa=Da.a.mark(er),Xa=Da.a.mark(tr),Za=Da.a.mark(ar),$a=Da.a.mark(rr);new La.a.auth.EmailAuthProvider;function er(e){return Da.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ra.call)(Ya.auth.signInWithEmailAndPassword,e.username,e.password);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object(Ra.put)(wt(t.t0));case 9:case"end":return t.stop()}},Qa,null,[[0,5]])}function tr(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ra.call)(Ya.auth.signOut);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(Ra.put)(xt(e.t0));case 9:case"end":return e.stop()}},Xa,null,[[0,5]])}function ar(){var e,t,a;return Da.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ra.call)(Ya.auth.channel);case 2:e=r.sent;case 3:return r.next=6,Object(Ra.take)(e);case 6:if(t=r.sent,!(a=t.user)){r.next=13;break}return r.next=11,Object(Ra.put)(Pt(a));case 11:r.next=15;break;case 13:return r.next=15,Object(Ra.put)(_t());case 15:r.next=3;break;case 17:case"end":return r.stop()}},Za)}function rr(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.fork)(ar);case 2:return e.next=4,Object(Ra.all)([Object(Ra.takeEvery)(At.LOGIN.REQUEST,er),Object(Ra.takeEvery)(At.LOGOUT.REQUEST,tr)]);case 4:case"end":return e.stop()}},$a)}var nr=a(369),cr=a.n(nr),ir=Da.a.mark(ur),or=Da.a.mark(pr),sr=Da.a.mark(mr),lr=Object(oa.channel)();function ur(e){var t,a,r,n;return Da.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t="uploads/".concat(e.name,"/").concat(cr()()),(a=Ya.storage.uploadFile(t,e.file)).on("state_changed",function(e){var t=100*e.bytesTransferred/e.totalBytes;console.log("".concat(t,"%")),lr.put(dt(t))}),c.next=5,a;case 5:return c.prev=5,c.next=8,Object(Ra.call)(Ya.storage.getDownloadURL,t);case 8:return r=c.sent,n={downloadUrl:r,name:e.name,filePath:t,uploadTime:Ma.database.ServerValue.TIMESTAMP},c.next=12,Object(Ra.call)(Ya.database.create,"/uploads",n);case 12:return c.next=14,Object(Ra.put)(ft());case 14:c.next=21;break;case 16:return c.prev=16,c.t0=c.catch(5),console.error(c.t0),c.next=21,Object(Ra.put)(vt(c.t0));case 21:case"end":return c.stop()}},ir,null,[[5,16]])}function pr(){var e;return Da.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Ra.take)(lr);case 3:return e=t.sent,t.next=6,Object(Ra.put)(e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},or)}function mr(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.fork)(pr);case 2:return e.next=4,Object(Ra.all)([Object(Ra.takeEvery)(ht.STORAGE.SEND_FILE,ur)]);case 4:case"end":return e.stop()}},sr)}var hr=Da.a.mark(vr),dr=Da.a.mark(br),fr=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(g.a)({},t[e],{id:e})})};function vr(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.fork)(Ya.database.sync,Object(Ma.database)(Ya.app).ref("/uploads").orderByChild("timestamp"),{successActionCreator:ga,failureActionCreator:ya,transform:fr},"value");case 2:case"end":return e.stop()}},hr)}function br(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.all)([Object(Ra.fork)(vr)]);case 2:case"end":return e.stop()}},dr)}var Er,gr=Da.a.mark(Tr),yr=Da.a.mark(Pr),Or=Da.a.mark(wr),jr=Da.a.mark(_r),Cr=Da.a.mark(xr),Sr=Da.a.mark(Ir),Nr=Da.a.mark(Dr),kr=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(g.a)({},t[e],{id:e})})},Ar=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(g.a)({},t[e],{id:e})})};function Tr(e){var t,a;return Da.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ra.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(g.a)({},e.nonPlayerCharacterData,{timestamp:Ma.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(Ra.call)(Ya.database.create,"/nonPlayerCharacters",a);case 6:case"end":return r.stop()}},gr)}function Pr(e){var t,a;return Da.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ra.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(g.a)({},e.character,{timestamp:Ma.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(Ra.call)(Ya.database.patch,"/playerCharacters/"+e.characterId,a);case 6:case"end":return r.stop()}},yr)}function wr(e){var t,a;return Da.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ra.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(g.a)({},e.playerCharacterData,{timestamp:Ma.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(Ra.call)(Ya.database.create,"/playerCharacters",a);case 6:case"end":return r.stop()}},Or)}function _r(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.fork)(Ya.database.sync,Object(Ma.database)(Ya.app).ref("/playerCharacters"),{successActionCreator:Oe,failureActionCreator:je,transform:kr},"value");case 2:case"end":return e.stop()}},jr)}function xr(e){var t,a;return Da.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ra.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(g.a)({},e.character,{timestamp:Ma.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(Ra.call)(Ya.database.update,"/nonPlayerCharacters/"+e.characterId,a);case 6:case"end":return r.stop()}},Cr)}function Ir(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.fork)(Ya.database.sync,Object(Ma.database)(Ya.app).ref("/nonPlayerCharacters"),{successActionCreator:Ce,failureActionCreator:Se,transform:Ar},"value");case 2:case"end":return e.stop()}},Sr)}function Dr(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.all)([Object(Ra.fork)(_r),Object(Ra.fork)(Ir),Object(Ra.takeEvery)(ye.ASSETS.PLAYERCHARACTER.UPDATE,Pr),Object(Ra.takeEvery)(ye.ASSETS.PLAYERCHARACTER.NEW.SAVE,wr),Object(Ra.takeEvery)(ye.ASSETS.NONPLAYERCHARACTER.UPDATE,xr),Object(Ra.takeEvery)(ye.ASSETS.NONPLAYERCHARACTER.NEW.SAVE,Tr)]);case 2:case"end":return e.stop()}},Nr)}!function(e){e[e.PlayerCharacter=0]="PlayerCharacter",e[e.NonPlayerCharacter=1]="NonPlayerCharacter"}(Er||(Er={}));var Rr=Da.a.mark(Yr),Mr=Da.a.mark(Wr),Lr=Da.a.mark(Br),Hr=Da.a.mark(zr),Ur=Da.a.mark(qr),Fr=Da.a.mark(Jr),Gr=function(e){return e.value};function Yr(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.fork)(Ya.database.sync,Object(Ma.database)(Ya.app).ref("/testMap"),{successActionCreator:ea,failureActionCreator:ta,transform:Gr},"value");case 2:case"end":return e.stop()}},Rr)}function Wr(e){var t,a;return Da.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.mapObjectId,a=e.newData,r.next=3,Object(Ra.call)(Ya.database.patch,"/testMap/objects/".concat(t),a);case 3:case"end":return r.stop()}},Mr)}function Br(e){var t;return Da.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.mapObjectId,a.next=3,Object(Ra.call)(Ya.database.delete,"/testMap/objects/".concat(t));case 3:case"end":return a.stop()}},Lr)}function zr(e){var t,a,r;return Da.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.assetType,a=e.assetId,r={anchor:{x:.5,y:.5},pivot:{x:.5,y:.5},name:"New Asset",position:{x:0,y:0},rotation:0,scale:{x:1,y:1},layer:"token"},t===Er.PlayerCharacter?r.pcId=a:t===Er.NonPlayerCharacter&&(r.npcId=a),n.next=5,Object(Ra.call)(Ya.database.create,"/testMap/objects",r);case 5:case"end":return n.stop()}},Hr)}function qr(e){var t,a;return Da.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.imageRef,a={anchor:{x:.5,y:.5},pivot:{x:.5,y:.5},name:"New Map Object",position:{x:0,y:0},rotation:0,scale:{x:1,y:1},imageRef:t,layer:"background"},r.next=4,Object(Ra.call)(Ya.database.create,"/testMap/objects",a);case 4:case"end":return r.stop()}},Ur)}function Jr(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.all)([Object(Ra.fork)(Yr),Object(Ra.takeEvery)($t.TESTMAP.UPDATE.OBJECT,Wr),Object(Ra.takeEvery)($t.TESTMAP.ASSET.ADD,zr),Object(Ra.takeEvery)($t.TESTMAP.IMAGE.ADD,qr),Object(Ra.takeEvery)($t.TESTMAP.REMOVE.OBJECT,Br)]);case 2:case"end":return e.stop()}},Fr)}var Vr=Da.a.mark(Kr);function Kr(){return Da.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ra.all)([Object(Ra.fork)(Ka),Object(Ra.fork)(rr),Object(Ra.fork)(mr),Object(Ra.fork)(br),Object(Ra.fork)(Dr),Object(Ra.fork)(Jr)]);case 2:case"end":return e.stop()}},Vr)}var Qr,Xr=Object(sa.a)({basename:""}),Zr=Object(oa.default)(),$r=[Zr],en=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ia.compose).apply(void 0,[ia.applyMiddleware.apply(void 0,$r)].concat([])),tn=Object(ia.createStore)((Qr=Xr,Object(ia.combineReducers)({router:Object(la.a)(Qr),chat:pa,auth:fa,storage:ba,images:ja,assets:Sa,map:Aa,characters:ha,testMap:Pa,ui:xa})),{},en);Zr.run(Kr);var an,rn=tn,nn=a(370),cn=a.n(nn),on=a(164),sn=a(161),ln=a.n(sn),un=a(162),pn=a.n(un),mn=a(371),hn=a.n(mn),dn=function(e){return u.a.createElement("div",{style:{backgroundColor:"blue",width:e.width||"16px",height:e.diameter?e.diameter/2:"64px",position:"absolute",left:"50%",transform:"rotate(".concat(e.rotation,"deg) translate(-50%, 0)"),transformOrigin:"0% 100%"}})},fn=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e)))._el=void 0,a.mouseDown=function(e){a.setState({isActive:!0})},a.mouseMove=function(e){a.state.isActive&&a._updateRotation(e)},a.mouseUp=function(e){a.state.isActive&&(a.setState({isActive:!1}),a._updateRotation(e),a.props.rotationChanged&&a.props.rotationChanged(a.state.rotationDeg,a.state.rotationRad))},a._updateRotation=function(e){var t=a._el.clientWidth/2,r=a._el.clientHeight/2;if(e.currentTarget){var n=e.currentTarget.getBoundingClientRect(),c=e.clientX-n.left-t,i=e.clientY-n.top-r,o=Math.atan2(i,c)+Math.PI/2,s=o*(180/Math.PI);a.setState({rotationDeg:s,rotationRad:o})}},a.state={isActive:!1,rotationDeg:(a.props.initialRotationRad||0)*(180/Math.PI),rotationRad:a.props.initialRotationRad||0},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.initialRotationRad!==this.props.initialRotationRad&&this.setState({rotationDeg:(this.props.initialRotationRad||0)*(180/Math.PI),rotationRad:this.props.initialRotationRad||0})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{ref:function(t){return e._el=t},onMouseDown:this.mouseDown,onMouseMove:this.mouseMove,onMouseUp:this.mouseUp,style:Object(g.a)({display:"block",cursor:"grab",position:"relative",backgroundColor:"red",width:this.props.diameter||"128px",height:this.props.diameter||"128px",borderRadius:"50%",overflow:"hidden"},this.props.style)},u.a.createElement(dn,{diameter:this.props.diameter,width:8,rotation:this.state.rotationDeg}))}}]),t}(l.Component),vn={position:"absolute",right:0,width:"300px",top:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)"},bn=function(e){return u.a.createElement("div",{style:{marginTop:"10px"}},e.children)},En=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={objectId:null,object:null,name:"",rotation:0,layer:null,isPcAsset:!1,isNpcAsset:!1,layers:[],scaleX:1,scaleY:1},a.handleChange=function(e){return function(t){null!==t.target.value&&a.setState(Object(E.a)({},e,t.target.value))}},a.removeObject=function(){a.props.removeObject&&a.props.removeObject(a.state.objectId)},a.saveChanges=function(){if(a.props.onUpdateObject){if(!a.state.object||!a.state.objectId)return;a.props.onUpdateObject({mapObjectId:a.state.objectId,newData:{name:a.state.name,rotation:a.state.rotation,layer:a.state.layer,scale:{x:a.state.scaleX,y:a.state.scaleY}}})}},a.updateState=function(e){var t=e.selected,r=e.map,n=t.length>0?t[0]:null,c=n&&r.objects.hasOwnProperty(n)?r.objects[n]:null,i=!!c&&!!c.pcId,o=!!c&&!!c.npcId,s=r&&r.layers?Object.keys(r.layers).map(function(e){return Object(g.a)({},r.layers[e],{id:e})}):[];a.setState({objectId:n,object:c,name:c?c.name:"",rotation:c?c.rotation:0,layer:c?c.layer:null,isPcAsset:i,isNpcAsset:o,layers:s,scaleX:c?c.scale.x:1,scaleY:c?c.scale.y:1})},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateState(this.props)}},{key:"componentDidUpdate",value:function(e,t){this.props.map===e.map&&this.props.selected===e.selected||this.updateState(this.props)}},{key:"render",value:function(){var e=this,t=this.props.visible,a=this.state,r=a.object,n=a.name,c=a.rotation,i=a.layers,o=a.scaleX,s=a.scaleY;return t?r?u.a.createElement(on.a,{default:{x:5,y:5,width:250,height:450},minWidth:250,minHeight:450,dragHandleClassName:"dragBar",bounds:"window",enableResizing:{bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!1,top:!1,topLeft:!1,topRight:!1}},u.a.createElement("div",{style:{backgroundColor:"rgba(100, 100, 100, 0.8)",border:"2px solid #444",width:"100%",height:"100%",position:"relative",padding:"5px"}},u.a.createElement("div",{className:"dragBar",style:{cursor:"grab",backgroundColor:"#444",height:"36px",width:"calc(100% + 10px)",margin:"-5px -5px"}},u.a.createElement("h1",{style:{display:"inline-block",fontSize:"120%",textDecoration:"underline",paddingLeft:"10px"}},"Properties"),u.a.createElement("div",{style:{padding:2,backgroundColor:"red",textAlign:"center",float:"right",display:"inline-block",width:24,height:24,cursor:"pointer"},onClick:function(){return e.props.close()}},u.a.createElement("span",{style:{}},u.a.createElement(ln.a,null)))),u.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.a.createElement(bn,null,u.a.createElement(bt.i,{value:n,onChange:this.handleChange("name")})),u.a.createElement(bn,null,"Position = (",r.position.x,", ",r.position.y,")"),u.a.createElement(bn,null,"Rotation",u.a.createElement("input",{type:"number",value:c,onChange:this.handleChange("rotation")}),u.a.createElement(fn,{diameter:64,style:{marginLeft:"auto",marginRight:"auto"},initialRotationRad:c,rotationChanged:function(t,a){e.setState({rotation:a})}})),u.a.createElement(bn,null,"Layer = ",r.layer,u.a.createElement("select",{onChange:this.handleChange("layer")},u.a.createElement("option",{value:null},"---"),i.map(function(e){return u.a.createElement("option",{key:e.id,value:e.id},e.id," (",e.zIndex,")")}))),u.a.createElement(bn,null,u.a.createElement("span",{style:{marginRight:5}},"Scale X"),u.a.createElement("input",{type:"number",value:o,onChange:this.handleChange("scaleX")})),u.a.createElement(bn,null,u.a.createElement("span",{style:{marginRight:5}},"Scale Y"),u.a.createElement("input",{type:"number",value:s,onChange:this.handleChange("scaleY")})),u.a.createElement(bt.a,{fullWidth:!0,color:"primary",variant:"contained",onClick:this.saveChanges,style:{marginTop:"15px"}},"Save",u.a.createElement(pn.a,null)),u.a.createElement(bt.a,{fullWidth:!0,color:"secondary",variant:"contained",onClick:this.removeObject,style:{marginTop:"15px"}},"Remove Object",u.a.createElement(hn.a,null))))):u.a.createElement("div",{style:vn},u.a.createElement("h1",null,"Nothing Selected")):u.a.createElement("div",null)}}]),t}(l.Component),gn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.visible,e.map),a=e.selected,r=e.onUpdateObject,n=e.removeObject,c=e.close;return u.a.createElement(En,{visible:a&&a.length>0,selected:a,map:t,onUpdateObject:r,removeObject:n,close:c})}}]),t}(l.Component),yn=Object(f.c)(function(e){return{visible:e.ui.propertyPanel.visible,selected:e.testMap.selectedObjects,map:e.testMap.map}},function(e){return{onUpdateObject:function(t){return e(aa(t))},removeObject:function(t){return e(function(e){return{type:$t.TESTMAP.REMOVE.OBJECT,mapObjectId:e}}(t))},close:function(){return e(ra({mapObjectId:null}))}}})(gn),On=a(163),jn=a.n(On),Cn=(a(858),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,a=(e.isOwner,t.sender||"unknown");return u.a.createElement("div",{className:"message",key:t.id},u.a.createElement("div",{className:jn.a.username},a," :"),u.a.createElement("div",null,t.msg))}}]),t}(u.a.Component)),Sn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.message,a=t.data;switch(a.rollType){case"Skill":e="roll-skill";break;case"Ability":e="roll-ability";break;case"Initiative":e="roll-initiative";break;case"Attack":e="roll-attack";break;case"Ad-hoc":default:e="roll-adhoc"}var r=a.rollAdvantageType>0&&a.roll1Total<a.roll2Total||a.rollAdvantageType<0&&a.roll1Total>a.roll2Total,n=a.rollAdvantageType&&!r,c=t.data&&t.data.characterName||t.sender;return u.a.createElement("div",{className:"roll-container ".concat(e)},u.a.createElement("div",{className:"roll-header"},u.a.createElement("span",{className:"roll-user"},c),u.a.createElement("span",{className:"roll-type"},a.rollType)),u.a.createElement("div",{className:"roll-title"},u.a.createElement("span",{className:"roll-name"},a.rollName),null!==a.modifier&&void 0!==a.modifier&&u.a.createElement("span",{className:"roll-modifier"},"(",a.modifier,")")),u.a.createElement("div",{className:"roll-rolls"},u.a.createElement("div",{className:"roll-1 ".concat(r?"ignore":"")},u.a.createElement("span",{className:"summary "+(a.roll1CritSuccess?"crit":a.roll1CritFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},a.roll1Total),u.a.createElement("span",{className:"roll-suffix"},a.rollSuffix)),u.a.createElement("span",{className:"details"},a.roll1Details)),a.roll2Details&&a.rollAdvantageType&&u.a.createElement("div",{className:a.rollAdvantageType>0?"roll-advantage":"roll-disadvantage"},a.rollAdvantageType>0?"A":"D"),a.roll2Details&&u.a.createElement("div",{className:"roll-2 ".concat(n?"ignore":"")},u.a.createElement("span",{className:"summary "+(a.roll2CritSuccess?"crit":a.roll2CritFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},a.roll2Total),u.a.createElement("span",{className:"roll-suffix"},a.rollSuffix)),u.a.createElement("span",{className:"details"},a.roll2Details))))}}]),t}(u.a.Component),Nn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result,t=[],a=0,r=!0,n=!1,c=void 0;try{for(var i,o=e.rolls[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;t.push(u.a.createElement("div",{key:a++,className:"roll ".concat(s.ignore?"ignore":"")},u.a.createElement("span",{className:"summary "+(s.critSuccess?"crit":s.critFail?"critFail":"")},u.a.createElement("span",{className:"roll-total"},s.total)),u.a.createElement("span",{className:"details"},s.details))),e.advantage&&t.push(u.a.createElement("div",{key:a++,className:e.advantage===N.Advantage?"roll-advantage":"roll-disadvantage"},e.advantage===N.Advantage?"A":"D"))}}catch(l){n=!0,c=l}finally{try{r||null==o.return||o.return()}finally{if(n)throw c}}return u.a.createElement("div",{className:"roll-rolls"},t)}}]),t}(u.a.Component),kn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result;return u.a.createElement("div",{className:"text"},e.text)}}]),t}(u.a.Component),An=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result;return u.a.createElement("div",{className:"column"},u.a.createElement("div",null,e.condition),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"column"},u.a.createElement("div",null,"On success:"),u.a.createElement("div",null,u.a.createElement(Tn,{action:e.onSuccess}))),u.a.createElement("div",{className:"column"},u.a.createElement("div",null,"On failure:"),u.a.createElement("div",null,u.a.createElement(Tn,{action:e.onFailure})))))}}]),t}(u.a.Component),Tn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.action;switch(e.type){case S.Text:return u.a.createElement(kn,{result:e});case S.DiceRoll:return u.a.createElement(Nn,{result:e});case S.Condition:return u.a.createElement(An,{result:e});default:return u.a.createElement("div",null,"Unknown action type ",e.type,"!")}}}]),t}(u.a.Component),Pn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.message,t=e.data,a=[];for(var r in t.results){var n=t.results[r];a.push(u.a.createElement(Tn,{key:r,action:n}))}return u.a.createElement("div",{className:"character-action-container"},u.a.createElement("div",{className:"action-header"},u.a.createElement("span",{className:"action-user"},t.characterName||e.sender)),u.a.createElement("div",{className:"action-title"},u.a.createElement("span",{className:"action-name"},t.title)),t.results.map(function(e,t){return u.a.createElement(Tn,{key:t,action:e})}))}}]),t}(u.a.Component),wn=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={msg:"",messages:[],messagesOpen:!0},a.scrollDiv=void 0,a.scrollToBottomOfChat=function(){a.scrollDiv&&(a.scrollDiv.scrollTop=a.scrollDiv.scrollHeight)},a.handleMsgChange=function(e){a.setState({msg:e.target.value})},a.handleKeyDown=function(e){if("Enter"===e.key){if(a.state.msg.match(/^\d*?d(\d+|%)/)){var t=new b.DiceRoll(a.state.msg),r={type:"roll",rollType:"Ad-hoc",rollName:t.notation,modifier:null,roll1Total:t.total,roll1Details:t.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:!1,roll1CritFail:!1};a.props.sendMessage("",r)}else a.sendMessage(a.state.msg);a.setState({msg:""})}},a.sendMessage=function(e){a.props.sendMessage(e)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.scrollToBottomOfChat()}},{key:"componentDidMount",value:function(){this.scrollToBottomOfChat()}},{key:"render",value:function(){var e=this,t=this.props.messages,a=this.state.messagesOpen;return u.a.createElement("div",{style:{position:"relative",height:"100%",marginTop:"24px"}},u.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},a&&u.a.createElement("div",{className:jn.a.messages,ref:function(t){return e.scrollDiv=t}},t.map(function(t,a){switch(t.data&&t.data.type){case"roll":return u.a.createElement(Sn,{message:t,key:a});case"action":return u.a.createElement(Pn,{message:t,key:a});default:return u.a.createElement(Cn,{message:t,key:a,isOwner:t.sender===e.props.user.email})}})),u.a.createElement("div",{style:{marginBottom:"24px"}},u.a.createElement(kt.a,{fullWidth:!0,placeholder:"msg or d20+4 etc",onChange:function(t){return e.handleMsgChange(t)},onKeyDown:function(t){return e.handleKeyDown(t)},value:this.state.msg,variant:"filled",margin:"dense"}))))}}]),t}(u.a.Component),_n=a(45),xn=a.n(_n),In=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={win:null,el:null},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.el;return e?xn.a.createPortal(this.props.children,e):null}},{key:"componentDidMount",value:function(){var e,t,a=this,r=window.open("","","width=600,height=400,left=200,top=200,toolbar=no,menubar=no,scrollbars=yes,resizable=yes"),n=document.createElement("div");r.document.body.appendChild(n),r.document.title=this.props.title||"",e=document,t=r.document,Array.from(e.styleSheets).forEach(function(a){try{if(a.cssRules){var r=e.createElement("style");Array.from(a.cssRules).forEach(function(t){r.appendChild(e.createTextNode(t.cssText))}),t.head.appendChild(r)}else if(a.href){var n=e.createElement("link");n.rel="stylesheet",n.href=a.href,t.head.appendChild(n)}}catch(c){}}),r.addEventListener("beforeunload",function(){return a.props.onClose&&a.props.onClose()}),this.setState({win:r,el:n})}},{key:"componentWillUnmount",value:function(){this.state.win.close()}}]),t}(l.Component),Dn=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={showWindowPortal:!1},a._chat=void 0,a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.showWindowPortal&&!t.showWindowPortal&&this.forceUpdate()}},{key:"render",value:function(){var e=this,t=u.a.createElement(wn,Object.assign({ref:function(t){return e._chat=t}},this.props));return u.a.createElement("div",{style:{height:"100%"}},this.state.showWindowPortal?u.a.createElement(In,{title:"Chat",onClose:function(){return e.setState({showWindowPortal:!1})}},t):u.a.createElement(on.a,{default:{x:0,y:-300,width:"400px",height:"300px"},minWidth:200,minHeight:100,disableDragging:!0,style:{zIndex:9,backgroundColor:"rgba(0, 0, 0, 0.5)"}},u.a.createElement("div",{style:{height:"100%",position:"relative"}},u.a.createElement("div",{style:{height:"100%"}},t,u.a.createElement(bt.c,{style:{position:"absolute",top:-18,right:5,cursor:"pointer",fontSize:18},onClick:function(){return e.setState({showWindowPortal:!0})}},"open_in_new")))))}}]),t}(l.Component),Rn=Object(f.c)(function(e){return{messages:e.chat.messages,loggedIn:e.auth.loggedIn,user:e.auth.user}},function(e){return{sendMessage:function(t,a){return e(Ee(t,a))},login:function(t,a){return e(Tt(t,a))}}})(Dn),Mn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.onClick;return u.a.createElement("div",{style:{display:"table"}},u.a.createElement("div",{style:{padding:"50% 0",height:0}},u.a.createElement("div",{style:{display:"block",padding:10,backgroundColor:"red",cursor:"pointer",transform:"rotate(-90deg)",transformOrigin:"left top",textTransform:"uppercase",whiteSpace:"nowrap",textAlign:"center"},onClick:function(){return a()}},t)))}}]),t}(l.Component),Ln=a(870),Hn=a(122),Un=a.n(Hn),Fn=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={in:!1},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.setState({in:!0})},0)}},{key:"render",value:function(){return u.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,padding:"5px",overflowY:"scroll"}},u.a.createElement(Ln.a,{in:this.state.in,timeout:500,classNames:{enter:Un.a.enter,enterActive:Un.a.enterActive,exit:Un.a.exit,exitActive:Un.a.exitActive}},u.a.createElement("div",null,this.props.children)))}}]),t}(l.Component);!function(e){e[e.UPLOAD=0]="UPLOAD",e[e.ASSETS=1]="ASSETS",e[e.GENERAL=2]="GENERAL"}(an||(an={}));var Gn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.upload;return(0,this.props.connectDragSource)(u.a.createElement("img",{src:e.downloadUrl,width:64,height:64}))}}]),t}(l.Component);var Yn=Object(W.DragSource)(z,{beginDrag:function(e){return{imageRef:e.upload.filePath}},endDrag:function(e,t,a){t.didDrop()&&(t.getItem(),t.getDropResult())}},function(e,t){return{connectDragSource:e.dragSource()}})(Gn),Wn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.uploads.map(function(e){return u.a.createElement(Yn,{key:e.id,upload:e})})}}]),t}(l.Component),Bn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.uploads;return u.a.createElement(Wn,{uploads:e})}}]),t}(l.Component),zn=Object(f.c)(function(e){return{uploads:e.images.images}},function(e){return{}})(Bn),qn=a(121),Jn=a.n(qn),Vn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.asset,a=(e.assetType,e.images),r=this.props,n=r.isDragging,c=r.connectDragSource,i={cursor:"grab",padding:"5px 10px"};n&&(i.backgroundColor="red");var o=a.find(function(e){return e.filePath===t.imageRef});return c(u.a.createElement("img",{style:i,className:Jn.a.image,src:o?o.downloadUrl:t.imageUrl||t.imageRef,alt:t.name||"unknown"}))}}]),t}(l.Component);var Kn=Object(W.DragSource)(B,{beginDrag:function(e){return{id:e.asset.id,assetType:e.assetType}},endDrag:function(e,t,a){t.didDrop()&&(t.getItem(),t.getDropResult())}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Object(Et.withStyles)(function(e){return{assetItem:{backgroundColor:"transparent","&:hover":{backgroundColor:"green"}},dragging:{backgroundColor:"red"}}})(Vn)),Qn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.asset;t.assetType;return u.a.createElement("div",{className:Jn.a.item},u.a.createElement(Kn,this.props),u.a.createElement("div",{className:Jn.a.title,onClick:function(){return e.onClick(a)}},a.name||"unknown"))}},{key:"onClick",value:function(e){window.open("/#/characterSheet/".concat(e.id),"popupWindow","height=1000,width=800,toolbar=no,location=no,statusbar=no,titlebar=no,directories=no",!1)}}]),t}(l.Component),Xn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.playerCharacters,r=t.nonPlayerCharacters;return u.a.createElement("div",null,u.a.createElement("ul",null,a.map(function(t){return u.a.createElement(Qn,Object.assign({asset:t,assetType:Er.PlayerCharacter,key:t.id},e.props))})),u.a.createElement("hr",null),u.a.createElement("ul",null,r.map(function(t){return u.a.createElement(Qn,Object.assign({asset:t,assetType:Er.NonPlayerCharacter,key:t.id},e.props))})))}}]),t}(l.Component),Zn=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.playerCharacters,a=e.nonPlayerCharacters,r=e.editCharacterSheet,n=e.images;return u.a.createElement("div",null,u.a.createElement("h1",null,"Asset List"),u.a.createElement(Xn,{playerCharacters:t,nonPlayerCharacters:a,editCharacterSheet:r,images:n}))}}]),t}(l.Component),$n=Object(f.c)(function(e){return{playerCharacters:e.assets.playerCharacters,nonPlayerCharacters:e.assets.nonPlayerCharacters,images:e.images.images}},function(e){return{editCharacterSheet:function(t){return e(lt(t))}}})(Zn),ec=a(30),tc=a.n(ec),ac=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={current:Er.PlayerCharacter},a.handleChange=function(e){a.setState({current:e.target.value}),a.props.onChange&&a.props.onChange(e.target.value)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return u.a.createElement(bt.b,{className:e.formControl},u.a.createElement(bt.e,{htmlFor:"assetType-input"},"Asset Type"),u.a.createElement(bt.h,{value:this.state.current,onChange:this.handleChange,inputProps:{name:"assetType",id:"assetType-input"}},u.a.createElement(bt.g,{value:Er.PlayerCharacter},"Player Character"),u.a.createElement(bt.g,{value:Er.NonPlayerCharacter},"Non Player Character")))}}]),t}(l.Component),rc=Object(Et.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit}}})(ac),nc=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",assetType:Er.PlayerCharacter,uploadId:null},a.onSave=function(){var e={imageRef:"",name:a.state.name};a.props.saveNewAsset(a.state.assetType,e)},a.onChangeAssetType=function(e){return a.setState({assetType:e})},a.onChangeName=function(e){return a.setState({name:e.currentTarget.value})},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return u.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.a.createElement("h1",null,"Create Asset"),u.a.createElement(rc,{onChange:this.onChangeAssetType}),u.a.createElement(bt.i,{label:"Name",margin:"normal",className:e.nameInput,value:this.state.name,onChange:this.onChangeName}),u.a.createElement(bt.a,{variant:"contained",className:e.button,onClick:this.onSave},u.a.createElement(pn.a,{className:tc()(e.leftIcon,e.iconSmall)}),"Save"))}}]),t}(l.Component),cc=Object(Et.withStyles)(function(e){return{button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20},nameInput:{margin:e.spacing.unit}}})(nc),ic=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).saveNewAsset=function(e,t){e===Er.PlayerCharacter?a.props.saveNewPlayerCharacter(t):e===Er.NonPlayerCharacter&&a.props.saveNewNonPlayerCharacter(t)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(cc,{saveNewAsset:this.saveNewAsset})}}]),t}(l.Component),oc=Object(f.c)(function(e){return{assets:e.assets.assets}},function(e){return{saveNewPlayerCharacter:function(t){return e((a=t,{type:ye.ASSETS.PLAYERCHARACTER.NEW.SAVE,playerCharacterData:a}));var a},saveNewNonPlayerCharacter:function(t){return e((a=t,{type:ye.ASSETS.NONPLAYERCHARACTER.NEW.SAVE,nonPlayerCharacterData:a}));var a}}})(ic),sc=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("h1",null,"General"))}}]),t}(l.Component),lc=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(sc,null)}}]),t}(l.Component),uc=Object(f.c)(function(e){return{}},function(e){return{}})(lc),pc=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).onClickTab=function(e){return function(){a.props.open&&a.props.currentPanel===e?a.props.closeTabs():(a.props.openPanel(e),a.props.open||a.props.openTab())}},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,a=(e.openTab,e.closeTabs);return u.a.createElement("div",{style:{zIndex:99,position:"absolute",top:0,bottom:0,right:t?0:-400,display:"flex",flexDirection:"row",transition:"right 500ms",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",WebkitTransitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"}},u.a.createElement("div",{style:{width:"40px",position:"absolute",top:"50%",left:"-40px"}},u.a.createElement(Mn,{text:"Uploads",name:"uploads",onClick:this.onClickTab(an.UPLOAD)}),u.a.createElement(Mn,{text:"Assets",name:"assets",onClick:this.onClickTab(an.ASSETS)}),u.a.createElement(Mn,{text:"General",name:"general",onClick:this.onClickTab(an.GENERAL)})),u.a.createElement("div",{style:{position:"relative",width:"400px",backgroundColor:"rgba(80, 80, 80, 0.8)"}},u.a.createElement("div",{style:{padding:5,backgroundColor:"red",textAlign:"center",position:"absolute",top:0,left:-42,width:32,height:32,opacity:t?1:0,transition:"opacity 500ms",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return a()}},u.a.createElement("span",{style:{}},u.a.createElement(ln.a,null))),this.props.currentPanel===an.UPLOAD&&u.a.createElement(Fn,null,u.a.createElement(jt,null),u.a.createElement(zn,null)),this.props.currentPanel===an.ASSETS&&u.a.createElement(Fn,null,u.a.createElement(oc,null),u.a.createElement($n,null)),this.props.currentPanel===an.GENERAL&&u.a.createElement(Fn,null,u.a.createElement(uc,null))))}}]),t}(l.Component),mc=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return u.a.createElement(pc,{open:this.props.sidebarOpen,openTab:this.props.openTab,closeTabs:this.props.closeTabs,openPanel:this.props.openPanel,currentPanel:this.props.sidebarPanel})}}]),t}(l.Component),hc=Object(f.c)(function(e){return{sidebarOpen:e.ui.sidebarOpen,sidebarPanel:e.ui.sidebarPanel}},function(e){return{openTab:function(){return e({type:wa.UI.SIDEBAR.OPEN})},closeTabs:function(){return e({type:wa.UI.SIDEBAR.CLOSE})},openPanel:function(t){return e(function(e){return{type:wa.UI.SIDEBAR.OPEN_PANEL,panel:e}}(t))}}})(mc);a.d(t,"App",function(){return dc});var dc=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).configLoaded=void 0,a.configLoaded=!!localStorage.getItem("firebaseConfig"),a.state={projectName:"",apiKey:""},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=Object(Et.createMuiTheme)({palette:{type:"dark"}});return u.a.createElement(f.a,{store:rn},u.a.createElement(d.a,null,u.a.createElement(W.DragDropContextProvider,{backend:cn.a},u.a.createElement("div",{className:"App"},u.a.createElement(Et.MuiThemeProvider,{theme:e},u.a.createElement(p.c,null,u.a.createElement(p.a,{exact:!0,path:"/",render:function(){return u.a.createElement("div",null,u.a.createElement(hc,null),u.a.createElement("div",{className:h.a.overlayWrapper},u.a.createElement("div",{style:{zIndex:9999,position:"absolute",bottom:0,left:0}},u.a.createElement(Rn,null))),u.a.createElement("div",{className:h.a.mapWrapper},u.a.createElement(yn,null),u.a.createElement(ca,null)))}}),u.a.createElement(p.a,{path:"/upload",render:function(){return u.a.createElement(jt,null)}}),u.a.createElement(p.a,{path:"/login",render:function(){return u.a.createElement(Mt,null)}}),u.a.createElement(p.a,{path:"/characterSheet/:id",render:function(e){return u.a.createElement(mt,Object.assign({popout:e.match.params.id},e))}})))))))}}]),t}(l.Component);t.default=dc},861:function(e,t,a){"use strict";a.r(t);var r=a(13),n=a.n(r),c=a(361),i=a(0),o=a.n(i),s=a(45),l=a.n(s);a(464),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(63),p=a(20),m=a(40),h=a.n(m);a(179);a(869).a({dsn:"https://04f41a05077c4badbe2fb7c804604233@sentry.dnd-player.com/2"});var d={projectId:"",apiKey:"",username:"",password:""},f=function(){var e=Object(c.a)(n.a.mark(function e(){var t,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={apiKey:d.apiKey,authDomain:"".concat(d.projectId,".firebaseapp.com"),databaseURL:"https://".concat(d.projectId,".firebaseio.com"),projectId:d.projectId,storageBucket:"".concat(d.projectId,".appspot.com")},a=h.a.initializeApp(t),e.prev=2,e.next=5,a.auth().signInWithEmailAndPassword(d.username,d.password);case 5:e.sent,localStorage.setItem("firebaseConfig",JSON.stringify(t)),window.location.replace(window.location.origin),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert("Failed to log in. ".concat(e.t0.message));case 13:return e.prev=13,a.delete(),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[2,10,13,16]])}));return function(){return e.apply(this,arguments)}}(),v=window.location.search.match(/\?projectId=(.*?)&apiKey=(.*)$/);if(v)d.projectId=v[1],d.apiKey=v[2];else if(null==localStorage.getItem("firebaseConfig")){var b=Object(u.createMuiTheme)({palette:{type:"dark"}});l.a.render(o.a.createElement("div",{className:"App"},o.a.createElement(u.MuiThemeProvider,{theme:b},o.a.createElement("div",{className:"projectInputs"},o.a.createElement(p.i,{label:"Project Name",placeholder:"dnd-player-b8372",onChange:function(e){return d.projectId=e.target.value},margin:"normal"}),o.a.createElement(p.i,{label:"API Key",placeholder:"AIzaSd***************pK5ao6g95Q-9auWt-8",onChange:function(e){return d.apiKey=e.target.value},margin:"normal"}),o.a.createElement(p.i,{label:"Username",placeholder:"email@example.com",onChange:function(e){return d.username=e.target.value},margin:"normal"}),o.a.createElement(p.i,{label:"Password",type:"Password",onChange:function(e){return d.password=e.target.value},margin:"normal"}),o.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){return f()}},"Save")))),document.getElementById("root"))}else{var E=a(860).default;l.a.render(o.a.createElement(E,null),document.getElementById("root"))}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports={row:"NonPlayerCharacterSheetEditor_row__rp-8p",column:"NonPlayerCharacterSheetEditor_column__1Cw8h",center:"NonPlayerCharacterSheetEditor_center__Kz82R",characterSheet:"NonPlayerCharacterSheetEditor_characterSheet__3CpG6",characterImageContainer:"NonPlayerCharacterSheetEditor_characterImageContainer__2Nu2q",characterName:"NonPlayerCharacterSheetEditor_characterName__pOrX2",button:"NonPlayerCharacterSheetEditor_button__38jvz",characterType:"NonPlayerCharacterSheetEditor_characterType__2ddy0",boldHeading:"NonPlayerCharacterSheetEditor_boldHeading__3mp2_",italicHeading:"NonPlayerCharacterSheetEditor_italicHeading__3LUVG",divider:"NonPlayerCharacterSheetEditor_divider__OmExG",abilityContainer:"NonPlayerCharacterSheetEditor_abilityContainer__2UBj7",ability:"NonPlayerCharacterSheetEditor_ability__18okj",speed:"NonPlayerCharacterSheetEditor_speed__1ZdlG",save:"NonPlayerCharacterSheetEditor_save__5DrZ5",sense:"NonPlayerCharacterSheetEditor_sense__BAnDD",abilityTitle:"NonPlayerCharacterSheetEditor_abilityTitle__1ekDS",speedTitle:"NonPlayerCharacterSheetEditor_speedTitle__33WRx",saveTitle:"NonPlayerCharacterSheetEditor_saveTitle__30CFf",senseTitle:"NonPlayerCharacterSheetEditor_senseTitle__3qEOC",skill:"NonPlayerCharacterSheetEditor_skill__OVh7e",trait:"NonPlayerCharacterSheetEditor_trait__YNEQx",action:"NonPlayerCharacterSheetEditor_action__3aPhy",subheading:"NonPlayerCharacterSheetEditor_subheading__3EwON",rollable:"NonPlayerCharacterSheetEditor_rollable__2i_lh"}}},[[457,1,2]]]);
//# sourceMappingURL=main.684964c1.chunk.js.map