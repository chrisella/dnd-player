(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports={row:"NonPlayerCharacterSheetEditor_row__rp-8p",column:"NonPlayerCharacterSheetEditor_column__1Cw8h",center:"NonPlayerCharacterSheetEditor_center__Kz82R",characterSheet:"NonPlayerCharacterSheetEditor_characterSheet__3CpG6",characterImageContainer:"NonPlayerCharacterSheetEditor_characterImageContainer__2Nu2q",characterName:"NonPlayerCharacterSheetEditor_characterName__pOrX2",button:"NonPlayerCharacterSheetEditor_button__38jvz",characterType:"NonPlayerCharacterSheetEditor_characterType__2ddy0",boldHeading:"NonPlayerCharacterSheetEditor_boldHeading__3mp2_",italicHeading:"NonPlayerCharacterSheetEditor_italicHeading__3LUVG",divider:"NonPlayerCharacterSheetEditor_divider__OmExG",abilityContainer:"NonPlayerCharacterSheetEditor_abilityContainer__2UBj7",ability:"NonPlayerCharacterSheetEditor_ability__18okj",speed:"NonPlayerCharacterSheetEditor_speed__1ZdlG",save:"NonPlayerCharacterSheetEditor_save__5DrZ5",sense:"NonPlayerCharacterSheetEditor_sense__BAnDD",abilityTitle:"NonPlayerCharacterSheetEditor_abilityTitle__1ekDS",speedTitle:"NonPlayerCharacterSheetEditor_speedTitle__33WRx",saveTitle:"NonPlayerCharacterSheetEditor_saveTitle__30CFf",senseTitle:"NonPlayerCharacterSheetEditor_senseTitle__3qEOC",skill:"NonPlayerCharacterSheetEditor_skill__OVh7e",trait:"NonPlayerCharacterSheetEditor_trait__YNEQx",action:"NonPlayerCharacterSheetEditor_action__3aPhy",subheading:"NonPlayerCharacterSheetEditor_subheading__3EwON",rollable:"NonPlayerCharacterSheetEditor_rollable__2i_lh"}},127:function(e,t,a){e.exports={item:"AssetListItem_item__FHViu",image:"AssetListItem_image__3AR_3",title:"AssetListItem_title__3GLMy"}},128:function(e,t,a){e.exports={enter:"OverlayPanel_enter__32t_D",enterActive:"OverlayPanel_enterActive__3mHNX",exit:"OverlayPanel_exit__1TtZt",exitActive:"OverlayPanel_exitActive__aa--v"}},13:function(e,t,a){e.exports={row:"PlayerCharacterSheetEditor_row__qX09K",column:"PlayerCharacterSheetEditor_column__1oSRB",abilityContainer:"PlayerCharacterSheetEditor_abilityContainer__2tbzW"}},17:function(e,t,a){e.exports={row:"NonPlayerCharacterSheet_row__2WSWI",column:"NonPlayerCharacterSheet_column__1tRCs",center:"NonPlayerCharacterSheet_center__PVa9Q",popupAdvantage:"NonPlayerCharacterSheet_popupAdvantage__1W1CH",popupDisadvantage:"NonPlayerCharacterSheet_popupDisadvantage__1UDfA",characterSheet:"NonPlayerCharacterSheet_characterSheet__1ITIM",characterImageContainer:"NonPlayerCharacterSheet_characterImageContainer__3ssK9",characterName:"NonPlayerCharacterSheet_characterName__2Pk6i",button:"NonPlayerCharacterSheet_button__3KA_K",characterType:"NonPlayerCharacterSheet_characterType__1hRFz",boldHeading:"NonPlayerCharacterSheet_boldHeading__iF3Wx",italicHeading:"NonPlayerCharacterSheet_italicHeading__21qNT",divider:"NonPlayerCharacterSheet_divider__11Rzp",abilityContainer:"NonPlayerCharacterSheet_abilityContainer__1_94c",ability:"NonPlayerCharacterSheet_ability__2qAo4",abilityTitle:"NonPlayerCharacterSheet_abilityTitle__1tqn_",speedTitle:"NonPlayerCharacterSheet_speedTitle__3FGrm",skill:"NonPlayerCharacterSheet_skill__3oqJh",save:"NonPlayerCharacterSheet_save__2zIu_",trait:"NonPlayerCharacterSheet_trait__1sDOR",action:"NonPlayerCharacterSheet_action__vmiUS",subheading:"NonPlayerCharacterSheet_subheading__WYOtH",rollable:"NonPlayerCharacterSheet_rollable__2hCTt"}},171:function(e,t,a){e.exports={messages:"Chat_messages__umiIH",rollButton:"Chat_rollButton__2gB8L",chat:"Chat_chat__1_6O9",chatHeader:"Chat_chatHeader__2t-78",username:"Chat_username__2zIlL"}},244:function(e,t,a){e.exports={mapWrapper:"App_mapWrapper__w0tfJ",overlayWrapper:"App_overlayWrapper__2ea5A",chatWrapper:"App_chatWrapper__2U1dO"}},377:function(e,t,a){e.exports={wrapper:"CharacterImage_wrapper__3sak9"}},378:function(e,t,a){e.exports={wrapper:"Authentication_wrapper__1wnUP",username:"Authentication_username__1zpTM",password:"Authentication_password__1usTz",loginButton:"Authentication_loginButton__36BHo",logoutButton:"Authentication_logoutButton__1QowG"}},380:function(e,t){e.exports="data:image/png;base64,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"},381:function(e,t){e.exports="data:image/png;base64,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"},382:function(e,t){e.exports="data:image/png;base64,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"},383:function(e,t){e.exports="data:image/png;base64,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"},384:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wULFRwwmabHlwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAvFSURBVHja7d1RcupIEARA5PvfWf7yBwEBAVhiuirzBiuma4pGfnu5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcN/mEcBM+77vywTJtskSUACAlItdUQAFAHDJKwegAAAuesUAFADAZa8UgAIALnwUAlAAwGUfchl6DqAAgEvfhebZgQIALnwXlecMCgC4jFxAPgtQAKD5onHB+KxAAYCCi8Ql4nMEBQDCLwuXhM8ZFAAouRBcBj57UACgIPiFvnPhXKAAQEnAC3dnxVlBAQBBjjPkDKEAQFJoC2ycKxQAKAlo4YyzBgoAwhicPRQAELzgTKIAgJAFZxQFANYOVYGKcwsKAEUhKkBxhkEBQGiCMw0KAEISnHFQABgbigIR5x4UAAQgmANQAEgMPYGHmTATKAD4tgPmw3ygACDYwLyYFxQAxoeZIMPsmB0UAIQXmCWzhAJAYmAJKzBXKAD4pgKYMRQAfDsBzBsKAIIIzJ/5QwFA+IA5NIcoAAgcMJfmEgUAIQPm03yiAHBquAgWMKsoAPhWAZhbFAB8kwDMMAoAggMwyygACAvAbKMAICAAM44CgGAAzDoKAKcHgjAAc48CgBAAzD8KAKmDb/hBFsgCBQCtH5ALckEBwJAD8gEFAMMNyAkUAAw1IC9QADDMgNxAAWClITbAgAxRADC4ALJEAcDAAjJFpigAGFRAtsgWBQADCsgYGaMAYDABWSNrFAAMJCBzUAAwiIDsQQHAAAIyCAUAgwfIIhQADBwgk1AAMGiAbEIBMGAGDJBRKAAGy2ABsgoFwEAByCwUAIMEILt46McjGNrcDBAgj7AB6GrQhg2QYygAhgZAnqEAGBYAuYYCYEgA5BsKgOEAkHNcLv4KAABsANCKAeSdAoBhAJB7CgCGAED+pfAOwIqtzOEH5Bo2AF3t15AAslAW2gCUHXgA5KYNQOEh1ngBuSgXbQDamphDDsg7bAC6Wq5hAGSkjLQBKDvYAMhTBaCQZgvIP77y/D2C77VVhx9AZioADjKA7JSdp/ETAADYAKDBAshQBQAHF0CWRvITAADYAKCxAshUBQAHFUC2RvITAADYAKChAshYGwA+b1gOJoD8VAD6mikA8njJguURHHfYtFcAmWsD0NasHEQAeaoA9DVRAOSzAqCtAiBXFQDtEgA5rQBoqQDI17Ofp0fwf63S4QSQxzYAAIANgLYJgFy2AYg6ZADIbwWgkJYJIHcVAO0RADmuAGihAMhfBUBrBECeKwDaJwByWAFw6ACQxwrAt1gXAch1BQBtE0AuKwBaIgDyXQHQMgGQzwqAdgiAnFcAAIAlWZe80AqtlwDkuQ0AAKAApNMWAeS1AhDGSyEAcl8BQJsEkNsKgBYIgPxXALRIAOS3AgAAKADDWP8DdGu+B2wAHrA+ApDjCoDWB4D7QAHQGgGQ5woAAKAArM36H4D2e8EG4A7rIgC5rgAAAHmlqO0/+NmaR0sEcAfYAAAACgAAkKFq3W31A4C7wAYAAGopAABQqGblbeUDgDvBBgAAqikAAKAAdLL+B5D7CkAg//MfANwbNgAAUK++AFgDAch/BSCQ9T8A7g8bAABAAQAABaCO3/8BujXfAzYAAKAAZPECIADuERuAK9b/ADTfB34CAAAFAABQAAbz+z8A7hMbAACgvQB4ARCA9nvBBgAAbAAAAAVgKC8AAuBesQG44vd/ANwPfgIAgEoKAAAoAACAAgAARIp74eHRm5peAATAPWIDAAC1FAAAUAAAAAUAAFAAAAAFYBR/AQCA+yK0APifAAHgnrEBAAAUAABAAQAABQAAUAAAAAVgOn8CCIB7wwYAAGwAPAIAUAAAAAVgDv8KIADuGxsAAEABAAAUAABQAAAABQAAUACm868AAuD+sAEAABQAAFAAAAAFAABQAAAABQAAUAAAAAUAAFAAAAAFAABQAAAABQAAUAAAAAUAAFAAAAAFAABQAAAABQAAUAAAQAEAABQAAEABAAAUgEH2fd99zAC4P2wAAMAGwCMAAAUAAFAAAAAFAABQAFaybdvm4wTAfWMDAAAoAACAAgAACkA2/xogAO4NGwAAsAHwCABAAQAAFAAAQAEAABSA1fjXAAFwz9gAXPGngAC4LwoLAACgAACAAgAAKAAAgAIAAKSJ/LO5R29w+lNBANwfNgAAUEkBAAAFAABQAAAABSCBfxIYAPdDaAHwpj8A7hUbAABAAQAAKguA9wAAaL8XbAAAwAYghxcBAXCf2AAAAAoAACgAlbwICEDzfRBdALwHAIB7xAYAAFAA/AwA0K75HrABAAAFAABQAAJ4ERAA94cNwA3vAQDIfxsAAEABSOFnAADcGzYAN/wMACD3bQAAAAUAAMhT9dv4s5WPdwUA3AUtd4ENAAAUUgAAoFDdytvqB6CXO8AGAACqKQAAUKhy3W0FBCD727PfBgAACikAb7REAOS6AjCQFT8A7feCDQAA2ADwx7oIQJ4rAIH8DABA831gA6A1AshxBUDrA8A9oAAAAApAI+sjAPmtAATyMwCA/FcA0CIB5LYCoAUCIPcVAG0SAHmtAAAAU1l9v9garY0A5LgNAACgAEynFQLIeQWAu7xcAiCfFQDtEAD5rgBomQDIZQVASwRArisA2iYA8lgBcOgAkMMKwGqsiwDkuQKA9gkgfxUArREAOa4AaKFaKIDcVQC0RwDk9/LPxyP4v7bpsAHIYxsAAMAGQOsEQA7bAFQfTgDkqwIwiFYJIKcVALRUALmqAGiXAMhnBUBb1VYB5OnKhckjOPZAaqQAstYGIKk5OWwA8lgB4NP2CoD8PLU4eQTnHFANFUC22gAAADYAmioAMlUBcGABZKksPZifAADABgDNFUCGKgA4wACyM5KfAADABgBNFkBmKgA40ACyMpKfAIYcfgD5hwIwgLYKIE+Xfq4ewRoN1wEHZKNstAEwDADyDhuApsOu7QLyUB7aAKS0LIcYQG7aAGi+Dj4gA2WgDQBvDwmAXMMGIHAItGBA7qEAGAYAeYcCYCgA5Bzv8w4AANgAoB0DyDcFAEMCINcUAAwLgDxTADA0AHJMAcDwAPJLfk3hrwAKhg1AHmEDEDZImjQgs1AADBSArEIBMFgAMgoFwIAByCYUAIMGIJMUAAwcgCxSADB4ADJIAcAAArJH9igAGERA5sgcBQADCcgaWaMAYDABGYMCgAEFZAsKAAYVkCkoABhYQJagAGBwARmCAsChA2yIAbmhAGCYAXkhLxQADDUgJ+SEAoDhBuQDCgCGHJALKACEDbuBB1kgCxQAtH7A/KMAIAQAc48CQEUYCAQw6ygACAbAjKMAICAAs40CgLAAzDIKAIIDMMMoAAQGiBABc4sCgG8SgFlFAcC3CsB8ogAgZABziQKAwAHMIQoAwgcwfygACCIwb+YNBYCIUBJMYMZQAPDtBDBXKAD4pgJmySyhACC8wOyYHRQA8oNMmGFezAsKAILNucR8mA8UABqDTshhJswECgC+7YA5AAUAAQjOPSgAVAWiUMQZBwUAIen84kyDAoDQBGcYFACqAlSI4tyCAkB5oApVnFFQABCyzjjOJCgACF5w9kABQBiDs4YCAF3hLKBxrlAAoDywhbYz5AyhAIAgF+TOirOCAgDN4S7gnQvnAgUAhL7g99n77FEAoP0ycCH4nEEBAJeEy8LnCAoAuERcJD4rUADABeOi8VmAAgAuoObLyHMGBQBcVKGXlmcHCgAoA0GXnecACgAoBYMuw/ggc9mDAgAKgQsfUABAKXDZAwoAKAYuekABAOXAJQ8KAKAouNgBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK78AsOWeuN/zkJQAAAAAElFTkSuQmCC"},385:function(e,t){e.exports="data:image/png;base64,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"},472:function(e,t,a){e.exports=a(883)},479:function(e,t,a){},54:function(e,t,a){e.exports={equipment:"Equipment_equipment__3cDCi",title:"Equipment_title__1QYuE",header:"Equipment_header__2uM8D",name:"Equipment_name__2M0UY",quantity:"Equipment_quantity__2AxDK",weight:"Equipment_weight__2FpQP",notes:"Equipment_notes__31VK1"}},690:function(e,t,a){},70:function(e,t,a){e.exports={wrapper:"EquipmentItem_wrapper__1gmMl",name:"EquipmentItem_name__JQKN0",quantity:"EquipmentItem_quantity__3fjZi",weight:"EquipmentItem_weight__IGS_H",notes:"EquipmentItem_notes__1ObZa"}},73:function(e,t,a){},82:function(e,t,a){e.exports={wrapper:"Spells_wrapper__24sqh",name:"Spells_name__2ONwm",school:"Spells_school__TQYfv",level:"Spells_level__c2Kig"}},843:function(e,t){},880:function(e,t,a){},882:function(e,t,a){"use strict";a.r(t);var r,n=a(1),A=a(2),c=a(4),i=a(3),o=a(5),s=a(0),l=a.n(s),u=a(52),p=a(244),m=a.n(p),h=a(393),d=a(35),g=a(33),f=a(37),E=(a(73),a(41)),v=a(9);!function(e){e[e.Tiny=0]="Tiny",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large",e[e.Huge=4]="Huge",e[e.Gargantuan=5]="Gargantuan"}(r||(r={}));var b,C,y=function(){function e(){Object(n.a)(this,e)}return Object(A.a)(e,null,[{key:"mapCharacterAttackEffect",value:function(e,t){var a=this.attackEffectMap[e.type];return a?a(e,t):{type:C.Text,text:"Unknown attack type ".concat(e.type,"!")}}},{key:"mapToHitCharacterEffect",value:function(e,t){var a=e;return{type:C.ToHit,modifier:O.getAbilityModifier(t,a.ability)+O.getProficiencyBonus(t),critRange:20}}},{key:"mapDamageCharacterEffect",value:function(e,t){var a=e;return{type:C.Damage,damageType:a.damageType,diceCount:a.diceCount,diceSize:a.diceSize,bonus:(a.bonus||0)+(a.ability?O.getAbilityModifier(t,a.ability):0)}}},{key:"mapSavingThrowCharacterEffect",value:function(t,a){var r=t;return{type:C.SavingThrow,saveType:r.saveType,saveDC:10+O.getAbilityModifier(a,r.DCAbility),onSave:e.mapCharacterAttackEffect(r.onSave,a),onFail:e.mapCharacterAttackEffect(r.onFail,a)}}},{key:"mapTextCharacterEffect",value:function(e){var t=e;return{type:C.Text,text:t.text}}}]),e}();y.attackEffectMap={0:y.mapToHitCharacterEffect,1:y.mapDamageCharacterEffect,2:y.mapSavingThrowCharacterEffect,3:y.mapTextCharacterEffect},function(e){e[e.ToHit=0]="ToHit",e[e.Damage=1]="Damage",e[e.SavingThrow=2]="SavingThrow",e[e.Text=3]="Text"}(C||(C={}));var O=function(){function e(){Object(n.a)(this,e)}return Object(A.a)(e,null,[{key:"getProficiencyBonus",value:function(e){if(!e||!e.levels)return null;var t=e.levels.map(function(e){return e.level}).reduce(function(e,t){return e+t});return t>20?null:1+Math.ceil(t/4)}},{key:"getSaveModifier",value:function(t,a){if(!t||!t.saves)return null;var r=this.getAbilityModifier(t,a);if(null===r)return null;var n=t.saves[a]||0,A=e.getProficiencyBonus(t);return r+Math.floor(n*A)}},{key:"getAbilityModifier",value:function(e,t){return e&&void 0!==e[t]?Math.floor((e[t]-10)/2):null}},{key:"getInitiativeModifier",value:function(e){return this.getAbilityModifier(e,"dexterity")}},{key:"getSkillModifier",value:function(t,a,r){if(!t||void 0===t[r])return null;var n=Math.floor((t[r]-10)/2),A=(t.skills||{})[a]||0,c=e.getProficiencyBonus(t);return n+Math.floor(A*c)}},{key:"getAttacks",value:function(e){return[].concat((e.equipment||[]).map(function(e){return e.attacks||[]})).concat(e.attacks||[]).concat((e.spells||[]).map(function(e){return Object(v.a)({},e,{title:e.name})})).flat().map(function(t){return{name:t.title,range:t.range,effects:t.effects.map(function(t){return y.mapCharacterAttackEffect(t,e)})}})}},{key:"getShortAbilityName",value:function(t){var a=e.abilityNameMap[t];return a&&a.short}},{key:"getLongAbilityName",value:function(t){var a=e.abilityNameMap[t];return a&&a.long}},{key:"getLongSkillName",value:function(t){return e.skillNameMap[t]}},{key:"getSaveName",value:function(t){return e.saveNameMap[t]}},{key:"getSenseName",value:function(t){return e.senseNameMap[t]}},{key:"getSizeName",value:function(t){return e.sizeNameMap[t]}},{key:"getSpeedName",value:function(t){return e.speedNameMap[t]}}]),e}();O.abilityNameMap={strength:{short:"STR",long:"Strength"},dexterity:{short:"DEX",long:"Dexterity"},constitution:{short:"CON",long:"Constitution"},intelligence:{short:"INT",long:"Intelligence"},wisdom:{short:"WIS",long:"Wisdom"},charisma:{short:"CHA",long:"Charisma"}},O.skillNameMap={acrobatics:"Acrobatics",animalHandling:"Animal Handling",arcana:"Arcana",athletics:"Athletics",deception:"Deception",history:"History",insight:"Insight",intimidation:"Intimidation",investigation:"Investigation",medicine:"Medicine",nature:"Nature",perception:"Perception",performance:"Performance",persuasion:"Persuasion",religion:"Religion",sleightOfHand:"Sleight of Hand",stealth:"Stealth",survival:"Survival"},O.saveNameMap={strength:"Strength Save",dexterity:"Dexterity Save",constitution:"Constitution Save",intelligence:"Intelligence Save",wisdom:"Wisdom Save",charisma:"Charisma Save"},O.senseNameMap={tremorsense:"tremorsense",darkvision:"darkvision",blindsight:"blindsight",truesight:"truesight"},O.sizeNameMap=(b={},Object(E.a)(b,r.Tiny,"Tiny"),Object(E.a)(b,r.Small,"Small"),Object(E.a)(b,r.Medium,"Medium"),Object(E.a)(b,r.Large,"Large"),Object(E.a)(b,r.Huge,"Huge"),Object(E.a)(b,r.Gargantuan,"Gargantuan"),b),O.speedNameMap={walk:"",fly:"fly",burrow:"burrow",swim:"swim",climb:"climb"},O.classNameMap={barbarian:"Barbarian",bard:"Bard",cleric:"Cleric",druid:"Druid",fighter:"Fighter",monk:"Monk",paladin:"Paladin",ranger:"Ranger",rogue:"Rogue",sorcerer:"Sorcerer",warlock:"Warlock",wizard:"Wizard"};var j,S,N=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=O.getAbilityModifier(r,a);return l.a.createElement("div",{className:"ability",onClick:function(t){return e.handleClick(t,0)}},l.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),l.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),l.a.createElement("div",{className:"ability-title"},O.getLongAbilityName(a)),l.a.createElement("div",{className:"ability-modifier"},l.a.createElement("div",{className:"ability-symbol"},n<0?"-":"+"),l.a.createElement("div",{className:"ability-number"},Math.abs(n))),l.a.createElement("div",{className:"ability-score"},r[a]))}},{key:"handleClick",value:function(e,t){var a=O.getAbilityModifier(this.props.character,this.props.ability),r=(a<0?"":"+")+a,n=new f.DiceRoll("d20"+r),A={type:"roll",rollType:"Ability",rollName:O.getLongAbilityName(this.props.ability),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var c=new f.DiceRoll("d20"+r);A.rollAdvantageType=t,A.roll2Total=c.total,A.roll2Details=c.toString().match(/.*?: (.*?) =/)[1],A.roll2CritSuccess=20===c.rolls[0][0],A.roll2CritFail=1===c.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",A)}}]),t}(l.a.Component),w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=r.saves||{},A=O.getSaveModifier(r,a),c=Ae[n[a]||0];return l.a.createElement("div",{className:"save",onClick:function(t){return e.handleClick(t,0)}},l.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),l.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),l.a.createElement("div",{className:"save-wrapper"},l.a.createElement("div",{className:"save-proficiency ".concat(c)}),l.a.createElement("div",{className:"save-title"},O.getShortAbilityName(a)),l.a.createElement("div",{className:"save-modifier"},l.a.createElement("span",{className:"save-symbol"},A<0?"-":"+"),l.a.createElement("span",{className:"save-number"},Math.abs(A)))))}},{key:"handleClick",value:function(e,t){var a=O.getSaveModifier(this.props.character,this.props.ability),r=(a<0?"":"+")+a,n=new f.DiceRoll("d20"+r),A={type:"roll",rollType:"Save",rollName:O.getSaveName(this.props.ability),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var c=new f.DiceRoll("d20"+r);A.rollAdvantageType=t,A.roll2Total=c.total,A.roll2Details=c.toString().match(/.*?: (.*?) =/)[1],A.roll2CritSuccess=20===c.rolls[0][0],A.roll2CritFail=1===c.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",A)}}]),t}(l.a.Component),I=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=t.skill,A=r.skills||{},c=O.getSkillModifier(r,n,a),i=Ae[A[n]||0];return l.a.createElement("div",{className:"skill",onClick:function(t){return e.handleClick(t,0)}},l.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),l.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),l.a.createElement("div",{className:"skill-wrapper"},l.a.createElement("div",{className:"skill-proficiency ".concat(i)}),l.a.createElement("div",{className:"skill-ability"},O.getShortAbilityName(a)),l.a.createElement("div",{className:"skill-title"},O.getLongSkillName(n)),l.a.createElement("div",{className:"skill-modifier"},l.a.createElement("div",{className:"skill-symbol"},c<0?"-":"+"),l.a.createElement("div",{className:"skill-number"},Math.abs(c)))))}},{key:"handleClick",value:function(e,t){var a=O.getSkillModifier(this.props.character,this.props.skill,this.props.ability),r=(a<0?"":"+")+a,n=new f.DiceRoll("d20"+r),A={type:"roll",rollType:"Skill",rollName:"".concat(this.props.skill," (").concat(this.props.ability,")"),modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var c=new f.DiceRoll("d20"+r);A.rollAdvantageType=t,A.roll2Total=c.total,A.roll2Details=c.toString().match(/.*?: (.*?) =/)[1],A.roll2CritSuccess=20===c.rolls[0][0],A.roll2CritFail=1===c.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",A)}}]),t}(l.a.Component),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.character,t=O.getProficiencyBonus(e);return l.a.createElement("div",{className:"proficiency"},l.a.createElement("div",{className:"proficiency-title"},"Proficiency"),l.a.createElement("div",{className:"proficiency-modifier"},l.a.createElement("div",{className:"proficiency-symbol"},"+"),l.a.createElement("div",{className:"proficiency-number"},t)))}}]),t}(l.a.Component),D=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){for(var e=this.props.character.speed||{walk:0},t=[],a=0,r=Object.keys(e);a<r.length;a++){var n=r[a];t.push(l.a.createElement("div",{className:"speed-container",key:n},l.a.createElement("div",{className:"speed-popup-wrap"},l.a.createElement("span",{className:"speed-number"},e[n]),l.a.createElement("span",{className:"speed-unit"},"ft.")),l.a.createElement("div",{className:"speed-type"},n)))}return l.a.createElement("div",{className:"speed"},l.a.createElement("div",{className:"speed-title"},"Speed"),l.a.createElement("div",{className:"speed-container"},l.a.createElement("span",{className:"speed-number"},e.walk),l.a.createElement("span",{className:"speed-unit"},"ft.")),l.a.createElement("div",{className:"speed-popup"},l.a.createElement("div",{className:"speed-title"},"Speed"),t))}}]),t}(l.a.Component),P=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=O.getInitiativeModifier(t);return l.a.createElement("div",{className:"initiative",onClick:function(t){return e.handleClick(t,0)}},l.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),l.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),l.a.createElement("div",{className:"initiative-title"},"Initiative"),l.a.createElement("div",{className:"initiative-modifier"},l.a.createElement("div",{className:"initiative-symbol"},a<0?"-":"+"),l.a.createElement("div",{className:"initiative-number"},Math.abs(a))))}},{key:"handleClick",value:function(e,t){var a=O.getInitiativeModifier(this.props.character),r=(a<0?"":"+")+a,n=new f.DiceRoll("d20"+r),A={type:"roll",rollType:"Initiative",rollName:"Initiative",modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var c=new f.DiceRoll("d20"+r);A.rollAdvantageType=t,A.roll2Total=c.total,A.roll2Details=c.toString().match(/.*?: (.*?) =/)[1],A.roll2CritSuccess=20===c.rolls[0][0],A.roll2CritFail=1===c.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",A)}}]),t}(l.a.Component),B=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.character;return l.a.createElement("div",{className:"ac"},l.a.createElement("div",{className:"ac-title"},"AC"),l.a.createElement("div",{className:"ac-number"},e.ac))}}]),t}(l.a.Component),T=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.character;return l.a.createElement("div",{className:"hp"},l.a.createElement("div",{className:"hp-title"},"Hit Points"),l.a.createElement("div",{className:"hp-current"},l.a.createElement("span",null,e.hp),l.a.createElement("span",{className:"hp-header"},"Current")),l.a.createElement("div",{className:"hp-divider"},"/"),l.a.createElement("div",{className:"hp-max"},l.a.createElement("span",null,e.maxHp),l.a.createElement("span",{className:"hp-header"},"Max")))}}]),t}(l.a.Component);a(690);!function(e){e[e.Text=0]="Text",e[e.DiceRoll=1]="DiceRoll",e[e.Condition=2]="Condition"}(j||(j={})),function(e){e[e.Disadvantage=-1]="Disadvantage",e[e.None=0]="None",e[e.Advantage=1]="Advantage"}(S||(S={}));var x=function(){function e(){Object(n.a)(this,e)}return Object(A.a)(e,null,[{key:"doAction",value:function(t,a,r,n){var A=!1,c={type:"action",title:a.title||a.name,characterName:t.name,results:[]},i=!0,o=!1,s=void 0;try{for(var l,u=a.effects[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var p=l.value,m=e.applyEffect(p,r,A);A=m.crit,c.results.push(m.result)}}catch(h){o=!0,s=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}n("",c)}},{key:"applyEffect",value:function(e,t,a){switch(e.type){case C.ToHit:var r,n,A,c,i=e,o=(i.modifier<0?"":"+")+i.modifier,s={advantage:t,modifier:i.modifier,type:j.DiceRoll,rolls:[]},l=new f.DiceRoll("d20"+o),u=l.toString().match(/.*?: (.*?) =/)[1],p=l.rolls[0][0]===(i.critRange||20),m=1===l.rolls[0][0];return t&&(n=(r=new f.DiceRoll("d20"+o)).toString().match(/.*?: (.*?) =/)[1],A=r.rolls[0][0]===(i.critRange||20),c=1===r.rolls[0][0]),a=t>=0?p||A:p&&A,s.rolls.push({total:l.total,critFail:m,critSuccess:p,details:u,ignore:!!r&&(t>0&&l.total<r.total||l.total>r.total)}),r&&s.rolls.push({total:r.total,critFail:c,critSuccess:A,details:n,ignore:t>0&&l.total>=r.total||l.total<=r.total}),{result:s,crit:a};case C.Damage:var h=e,d=new f.DiceRoll("".concat(h.diceCount*(a?2:1),"d").concat(h.diceSize,"+").concat(h.bonus||0)),g={advantage:S.None,modifier:h.bonus,type:j.DiceRoll,rolls:[]},E=d.toString().match(/.*?: (.*?) =/)[1];return g.rolls.push({critFail:!1,critSuccess:!1,details:E,ignore:!1,total:d.total}),{result:g,crit:a};case C.SavingThrow:var v=e;return{result:{type:j.Condition,condition:"DC ".concat(v.saveDC," ").concat(O.getLongAbilityName(v.saveType)," save"),onSuccess:this.applyEffect(v.onSave,0,a).result,onFailure:this.applyEffect(v.onFail,0,a).result},crit:a};case C.Text:var b=e;return{result:{type:j.Text,text:b.text},crit:a};default:return{result:{type:j.Text,text:"Unexpected attack effect ".concat(e.type,"!")},crit:a}}}}]),e}(),Q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a.handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.attack,a=t.effects.filter(function(e){return e.type===C.ToHit})[0],r=t.effects.filter(function(e){return e.type===C.Damage})[0];return l.a.createElement("div",{className:"attack",onClick:function(t){return e.handleClick(t,0)}},a&&l.a.createElement("div",{className:"popup-advantage",onClick:function(t){return e.handleClick(t,1)}},"A"),void 0!==a&&l.a.createElement("div",{className:"popup-disadvantage",onClick:function(t){return e.handleClick(t,-1)}},"D"),l.a.createElement("div",{className:"attack-name"},l.a.createElement("span",null,t.name)),l.a.createElement("div",{className:"attack-range"},t.range," ft."),l.a.createElement("div",{className:"attack-toHit"},a&&l.a.createElement("div",null,l.a.createElement("div",{className:"attack-toHit-symbol"},a.modifier<0?"-":"+"),l.a.createElement("div",{className:"attack-toHit-number"},Math.abs(a.modifier)))),l.a.createElement("div",{className:"attack-damage"},r&&l.a.createElement("div",null,r.diceCount,"d",r.diceSize,"+",r.bonus||0," ",r.damageType)))}},{key:"handleClick",value:function(e,t){var a=this.props.attack,r=!1,n={type:"action",characterName:this.props.character.name,title:a.name,results:[]},A=!0,c=!1,i=void 0;try{for(var o,s=a.effects[Symbol.iterator]();!(A=(o=s.next()).done);A=!0){var l=o.value,u=x.applyEffect(l,t,r);r=u.crit,n.results.push(u.result)}}catch(p){c=!0,i=p}finally{try{A||null==s.return||s.return()}finally{if(c)throw i}}this.props.sendMessage("",n)}}]),t}(l.a.Component),R=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=O.getAttacks(t).map(function(t){return l.a.createElement(Q,Object.assign({key:t.name,attack:t},e.props))});return l.a.createElement("div",{className:"attacks"},l.a.createElement("div",{className:"attack-container"},l.a.createElement("div",{className:"attack-header"},l.a.createElement("span",{className:"attack-name"},"Attack"),l.a.createElement("span",{className:"attack-range"},"Range"),l.a.createElement("span",{className:"attack-toHit"},"To Hit"),l.a.createElement("span",{className:"attack-damage"},"Damage")),a),l.a.createElement("div",{className:"attacks-title"},"Attacks"))}}]),t}(l.a.Component),M=a(54),_=a.n(M),U=a(70),F=a.n(U),L=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.character,e.item);return l.a.createElement("div",{className:F.a.wrapper},l.a.createElement("span",{className:F.a.name},t.name),l.a.createElement("span",{className:F.a.quantity},t.quantity||"-"),l.a.createElement("span",{className:F.a.weight},t.weight?t.weight+" lb.":"-"),l.a.createElement("span",{className:F.a.notes},t.notes))}}]),t}(l.a.Component),H=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=(this.props.character.equipment||[]).map(function(t,a){return l.a.createElement(L,Object.assign({key:a,item:t},e.props))});return l.a.createElement("div",{className:_.a.equipment},l.a.createElement("div",{className:_.a.wrapper},l.a.createElement("div",{className:_.a.header},l.a.createElement("span",{className:_.a.name},"Name"),l.a.createElement("span",{className:_.a.quantity},"Quantity"),l.a.createElement("span",{className:_.a.weight},"Weight"),l.a.createElement("span",{className:_.a.notes},"Notes")),t),l.a.createElement("div",{className:_.a.title},"Equipment"))}}]),t}(l.a.Component),G=a(76),Y="player_character_asset",K="upload_image",W=a(377),z=a.n(W),J=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,a=e.imageUrl;return t(l.a.createElement("div",{className:z.a.wrapper},l.a.createElement("img",{src:a||"http://placekitten.com/128/128"})))}}]),t}(s.Component),V={canDrop:function(e,t){return!0},hover:function(e,t,a){},drop:function(e,t,a){var r=t.getItem();e.updateCharacter&&e.updateCharacter(e.characterId,Object(v.a)({},e.character,{imageRef:r.imageRef}))}};var q,X=Object(G.DropTarget)(K,V,function(e,t){return{connectDropTarget:e.dropTarget()}})(J),Z=a(82),$=a.n(Z),ee=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.character,e.spell);return l.a.createElement("div",{className:F.a.wrapper},l.a.createElement("span",{className:F.a.name},t.name),l.a.createElement("span",{className:F.a.school},t.school),l.a.createElement("span",{className:F.a.level},t.level))}}]),t}(l.a.Component),te=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.character,a=e.slot,r=(t.spellSlots||{})[a];return r&&r.max?l.a.createElement("div",{className:"column"},l.a.createElement("div",null,a),l.a.createElement("div",null,r.current," / ",r.max)):null}}]),t}(l.a.Component),ae=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=(t.spells||[]).map(function(t,a){return l.a.createElement(ee,Object.assign({key:a,spell:t},e.props))});return l.a.createElement("div",{className:$.a.spells},l.a.createElement("div",{className:$.a.wrapper},l.a.createElement("div",null,"Spell slots:"),l.a.createElement("div",{className:"".concat($.a.slots," row")},l.a.createElement(te,{slot:1,character:t}),l.a.createElement(te,{slot:2,character:t}),l.a.createElement(te,{slot:3,character:t}),l.a.createElement(te,{slot:4,character:t}),l.a.createElement(te,{slot:5,character:t}),l.a.createElement(te,{slot:6,character:t}),l.a.createElement(te,{slot:7,character:t}),l.a.createElement(te,{slot:8,character:t}),l.a.createElement(te,{slot:9,character:t})),l.a.createElement("div",null,"Spells:"),l.a.createElement("div",{className:$.a.header},l.a.createElement("span",{className:$.a.name},"Name"),l.a.createElement("span",{className:$.a.school},"School"),l.a.createElement("span",{className:$.a.level},"Level")),a),l.a.createElement("div",{className:$.a.title},"Spells"))}}]),t}(l.a.Component),re=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=(this.props.character.traits||[]).map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,e.name),l.a.createElement("div",null,e.description))});return l.a.createElement("div",{className:_.a.traits},l.a.createElement("div",{className:_.a.wrapper},e),l.a.createElement("div",{className:_.a.title},"Traits"))}}]),t}(l.a.Component),ne=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=(this.props.character.resources||[]).map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,e.name),l.a.createElement("div",null,e.quantity," / ",e.max))});return l.a.createElement("div",{className:_.a.resources},l.a.createElement("div",{className:_.a.wrapper},e),l.a.createElement("div",{className:_.a.title},"Resources"))}}]),t}(l.a.Component),Ae={0:"none",.5:"half-proficienct",1:"proficient",2:"expertise"},ce=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={newCharacter:JSON.stringify(a.props.character,void 0," ")},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.character,a=e.editPlayerCharacter;return l.a.createElement("div",{className:"column character-sheet ".concat(this.props.popout?"popout":"")},l.a.createElement("div",{className:"character-edit",onClick:function(){return a(t.id)}},"EDIT"),l.a.createElement("div",{className:"row character-details"},l.a.createElement("div",{className:"character-name"},t.name),l.a.createElement("div",{className:"character-image"},l.a.createElement(X,{imageUrl:this.props.image?this.props.image.downloadUrl:t.imageRef,character:t,characterId:t.id,updateCharacter:this.props.updatePlayerCharacter})),l.a.createElement("div",{className:"character-classes"},(t.levels||[]).map(function(e){return"".concat(O.classNameMap[e.className]," ").concat(e.level)}).join(", "))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"ability-container"},l.a.createElement(N,Object.assign({ability:"strength",character:t},this.props)),l.a.createElement(N,Object.assign({ability:"dexterity",character:t},this.props)),l.a.createElement(N,Object.assign({ability:"constitution",character:t},this.props)),l.a.createElement(N,Object.assign({ability:"intelligence",character:t},this.props)),l.a.createElement(N,Object.assign({ability:"wisdom",character:t},this.props)),l.a.createElement(N,Object.assign({ability:"charisma",character:t},this.props))),l.a.createElement(k,Object.assign({character:t},this.props)),l.a.createElement(D,Object.assign({character:t},this.props)),l.a.createElement(T,Object.assign({character:t},this.props))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"save-container"},l.a.createElement(w,Object.assign({ability:"strength",character:t},this.props)),l.a.createElement(w,Object.assign({ability:"dexterity",character:t},this.props)),l.a.createElement(w,Object.assign({ability:"constitution",character:t},this.props)),l.a.createElement(w,Object.assign({ability:"intelligence",character:t},this.props)),l.a.createElement(w,Object.assign({ability:"wisdom",character:t},this.props)),l.a.createElement(w,Object.assign({ability:"charisma",character:t},this.props)),l.a.createElement("div",{className:"section-title"},"Saving Throws"))),l.a.createElement("div",{className:"skill-container"},l.a.createElement(I,Object.assign({skill:"acrobatics",ability:"dexterity",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"animalHandling",ability:"wisdom",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"arcana",ability:"intelligence",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"athletics",ability:"strength",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"deception",ability:"charisma",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"history",ability:"intelligence",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"insight",ability:"wisdom",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"intimidation",ability:"charisma",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"investigation",ability:"intelligence",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"medicine",ability:"wisdom",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"nature",ability:"intelligence",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"perception",ability:"wisdom",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"performance",ability:"charisma",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"persuasion",ability:"charisma",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"religion",ability:"intelligence",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"sleightOfHand",ability:"dexterity",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"stealth",ability:"dexterity",character:t},this.props)),l.a.createElement(I,Object.assign({skill:"survival",ability:"wisdom",character:t},this.props)),l.a.createElement("div",{className:"section-title"},"Skills")),l.a.createElement("div",{className:"column",style:{flex:1}},l.a.createElement("div",{className:"row"},l.a.createElement(P,Object.assign({character:t},this.props)),l.a.createElement(B,Object.assign({character:t},this.props))),l.a.createElement("div",{className:"row"},l.a.createElement(R,Object.assign({character:t},this.props))),l.a.createElement("div",{className:"row"},l.a.createElement(H,Object.assign({character:t},this.props))),l.a.createElement("div",{className:"row"},l.a.createElement(re,Object.assign({character:t},this.props))),l.a.createElement("div",{className:"row"},l.a.createElement(ne,Object.assign({character:t},this.props))))),l.a.createElement("div",null,l.a.createElement(ae,Object.assign({character:t},this.props))))}}]),t}(l.a.Component),ie=a(13),oe=a.n(ie),se=a(22),le=a.n(se),ue=a(23),pe=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character;return l.a.createElement("div",{className:oe.a.ability},l.a.createElement("div",{className:oe.a.abilityTitle},O.getShortAbilityName(a)),l.a.createElement("input",{value:r[a],type:"number",min:0,max:30,placeholder:"10",onChange:function(t){return e.props.updateCharacterProperty(a,t.target.value)}}))}}]),t}(l.a.Component),me=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:oe.a.abilityContainer},l.a.createElement(pe,Object.assign({ability:"strength"},this.props)),l.a.createElement(pe,Object.assign({ability:"dexterity"},this.props)),l.a.createElement(pe,Object.assign({ability:"constitution"},this.props)),l.a.createElement(pe,Object.assign({ability:"intelligence"},this.props)),l.a.createElement(pe,Object.assign({ability:"wisdom"},this.props)),l.a.createElement(pe,Object.assign({ability:"charisma"},this.props)))}}]),t}(l.a.Component),he=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=t.character;return l.a.createElement("div",{className:oe.a.money},l.a.createElement("div",{className:oe.a.moneyTitle},a),l.a.createElement("input",{value:(r.money||{})[a],type:"number",min:0,placeholder:"10",onChange:function(t){return e.props.updateCharacterProperty("money",Object(v.a)({},r.money,Object(E.a)({},a,t.target.value)))}}))}}]),t}(l.a.Component),de=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:oe.a.abilityContainer},l.a.createElement(he,Object.assign({type:"cp"},this.props)),l.a.createElement(he,Object.assign({type:"sp"},this.props)),l.a.createElement(he,Object.assign({type:"gp"},this.props)),l.a.createElement(he,Object.assign({type:"ep"},this.props)),l.a.createElement(he,Object.assign({type:"pp"},this.props)))}}]),t}(l.a.Component),ge=a(24),fe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).prop=void 0,a.heading=void 0,a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=this.prop,r=this.heading,n=[];for(var A in t[a]||[]){var c=A,i=t[a][c];n.push(this.mapItem(c,i))}return l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:oe.a.boldHeading},r),l.a.createElement("div",{className:"".concat(oe.a.column," ").concat(oe.a.center)},n,l.a.createElement("div",{className:oe.a.button,onClick:function(){return e.addItem()}},l.a.createElement(le.a,{path:ue.e,size:1,color:"#ccc"}))))}},{key:"updateItemProperty",value:function(e,t,a){var r=Object(ge.a)(this.props.character[this.prop]);r[e][t]=a,this.props.updateCharacterProperty(this.prop,r)}},{key:"removeItem",value:function(e){var t=Object(ge.a)(this.props.character[this.prop]);t.splice(parseInt(e),1),this.props.updateCharacterProperty(this.prop,t)}},{key:"addItem",value:function(){this.props.updateCharacterProperty(this.prop,[].concat(Object(ge.a)(this.props.character[this.prop]||[]),[{}]))}}]),t}(l.a.Component),Ee=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).prop="levels",a.heading="Levels",a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"mapItem",value:function(e,t){var a=this;return l.a.createElement(ve,{key:e,level:t,updateLevelProperty:function(t,r){return a.updateItemProperty(e,t,r)},removeLevel:function(){return a.removeItem(e)}})}}]),t}(fe),ve=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.level,a=[];for(var r in O.classNameMap)a.push(l.a.createElement("option",{key:r,value:r},O.classNameMap[r]));return l.a.createElement("div",{className:oe.a.level},l.a.createElement("div",{className:oe.a.button,onClick:this.props.removeLevel,style:{background:"#333"}},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("select",{value:t.className,onChange:function(t){return e.props.updateLevelProperty("className",t.target.value)}},a),l.a.createElement("input",{type:"number",min:"1",max:"20",value:t.level,onChange:function(t){return e.props.updateLevelProperty("level",t.target.value)}}))}}]),t}(l.a.Component),be=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:oe.a.row},l.a.createElement("span",null,"Saving throws:"),l.a.createElement(Ce,Object.assign({prop:"strength"},this.props)),l.a.createElement(Ce,Object.assign({prop:"dexterity"},this.props)),l.a.createElement(Ce,Object.assign({prop:"constitution"},this.props)),l.a.createElement(Ce,Object.assign({prop:"intelligence"},this.props)),l.a.createElement(Ce,Object.assign({prop:"wisdom"},this.props)),l.a.createElement(Ce,Object.assign({prop:"charisma"},this.props)))}}]),t}(l.a.Component),Ce=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.character,r=t.prop;return l.a.createElement("div",{className:oe.a.column},l.a.createElement("div",null,O.getShortAbilityName(r)),l.a.createElement("select",{value:(a.saves||{})[r],onChange:function(t){return e.updateSaveProperty(t.target.value)}},l.a.createElement("option",{value:0},"Not proficient"),l.a.createElement("option",{value:.5},"Half proficient"),l.a.createElement("option",{value:1},"Proficient"),l.a.createElement("option",{value:2},"Expertise")))}},{key:"updateSaveProperty",value:function(e){this.props.updateCharacterProperty("saves",Object(v.a)({},this.props.character.saves,Object(E.a)({},this.props.prop,e)))}}]),t}(l.a.Component),ye=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:oe.a.row},l.a.createElement("span",null,"Skills:"),l.a.createElement("div",{className:oe.a.column},l.a.createElement("div",{className:oe.a.row},l.a.createElement(Oe,Object.assign({prop:"acrobatics"},this.props)),l.a.createElement(Oe,Object.assign({prop:"animalHandling"},this.props)),l.a.createElement(Oe,Object.assign({prop:"arcana"},this.props)),l.a.createElement(Oe,Object.assign({prop:"athletics"},this.props)),l.a.createElement(Oe,Object.assign({prop:"deception"},this.props))),l.a.createElement("div",{className:oe.a.row},l.a.createElement(Oe,Object.assign({prop:"history"},this.props)),l.a.createElement(Oe,Object.assign({prop:"insight"},this.props)),l.a.createElement(Oe,Object.assign({prop:"intimidation"},this.props)),l.a.createElement(Oe,Object.assign({prop:"investigation"},this.props)),l.a.createElement(Oe,Object.assign({prop:"medicine"},this.props))),l.a.createElement("div",{className:oe.a.row},l.a.createElement(Oe,Object.assign({prop:"nature"},this.props)),l.a.createElement(Oe,Object.assign({prop:"perception"},this.props)),l.a.createElement(Oe,Object.assign({prop:"performance"},this.props)),l.a.createElement(Oe,Object.assign({prop:"persuasion"},this.props)),l.a.createElement(Oe,Object.assign({prop:"religion"},this.props))),l.a.createElement("div",{className:oe.a.row},l.a.createElement(Oe,Object.assign({prop:"sleightOfHand"},this.props)),l.a.createElement(Oe,Object.assign({prop:"stealth"},this.props)),l.a.createElement(Oe,Object.assign({prop:"survival"},this.props)))))}}]),t}(l.a.Component),Oe=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.character,r=t.prop;return l.a.createElement("div",{className:oe.a.column},l.a.createElement("div",null,O.getLongSkillName(r)),l.a.createElement("select",{value:(a.skills||{})[r],onChange:function(t){return e.updateSkillProperty(t.target.value)}},l.a.createElement("option",{value:0},"Not proficient"),l.a.createElement("option",{value:.5},"Half proficient"),l.a.createElement("option",{value:1},"Proficient"),l.a.createElement("option",{value:2},"Expertise")))}},{key:"updateSkillProperty",value:function(e){this.props.updateCharacterProperty("skills",Object(v.a)({},this.props.character.skills,Object(E.a)({},this.props.prop,e)))}}]),t}(l.a.Component),je=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.effects;return l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"".concat(oe.a.column," ").concat(oe.a.center)},(t||[]).map(function(t,a){return l.a.createElement(Se,{key:a,effect:t,updateEffectProperty:function(t,r){return e.updateEffectProperty(a,t,r)},removeEffect:function(){return e.removeEffect(a)}})}),l.a.createElement("div",{className:oe.a.button,onClick:function(){return e.addEffect()}},l.a.createElement(le.a,{path:ue.e,size:1,color:"#ccc"}))))}},{key:"updateEffectProperty",value:function(e,t,a){var r=Object(ge.a)(this.props.effects);r[e][t]=a,this.props.updateEffects(r)}},{key:"removeEffect",value:function(e){var t=Object(ge.a)(this.props.effects);t.splice(e,1),this.props.updateEffects(t)}},{key:"addEffect",value:function(){this.props.updateEffects([].concat(Object(ge.a)(this.props.effects||[]),[{type:3}]))}}]),t}(l.a.Component),Se=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.effect;a||(a={type:C.Text,text:"No effect"});switch(a.type){case C.ToHit:var r=a;e=l.a.createElement(Ne,Object.assign({toHitEffect:r},this.props));break;case C.Damage:var n=a;e=l.a.createElement(we,Object.assign({damageEffect:n},this.props));break;case C.SavingThrow:var A=a;e=l.a.createElement(Ie,Object.assign({saveEffect:A},this.props));break;case C.Text:var c=a;e=l.a.createElement(ke,Object.assign({textEffect:c},this.props))}return l.a.createElement("div",{className:"".concat(oe.a.effect," ").concat(oe.a.row)},l.a.createElement("div",{className:oe.a.button,onClick:this.props.removeEffect},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("select",{value:a.type,onChange:function(e){return t.props.updateEffectProperty("type",parseInt(e.target.value))}},l.a.createElement("option",{value:C.ToHit},"To Hit"),l.a.createElement("option",{value:C.Damage},"Damage"),l.a.createElement("option",{value:C.SavingThrow},"Saving Throw"),l.a.createElement("option",{value:C.Text},"Text")),e)}}]),t}(l.a.Component),Ne=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toHitEffect,a=e.updateEffectProperty;return l.a.createElement("div",{className:oe.a.effect},l.a.createElement("select",{value:t.ability,onChange:function(e){return a("ability",e.target.value)}},l.a.createElement("option",{value:""},"None"),l.a.createElement("option",{value:"strength"},"Strength"),l.a.createElement("option",{value:"dexterity"},"Dexterity"),l.a.createElement("option",{value:"constitution"},"Constitution"),l.a.createElement("option",{value:"intelligence"},"Intelligence"),l.a.createElement("option",{value:"wisdom"},"Wisdom"),l.a.createElement("option",{value:"charisma"},"Charisma")))}}]),t}(l.a.Component),we=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.damageEffect,a=e.updateEffectProperty;return l.a.createElement("div",{className:oe.a.effect},l.a.createElement("input",{value:t.diceCount,type:"number",onChange:function(e){return a("diceCount",e.target.value)}}),l.a.createElement("select",{value:t.diceSize,onChange:function(e){return a("diceSize",parseInt(e.target.value))}},l.a.createElement("option",{value:4},"d4"),l.a.createElement("option",{value:6},"d6"),l.a.createElement("option",{value:8},"d8"),l.a.createElement("option",{value:10},"d10"),l.a.createElement("option",{value:12},"d12")),"+",l.a.createElement("select",{value:t.ability,onChange:function(e){return a("ability",e.target.value)}},l.a.createElement("option",{value:""},"None"),l.a.createElement("option",{value:"strength"},"Strength"),l.a.createElement("option",{value:"dexterity"},"Dexterity"),l.a.createElement("option",{value:"constitution"},"Constitution"),l.a.createElement("option",{value:"intelligence"},"Intelligence"),l.a.createElement("option",{value:"wisdom"},"Wisdom"),l.a.createElement("option",{value:"charisma"},"Charisma")),"+",l.a.createElement("input",{value:t.bonus,type:"number",onChange:function(e){return a("bonus",parseInt(e.target.value))}}),l.a.createElement("input",{value:t.damageType,onChange:function(e){return a("damageType",e.target.value)}}))}}]),t}(l.a.Component),Ie=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.saveEffect,r=t.updateEffectProperty;return l.a.createElement("div",{className:oe.a.effect},"DC Ability",l.a.createElement("select",{value:a.DCAbility,onChange:function(e){return r("DCability",e.target.value)}},l.a.createElement("option",{value:"strength"},"Strength"),l.a.createElement("option",{value:"dexterity"},"Dexterity"),l.a.createElement("option",{value:"constitution"},"Constitution"),l.a.createElement("option",{value:"intelligence"},"Intelligence"),l.a.createElement("option",{value:"wisdom"},"Wisdom"),l.a.createElement("option",{value:"charisma"},"Charisma")),l.a.createElement("select",{value:a.saveType,onChange:function(e){return r("saveType",e.target.value)}},l.a.createElement("option",{value:"strength"},O.getSaveName("strength")),l.a.createElement("option",{value:"dexterity"},O.getSaveName("dexterity")),l.a.createElement("option",{value:"constitution"},O.getSaveName("constitution")),l.a.createElement("option",{value:"intelligence"},O.getSaveName("intelligence")),l.a.createElement("option",{value:"wisdom"},O.getSaveName("wisdom")),l.a.createElement("option",{value:"charisma"},O.getSaveName("charisma"))),"On save:",l.a.createElement(Se,{effect:a.onSave,removeEffect:function(){},updateEffectProperty:function(t,a){return e.updateInnerEffectProperty("onSave",t,a)}}),"On fail:",l.a.createElement(Se,{effect:a.onFail,removeEffect:function(){},updateEffectProperty:function(t,a){return e.updateInnerEffectProperty("onFail",t,a)}}))}},{key:"updateInnerEffectProperty",value:function(e,t,a){var r=Object(v.a)({},this.props.effect[e]);r[t]=a,this.props.updateEffectProperty(e,r)}}]),t}(l.a.Component),ke=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.textEffect,a=e.updateEffectProperty;return l.a.createElement("div",{className:oe.a.effect},l.a.createElement("textarea",{value:t.text,onChange:function(e){return a("text",e.target.value)}}))}}]),t}(l.a.Component),De=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).prop="spells",a.heading="Spells",a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"mapItem",value:function(e,t){var a=this;return l.a.createElement(Pe,{spell:t,key:e,character:this.props.character,updateItemProperty:function(t,r){return a.updateItemProperty(e,t,r)},removeItem:function(){return a.removeItem(e)}})}}]),t}(fe),Pe=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.spell;return l.a.createElement("div",{className:oe.a.action},l.a.createElement("div",{className:oe.a.button,onClick:this.props.removeItem},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("input",{className:oe.a.italicHeading,value:t.name,placeholder:"Name",onChange:function(t){return e.props.updateItemProperty("name",t.target.value)}}),l.a.createElement("input",{className:oe.a.italicHeading,value:t.school,placeholder:"conjuration",onChange:function(t){return e.props.updateItemProperty("school",t.target.value)}}),l.a.createElement("input",{className:oe.a.italicHeading,value:t.level,type:"number",placeholder:"4",min:"0",max:"9",onChange:function(t){return e.props.updateItemProperty("level",parseInt(t.target.value))}}),l.a.createElement(je,{effects:this.props.spell.effects,updateEffects:function(t){return e.props.updateItemProperty("effects",Object(ge.a)(t))}}))}}]),t}(l.a.Component),Be=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.slot,r=t.character,n=(r.spellSlots||{})[a]||{current:0,max:0};return l.a.createElement("div",{className:oe.a.spellSlot},l.a.createElement("div",{className:oe.a.spellSlotTitle},a),l.a.createElement("input",{value:n.current,type:"number",min:0,onChange:function(t){return e.props.updateCharacterProperty("spellSlots",Object(v.a)({},r.spellSlots,Object(E.a)({},a,Object(v.a)({},r.spellSlots[a]||{},{current:parseInt(t.target.value)||0}))))}}),"/",l.a.createElement("input",{value:n.max,type:"number",min:0,onChange:function(t){return e.props.updateCharacterProperty("spellSlots",Object(v.a)({},r.spellSlots,Object(E.a)({},a,Object(v.a)({},r.spellSlots[a]||{},{max:parseInt(t.target.value)||0}))))}}))}}]),t}(l.a.Component),Te=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:oe.a.abilityContainer},"Spell slots:",l.a.createElement(Be,Object.assign({slot:1},this.props)),l.a.createElement(Be,Object.assign({slot:2},this.props)),l.a.createElement(Be,Object.assign({slot:3},this.props)),l.a.createElement(Be,Object.assign({slot:4},this.props)),l.a.createElement(Be,Object.assign({slot:5},this.props)),l.a.createElement(Be,Object.assign({slot:6},this.props)),l.a.createElement(Be,Object.assign({slot:7},this.props)),l.a.createElement(Be,Object.assign({slot:8},this.props)),l.a.createElement(Be,Object.assign({slot:9},this.props)))}}]),t}(l.a.Component),xe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).prop="traits",a.heading="Traits",a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"mapItem",value:function(e,t){var a=this;return l.a.createElement(Qe,{key:e,trait:t,updateTraitProperty:function(t,r){return a.updateItemProperty(e,t,r)},removeTrait:function(){return a.removeItem(e)}})}}]),t}(fe),Qe=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.trait;return l.a.createElement("div",{className:oe.a.trait},l.a.createElement("div",{className:oe.a.button,onClick:this.props.removeTrait,style:{background:"#333"}},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("input",{value:t.name,onChange:function(t){return e.props.updateTraitProperty("name",t.target.value)}}),l.a.createElement("textarea",{value:t.description,onChange:function(t){return e.props.updateTraitProperty("description",t.target.value)}}))}}]),t}(l.a.Component),Re=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).prop="attacks",a.heading="Innate Attacks",a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"mapItem",value:function(e,t){var a=this;return l.a.createElement(Me,{attack:t,key:e,updateItemProperty:function(t,r){return a.updateItemProperty(e,t,r)},removeItem:function(){return a.removeItem(e)}})}}]),t}(fe),Me=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.attack;return l.a.createElement("div",{className:oe.a.action},l.a.createElement("div",{className:oe.a.button,onClick:this.props.removeItem},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("input",{className:oe.a.italicHeading,value:t.title,placeholder:"Name",onChange:function(t){return e.props.updateItemProperty("title",t.target.value)}}),l.a.createElement("input",{className:oe.a.italicHeading,value:t.range,type:"number",min:"0",placeholder:"range",onChange:function(t){return e.props.updateItemProperty("range",parseInt(t.target.value))}}),l.a.createElement("input",{className:oe.a.italicHeading,value:t.longRange,type:"number",placeholder:"4",min:"0",onChange:function(t){return e.props.updateItemProperty("longRange",parseInt(t.target.value))}}),l.a.createElement(je,{effects:this.props.attack.effects,updateEffects:function(t){return e.props.updateItemProperty("effects",Object(ge.a)(t))}}))}}]),t}(l.a.Component),_e=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).prop="equipment",a.heading="Equipment",a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"mapItem",value:function(e,t){var a=this;return l.a.createElement(Ue,{item:t,key:e,character:this.props.character,updateItemProperty:function(t,r){return a.updateItemProperty(e,t,r)},removeItem:function(){return a.removeItem(e)}})}}]),t}(fe),Ue=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.item,a=[],r=function(r){var n=t.attacks[r];a.push(l.a.createElement(Me,{key:r,attack:n,updateItemProperty:function(t,a){return e.updateAttackProperty(r,t,a)},removeItem:function(){return e.removeAttack(r)}}))};for(var n in t.attacks||[])r(n);return l.a.createElement("div",{className:oe.a.action},l.a.createElement("div",{className:oe.a.button,onClick:this.props.removeItem},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("input",{className:oe.a.italicHeading,value:t.name,placeholder:"Name",onChange:function(t){return e.props.updateItemProperty("name",t.target.value)}}),l.a.createElement("input",{className:oe.a.italicHeading,value:t.weight,type:"number",min:"0",placeholder:"weight",onChange:function(t){return e.props.updateItemProperty("weight",parseInt(t.target.value))}}),a,l.a.createElement("div",{className:oe.a.button,onClick:function(){return e.addAttack()}},l.a.createElement(le.a,{path:ue.e,size:1,color:"#ccc"})))}},{key:"updateAttackProperty",value:function(e,t,a){var r=Object(ge.a)(this.props.item.attacks);r[e][t]=a,this.props.updateItemProperty("attacks",r)}},{key:"removeAttack",value:function(e){var t=Object(ge.a)(this.props.item.attacks);t.splice(parseInt(e),1),this.props.updateItemProperty("attacks",t)}},{key:"addAttack",value:function(){this.props.updateItemProperty("attacks",[].concat(Object(ge.a)(this.props.item.attacks||[]),[{}]))}}]),t}(l.a.Component),Fe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).prop="resources",a.heading="Resources",a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"mapItem",value:function(e,t){var a=this;return l.a.createElement(Le,{key:e,resource:t,updateResourceProperty:function(t,r){return a.updateItemProperty(e,t,r)},removeResource:function(){return a.removeItem(e)}})}}]),t}(fe),Le=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.resource;return l.a.createElement("div",{className:oe.a.resource},l.a.createElement("div",{className:oe.a.button,onClick:this.props.removeResource,style:{background:"#333"}},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("input",{value:t.name,onChange:function(t){return e.props.updateResourceProperty("name",t.target.value)}}),":",l.a.createElement("input",{value:t.quantity,onChange:function(t){return e.props.updateResourceProperty("quantity",parseInt(t.target.value))}}),"/",l.a.createElement("input",{value:t.max,onChange:function(t){return e.props.updateResourceProperty("max",parseInt(t.target.value))}}))}}]),t}(l.a.Component),He=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={newCharacter:Object(v.a)({},a.props.character)},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.state.newCharacter,a=this.update.bind(this);return l.a.createElement("div",{className:"".concat(oe.a.column," character-sheet ").concat(this.props.popout?"popout":"")},l.a.createElement("div",{className:"".concat(oe.a.column," ").concat(oe.a.characterSheet," 'popout'}")},l.a.createElement("div",{className:oe.a.characterImageContainer},l.a.createElement(X,{imageUrl:this.props.image?this.props.image.downloadUrl:t.imageRef,character:t,characterId:t.id,updateCharacter:this.props.updatePlayerCharacter})),l.a.createElement("div",{onClick:function(){return e.abortEditSheet()},className:oe.a.button},l.a.createElement(le.a,{path:ue.a,size:1,color:"#a6792d"})),l.a.createElement("div",{onClick:function(){return e.saveSheet()},className:oe.a.button},l.a.createElement(le.a,{path:ue.b,size:1,color:"#a6792d"})),l.a.createElement("div",{className:oe.a.column},l.a.createElement("input",{value:t.name,placeholder:"Name",onChange:function(t){return e.update("name",t.target.value)}}),l.a.createElement(Ee,{character:t,updateCharacterProperty:a}),l.a.createElement(me,{character:t,updateCharacterProperty:a}),l.a.createElement("div",{className:oe.a.row},l.a.createElement("span",null,"HP:"),l.a.createElement("input",{value:t.hp,type:"number",placeholder:"10",onChange:function(t){return e.update("hp",t.target.value)}}),"/",l.a.createElement("input",{value:t.maxHp,type:"number",placeholder:"20",onChange:function(t){return e.update("maxHp",t.target.value)}})),l.a.createElement("div",{className:oe.a.row},l.a.createElement("span",null,"Hit dice:"),l.a.createElement("input",{value:t.hitDice,type:"number",placeholder:"10",onChange:function(t){return e.update("hitDice",t.target.value)}})),l.a.createElement("div",{className:oe.a.row},l.a.createElement("span",null,"AC:"),l.a.createElement("input",{value:t.ac,type:"number",placeholder:"20",onChange:function(t){return e.update("ac",t.target.value)}})),l.a.createElement(be,{character:t,updateCharacterProperty:a}),l.a.createElement(ye,{character:t,updateCharacterProperty:a})),l.a.createElement(_e,{character:t,updateCharacterProperty:a}),l.a.createElement(De,{character:t,updateCharacterProperty:a}),l.a.createElement(Te,{character:t,updateCharacterProperty:a}),l.a.createElement(Re,{character:t,updateCharacterProperty:a}),l.a.createElement(xe,{character:t,updateCharacterProperty:a}),l.a.createElement(Fe,{character:t,updateCharacterProperty:a}),l.a.createElement(de,{character:t,updateCharacterProperty:a})))}},{key:"update",value:function(e,t){this.setState(function(a){var r={newCharacter:Object(v.a)({},a.newCharacter)};return r.newCharacter[e]=t,r})}},{key:"saveSheet",value:function(){this.props.updatePlayerCharacter(this.props.character.id,this.state.newCharacter),this.props.abortEditPlayerCharacter(this.props.character.id)}},{key:"abortEditSheet",value:function(){this.props.abortEditPlayerCharacter(this.props.character.id)}}]),t}(l.a.Component),Ge=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={editing:!1},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.editing?l.a.createElement(He,this.props):l.a.createElement(ce,this.props);return l.a.createElement("div",{className:"character-sheet popout"}," ",e," ")}}]),t}(l.a.Component),Ye={CHAT:{SYNC:"CHAT.SYNC",SYNC_FAILED:"CHAT.SYNC_FAILED",NEW:{SAVE:"CHAT.NEW.SAVE"}}},Ke=function(e){return{type:Ye.CHAT.SYNC,messages:e}},We=function(e,t){return{type:Ye.CHAT.NEW.SAVE,message:e,data:t}},ze=function(e){return{type:Ye.CHAT.SYNC_FAILED,error:e}},Je={ASSETS:{PLAYERCHARACTER:{SYNC:"ASSETS.PLAYERCHARACTER.SYNC",SYNC_FAILED:"ASSETS.PLAYERCHARACTER.SYNC_FAILED",UPDATE:"ASSETS.PLAYERCHARACTER.UPDATE",NEW:{SAVE:"ASSETS.PLAYERCHARACTER.NEW.SAVE"}},NONPLAYERCHARACTER:{INDEX:{SYNC:"ASSETS.NONPLAYERCHARACTER.INDEX.SYNC",SYNC_FAILED:"ASSETS.NONPLAYERCHARACTER.INDEX.SYNC_FAILED"},FILTER:{TEXT_CHANGE:"ASSETS.NONPLAYERCHARACTER.FILTER.TEXT_CHANGE"},LOAD_FULL:"ASSETS.NONPLAYERCHARACTER.LOAD_FULL",LOAD_FULL_DONE:"ASSETS.NONPLAYERCHARACTER.LOAD_FULL_DONE",SYNC:"ASSETS.NONPLAYERCHARACTER.SYNC",SYNC_FAILED:"ASSETS.NONPLAYERCHARACTER.SYNC_FAILED",UPDATE:"ASSETS.NONPLAYERCHARACTER.UPDATE",NEW:{SAVE:"ASSETS.NONPLAYERCHARACTER.NEW.SAVE"}}}},Ve=function(e){return{type:Je.ASSETS.PLAYERCHARACTER.SYNC,playerCharacters:e}},qe=function(e){return{type:Je.ASSETS.PLAYERCHARACTER.SYNC_FAILED,error:e}},Xe=function(e){return{type:Je.ASSETS.NONPLAYERCHARACTER.INDEX.SYNC,nonPlayerCharactersIndex:e}},Ze=function(e){return{type:Je.ASSETS.NONPLAYERCHARACTER.INDEX.SYNC_FAILED,error:e}},$e=function(e,t){return{type:Je.ASSETS.NONPLAYERCHARACTER.LOAD_FULL_DONE,characterId:e,character:t}},et=function(e,t){return{type:Je.ASSETS.NONPLAYERCHARACTER.UPDATE,characterId:e,character:t}},tt=function(e){return{type:Je.ASSETS.NONPLAYERCHARACTER.NEW.SAVE,nonPlayerCharacterData:e}},at=a(17),rt=a.n(at),nt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character,n=O.getAbilityModifier(r,a);return l.a.createElement("div",{className:rt.a.ability,onClick:function(t){return e.handleClick(t,0)}},l.a.createElement("div",{className:rt.a.abilityTitle},O.getShortAbilityName(a)),l.a.createElement("div",{className:rt.a.rollable},l.a.createElement("div",{className:rt.a.popupAdvantage,onClick:function(t){return e.handleClick(t,1)}},"A"),l.a.createElement("div",{className:rt.a.popupDisadvantage,onClick:function(t){return e.handleClick(t,-1)}},"D"),l.a.createElement("div",null,r[a]," (",n>=0?"+".concat(n):n,")")))}},{key:"handleClick",value:function(e,t){var a=O.getAbilityModifier(this.props.character,this.props.ability),r=(a<0?"":"+")+a,n=new f.DiceRoll("d20"+r),A=O.getLongAbilityName(this.props.ability),c={type:"roll",characterName:this.props.character.name,rollType:"Ability",rollName:A,modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new f.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(l.a.Component),At=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){this.props.character;return l.a.createElement("div",{className:rt.a.abilityContainer},l.a.createElement(nt,Object.assign({ability:"strength"},this.props)),l.a.createElement(nt,Object.assign({ability:"dexterity"},this.props)),l.a.createElement(nt,Object.assign({ability:"constitution"},this.props)),l.a.createElement(nt,Object.assign({ability:"intelligence"},this.props)),l.a.createElement(nt,Object.assign({ability:"wisdom"},this.props)),l.a.createElement(nt,Object.assign({ability:"charisma"},this.props)))}}]),t}(l.a.Component),ct=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.skill,r=(t.character,O.getLongSkillName(a.skill));return l.a.createElement("div",{className:rt.a.skill,onClick:function(t){return e.handleClick(t,0)}},l.a.createElement("span",null,r),l.a.createElement("div",{className:rt.a.rollable},l.a.createElement("div",{className:rt.a.popupAdvantage,onClick:function(t){return e.handleClick(t,1)}},"A"),l.a.createElement("div",{className:rt.a.popupDisadvantage,onClick:function(t){return e.handleClick(t,-1)}},"D"),a.modifier>=0?"+".concat(a.modifier):a.modifier))}},{key:"handleClick",value:function(e,t){var a=this.props.skill.modifier,r=(a<0?"":"+")+a,n=new f.DiceRoll("d20"+r),A=O.getLongSkillName(this.props.skill.skill),c={type:"roll",characterName:this.props.character.name,rollType:"Skill",rollName:A,modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new f.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(l.a.Component),it=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.character;if(!e.skills||!e.skills.length)return null;var t=[];for(var a in e.skills){var r=e.skills[a];t.push(l.a.createElement(ct,Object.assign({key:a,skill:r},this.props)))}return l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:rt.a.boldHeading},"Skills"),t)}}]),t}(l.a.Component),ot=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.character;if(!e.traits||!e.traits.length)return null;var t=[];for(var a in e.traits){var r=e.traits[a];t.push(l.a.createElement("div",{className:rt.a.trait,key:a},l.a.createElement("span",{className:rt.a.italicHeading},r.title,"."),l.a.createElement("span",null,r.description)))}return l.a.createElement("div",null,t)}}]),t}(l.a.Component),st=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.character,r=t.actionProperty;if(!a[r]||!a[r].length)return null;var n=[],A=function(t){var A=a[r][t],c=A.effects.map(function(e,t){switch(e.type){case C.Text:var a=e;return l.a.createElement("span",{key:t},a.text);case C.ToHit:var r=e;return l.a.createElement("span",{key:t},r.modifier," to hit, range ",A.range," ft.");case C.Damage:var n=e;return l.a.createElement("span",{key:t},"Hit: ",n.diceCount,"d",n.diceSize,"+",n.bonus," ",n.damageType," damage.");default:return l.a.createElement("div",{key:t})}});n.push(l.a.createElement("div",{className:rt.a.action,onClick:function(){return e.doAction(A,0)},key:t},l.a.createElement("span",{className:rt.a.italicHeading},A.name,"."),l.a.createElement("span",null,c)))};for(var c in a[r])A(c);return l.a.createElement("div",null,n)}},{key:"doAction",value:function(e,t){x.doAction(this.props.character,e,t,this.props.sendMessage)}}]),t}(l.a.Component),lt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.character;if(!e.senses)return null;var t=[];for(var a in e.senses){var r=e.senses[a];r&&t.push(l.a.createElement("div",{key:a},O.getSenseName(a)," ",r.toString()," ft."))}return l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:rt.a.boldHeading},"Senses"),t)}}]),t}(l.a.Component),ut=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"getFormat",value:function(e,t){return e.speed&&e.speed[t]?"".concat(e.speed[t]," ft. ").concat(O.getSpeedName(t)):""}},{key:"render",value:function(){var e=this.props.character,t=[this.getFormat(e,"walk"),this.getFormat(e,"fly"),this.getFormat(e,"climb"),this.getFormat(e,"swim"),this.getFormat(e,"burrow")].filter(function(e){return e}).join(", ");return l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:rt.a.boldHeading},"Speed"),l.a.createElement("span",null,t))}}]),t}(l.a.Component),pt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.save,r=t.character.saves[a],n=O.getLongAbilityName(a);return l.a.createElement("div",{className:rt.a.save,onClick:function(t){return e.handleClick(t,0)}},l.a.createElement("span",null,n),l.a.createElement("div",{className:rt.a.rollable},l.a.createElement("div",{className:rt.a.popupAdvantage,onClick:function(t){return e.handleClick(t,1)}},"A"),l.a.createElement("div",{className:rt.a.popupDisadvantage,onClick:function(t){return e.handleClick(t,-1)}},"D"),r>=0?"+".concat(r):r))}},{key:"handleClick",value:function(e,t){var a=this.props.character.saves[this.props.save],r=(a<0?"":"+")+a,n=new f.DiceRoll("d20"+r),A=O.getSaveName(this.props.save),c={type:"roll",characterName:this.props.character.name,rollType:"Saving Throw",rollName:A,modifier:r,roll1Total:n.total,roll1Details:n.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:20===n.rolls[0][0],roll1CritFail:1===n.rolls[0][0]};if(t){var i=new f.DiceRoll("d20"+r);c.rollAdvantageType=t,c.roll2Total=i.total,c.roll2Details=i.toString().match(/.*?: (.*?) =/)[1],c.roll2CritSuccess=20===i.rolls[0][0],c.roll2CritFail=1===i.rolls[0][0],e.stopPropagation()}this.props.sendMessage("",c)}}]),t}(l.a.Component),mt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.character;if(!e.saves)return null;var t=[];for(var a in e.saves)e.saves[a]&&t.push(l.a.createElement(pt,Object.assign({key:a,save:a},this.props)));return t.length?l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:rt.a.boldHeading},"Saving Throws"),t):null}}]),t}(l.a.Component),ht=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.character,a=e.editNonPlayerCharacter,r=e.characterId;return l.a.createElement("div",{className:"column ".concat(rt.a.characterSheet," ").concat(this.props.popout?"popout":"")},l.a.createElement("div",{className:rt.a.characterImageContainer},l.a.createElement(X,{imageUrl:this.props.image?this.props.image.downloadUrl:t.imageRef,character:t,characterId:r,updateCharacter:this.props.updateNonPlayerCharacter})),l.a.createElement("div",{className:rt.a.characterName+" row"},l.a.createElement("span",null,t.name),l.a.createElement("div",{onClick:function(){return a(r)},className:rt.a.button},l.a.createElement(se.Icon,{path:ue.d,size:1,color:"#a6792d"}))),l.a.createElement("div",{className:rt.a.characterType},O.getSizeName(t.size)," ",t.class,", ",t.alignment),l.a.createElement("hr",{className:rt.a.divider}),l.a.createElement("div",null,l.a.createElement("span",{className:rt.a.boldHeading},"Armor Class"),l.a.createElement("span",null,t.ac," (",t.acType,")")),l.a.createElement("div",null,l.a.createElement("span",{className:rt.a.boldHeading},"Hit Points"),l.a.createElement("span",null,t.hpDice)),l.a.createElement(ut,this.props),l.a.createElement("hr",{className:rt.a.divider}),l.a.createElement(At,this.props),l.a.createElement("hr",{className:rt.a.divider}),l.a.createElement(mt,this.props),l.a.createElement(it,this.props),t.damageResistances&&l.a.createElement("div",null,l.a.createElement("span",{className:rt.a.boldHeading},"Damage Resistances"),l.a.createElement("span",null,t.damageResistances)),t.damageImmunities&&l.a.createElement("div",null,l.a.createElement("span",{className:rt.a.boldHeading},"Damage Immunities"),l.a.createElement("span",null,t.damageImmunities)),t.conditionImmunities&&l.a.createElement("div",null,l.a.createElement("span",{className:rt.a.boldHeading},"Condition Immunities"),l.a.createElement("span",null,t.conditionImmunities)),l.a.createElement(lt,this.props),l.a.createElement("div",null,l.a.createElement("span",{className:rt.a.boldHeading},"Languages"),l.a.createElement("span",null,t.languages)),l.a.createElement("div",null,l.a.createElement("span",{className:rt.a.boldHeading},"Challenge"),l.a.createElement("span",null,t.cr)),l.a.createElement("hr",{className:rt.a.divider}),l.a.createElement(ot,this.props),t.actions&&t.actions.length&&l.a.createElement("div",null,l.a.createElement("div",{className:rt.a.subheading},"Actions"),l.a.createElement(st,Object.assign({actionProperty:"actions"},this.props))),t.reactions&&t.reactions.length&&l.a.createElement("div",null,l.a.createElement("div",{className:rt.a.subheading},"Reactions"),l.a.createElement(st,Object.assign({actionProperty:"reactions"},this.props))),t.legendaryActions&&t.legendaryActions.length&&l.a.createElement("div",null,l.a.createElement("div",{className:rt.a.subheading},"Legendary Actions"),l.a.createElement("div",{style:{marginBottom:"8px"}},"The ".concat(t.name," can take ").concat(t.legendaryActionCount||1," legendary actions, choosing from the options below. Only one legendary action option can be used at a time and only at the end of another creature's turn. The ").concat(t.name," regains spent legendary actions at the start of its turn.")),l.a.createElement(st,Object.assign({actionProperty:"legendaryActions"},this.props))))}}]),t}(l.a.Component),dt=a(11),gt=a.n(dt),ft=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.skill,a=[];for(var r in O.skillNameMap)a.push(l.a.createElement("option",{key:r,value:r},O.skillNameMap[r]));return l.a.createElement("div",{className:gt.a.skill},l.a.createElement("div",{className:gt.a.button,onClick:this.props.removeSkill,style:{background:"#333"}},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("select",{value:t.skill,onChange:function(t){return e.props.updateSkillProperty("skill",t.target.value)}},a),l.a.createElement("input",{type:"number",min:"-30",max:"+30",value:t.modifier,onChange:function(t){return e.props.updateSkillProperty("modifier",t.target.value)}}))}}]),t}(l.a.Component),Et=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=[],r=function(r){var n=r,A=t.skills[n];a.push(l.a.createElement(ft,{key:n,skill:A,updateSkillProperty:function(t,a){return e.updateSkillProperty(n,t,a)},removeSkill:function(){return e.removeSkill(n)}}))};for(var n in t.skills)r(n);return l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:gt.a.boldHeading},"Skills"),l.a.createElement("div",{className:"".concat(gt.a.column," ").concat(gt.a.center)},a,l.a.createElement("div",{className:gt.a.button,onClick:function(){return e.addSkill()}},l.a.createElement(le.a,{path:ue.e,size:1,color:"#ccc"}))))}},{key:"updateSkillProperty",value:function(e,t,a){var r=Object(ge.a)(this.props.character.skills);r[e][t]=a,this.props.updateCharacterProperty("skills",r)}},{key:"removeSkill",value:function(e){var t=Object(ge.a)(this.props.character.skills);t.splice(parseInt(e),1),this.props.updateCharacterProperty("skills",t)}},{key:"addSkill",value:function(){this.props.updateCharacterProperty("skills",[].concat(Object(ge.a)(this.props.character.skills||[]),[{skill:"acrobatics",modifier:0}]))}}]),t}(l.a.Component),vt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ability,r=t.character;return l.a.createElement("div",{className:gt.a.ability},l.a.createElement("div",{className:gt.a.abilityTitle},O.getShortAbilityName(a)),l.a.createElement("input",{value:r[a],type:"number",min:0,max:30,placeholder:"10",onChange:function(t){return e.props.updateCharacterProperty(a,t.target.value)}}))}}]),t}(l.a.Component),bt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:gt.a.abilityContainer},l.a.createElement(vt,Object.assign({ability:"strength"},this.props)),l.a.createElement(vt,Object.assign({ability:"dexterity"},this.props)),l.a.createElement(vt,Object.assign({ability:"constitution"},this.props)),l.a.createElement(vt,Object.assign({ability:"intelligence"},this.props)),l.a.createElement(vt,Object.assign({ability:"wisdom"},this.props)),l.a.createElement(vt,Object.assign({ability:"charisma"},this.props)))}}]),t}(l.a.Component),Ct=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=(t.character.speed||{})[a]||0;return l.a.createElement("div",{className:gt.a.speed},l.a.createElement("div",{className:gt.a.speedTitle},a," (ft.)"),l.a.createElement("input",{value:r,type:"number",min:0,placeholder:"10",onChange:function(t){return e.props.updateSpeedProperty(a,t.target.value)}}))}}]),t}(l.a.Component),yt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.update.bind(this),t=this.props.character;return l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:gt.a.boldHeading},"Speed"),l.a.createElement("div",{className:"".concat(gt.a.speedContainer," ").concat(gt.a.row)},l.a.createElement(Ct,{type:"walk",character:t,updateSpeedProperty:e}),l.a.createElement(Ct,{type:"fly",character:t,updateSpeedProperty:e}),l.a.createElement(Ct,{type:"climb",character:t,updateSpeedProperty:e}),l.a.createElement(Ct,{type:"swim",character:t,updateSpeedProperty:e}),l.a.createElement(Ct,{type:"burrow",character:t,updateSpeedProperty:e})))}},{key:"update",value:function(e,t){var a=Object(v.a)({},this.props.character.speed);a[e]=t,this.props.updateCharacterProperty("speed",a)}}]),t}(l.a.Component),Ot=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=(t.character.senses||{})[a]||0;return l.a.createElement("div",{className:gt.a.sense},l.a.createElement("div",{className:gt.a.senseTitle},a," (ft.)"),l.a.createElement("input",{value:r,type:"number",min:0,placeholder:"10",onChange:function(t){return e.props.updateSenseProperty(a,t.target.value)}}))}}]),t}(l.a.Component),jt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.update.bind(this),a=this.props.character;return l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:gt.a.boldHeading},"Senses"),l.a.createElement("div",{className:"".concat(gt.a.speedContainer," ").concat(gt.a.row)},l.a.createElement("div",null,l.a.createElement("label",null,"Blind"),l.a.createElement("input",{type:"checkbox",name:"blind",checked:a.senses&&a.senses.blind||!1,onChange:function(t){return e.update("blind",t.target.checked)}})),l.a.createElement(Ot,{type:"darkvision",character:a,updateSenseProperty:t}),l.a.createElement(Ot,{type:"blindsight",character:a,updateSenseProperty:t}),l.a.createElement(Ot,{type:"truesight",character:a,updateSenseProperty:t}),l.a.createElement(Ot,{type:"tremorsense",character:a,updateSenseProperty:t})))}},{key:"update",value:function(e,t){var a=Object(v.a)({},this.props.character.senses);a[e]=t,this.props.updateCharacterProperty("senses",a)}}]),t}(l.a.Component),St=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=(t.character.saves||{})[a]||0;return l.a.createElement("div",{className:gt.a.save},l.a.createElement("div",{className:gt.a.saveTitle},O.getShortAbilityName(a)),l.a.createElement("input",{value:r,type:"number",min:0,placeholder:"10",onChange:function(t){return e.props.updateSaveProperty(a,t.target.value)}}))}}]),t}(l.a.Component),Nt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.update.bind(this),t=this.props.character;return l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:gt.a.boldHeading},"Saving Throws"),l.a.createElement("div",{className:"".concat(gt.a.savesContainer," ").concat(gt.a.row)},l.a.createElement(St,{type:"strength",character:t,updateSaveProperty:e}),l.a.createElement(St,{type:"dexterity",character:t,updateSaveProperty:e}),l.a.createElement(St,{type:"constitution",character:t,updateSaveProperty:e}),l.a.createElement(St,{type:"intelligence",character:t,updateSaveProperty:e}),l.a.createElement(St,{type:"wisdom",character:t,updateSaveProperty:e}),l.a.createElement(St,{type:"charisma",character:t,updateSaveProperty:e})))}},{key:"update",value:function(e,t){var a=Object(v.a)({},this.props.character.saves);a[e]=t,this.props.updateCharacterProperty("saves",a)}}]),t}(l.a.Component),wt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.trait;return l.a.createElement("div",{className:gt.a.trait},l.a.createElement("div",{className:gt.a.button,onClick:this.props.removeTrait},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("input",{className:gt.a.italicHeading,value:t.title,placeholder:"Title",onChange:function(t){return e.props.updateTraitProperty("title",t.target.value)}}),l.a.createElement("textarea",{value:t.description,placeholder:"Description",onChange:function(t){return e.props.updateTraitProperty("description",t.target.value)}}))}}]),t}(l.a.Component),It=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.character,a=[],r=function(r){var n=r,A=t.traits[n];a.push(l.a.createElement(wt,{key:n,trait:A,updateTraitProperty:function(t,a){return e.updateTraitProperty(n,t,a)},removeTrait:function(){return e.removeTrait(n)}}))};for(var n in t.traits)r(n);return l.a.createElement("div",{className:"column"},l.a.createElement("span",{className:gt.a.subheading},"Traits"),l.a.createElement("div",{className:"".concat(gt.a.column," ").concat(gt.a.center)},a,l.a.createElement("div",{className:gt.a.button,onClick:function(){return e.addTrait()}},l.a.createElement(le.a,{path:ue.e,size:1,color:"#ccc"}))))}},{key:"updateTraitProperty",value:function(e,t,a){var r=Object(ge.a)(this.props.character.traits);r[e][t]=a,this.props.updateCharacterProperty("traits",r)}},{key:"removeTrait",value:function(e){var t=Object(ge.a)(this.props.character.traits);t.splice(parseInt(e),1),this.props.updateCharacterProperty("traits",t)}},{key:"addTrait",value:function(){this.props.updateCharacterProperty("traits",[].concat(Object(ge.a)(this.props.character.traits||[]),[{title:"",description:""}]))}}]),t}(l.a.Component),kt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.effect;a||(a={type:C.Text,text:"No effect"});switch(a.type){case C.ToHit:var r=a;e=l.a.createElement(Dt,Object.assign({toHitEffect:r},this.props));break;case C.Damage:var n=a;e=l.a.createElement(Pt,Object.assign({damageEffect:n},this.props));break;case C.SavingThrow:var A=a;e=l.a.createElement(Bt,Object.assign({saveEffect:A},this.props));break;case C.Text:var c=a;e=l.a.createElement(Tt,Object.assign({textEffect:c},this.props))}return l.a.createElement("div",{className:"".concat(gt.a.effect," ").concat(gt.a.row)},l.a.createElement("div",{className:gt.a.button,onClick:this.props.removeEffect},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("select",{value:a.type,onChange:function(e){return t.props.updateEffectProperty("type",parseInt(e.target.value))}},l.a.createElement("option",{value:C.ToHit},"To Hit"),l.a.createElement("option",{value:C.Damage},"Damage"),l.a.createElement("option",{value:C.SavingThrow},"Saving Throw"),l.a.createElement("option",{value:C.Text},"Text")),e)}}]),t}(l.a.Component),Dt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toHitEffect,a=e.updateEffectProperty;return l.a.createElement("div",{className:gt.a.effect},l.a.createElement("input",{value:t.modifier,onChange:function(e){return a("modifier",e.target.value)}}))}}]),t}(l.a.Component),Pt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.damageEffect,a=e.updateEffectProperty;return l.a.createElement("div",{className:gt.a.effect},l.a.createElement("input",{value:t.diceCount,type:"number",onChange:function(e){return a("diceCount",e.target.value)}}),l.a.createElement("select",{value:t.diceSize,onChange:function(e){return a("diceSize",parseInt(e.target.value))}},l.a.createElement("option",{value:4},"d4"),l.a.createElement("option",{value:6},"d6"),l.a.createElement("option",{value:8},"d8"),l.a.createElement("option",{value:10},"d10"),l.a.createElement("option",{value:12},"d12")),"+",l.a.createElement("input",{value:t.bonus,type:"number",onChange:function(e){return a("bonus",e.target.value)}}),l.a.createElement("input",{value:t.damageType,onChange:function(e){return a("damageType",e.target.value)}}))}}]),t}(l.a.Component),Bt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.saveEffect,r=t.updateEffectProperty;return l.a.createElement("div",{className:gt.a.effect},"DC",l.a.createElement("input",{value:a.saveDC,type:"number",onChange:function(e){return r("saveDC",e.target.value)}}),l.a.createElement("select",{value:a.saveType,onChange:function(e){return r("saveType",e.target.value)}},l.a.createElement("option",{value:"strength"},O.getSaveName("strength")),l.a.createElement("option",{value:"dexterity"},O.getSaveName("dexterity")),l.a.createElement("option",{value:"constitution"},O.getSaveName("constitution")),l.a.createElement("option",{value:"intelligence"},O.getSaveName("intelligence")),l.a.createElement("option",{value:"wisdom"},O.getSaveName("wisdom")),l.a.createElement("option",{value:"charisma"},O.getSaveName("charisma"))),"On save:",l.a.createElement(kt,{effect:a.onSave,removeEffect:function(){},updateEffectProperty:function(t,a){return e.updateInnerEffectProperty("onSave",t,a)}}),"On fail:",l.a.createElement(kt,{effect:a.onFail,removeEffect:function(){},updateEffectProperty:function(t,a){return e.updateInnerEffectProperty("onFail",t,a)}}))}},{key:"updateInnerEffectProperty",value:function(e,t,a){var r=Object(v.a)({},this.props.effect[e]);r[t]=a,this.props.updateEffectProperty(e,r)}}]),t}(l.a.Component),Tt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.textEffect,a=e.updateEffectProperty;return l.a.createElement("div",{className:gt.a.effect},l.a.createElement("textarea",{value:t.text,onChange:function(e){return a("text",e.target.value)}}))}}]),t}(l.a.Component),xt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.effects;return l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"".concat(gt.a.column," ").concat(gt.a.center)},(t||[]).map(function(t,a){return l.a.createElement(kt,{key:a,effect:t,updateEffectProperty:function(t,r){return e.updateEffectProperty(a,t,r)},removeEffect:function(){return e.removeEffect(a)}})}),l.a.createElement("div",{className:gt.a.button,onClick:function(){return e.addEffect()}},l.a.createElement(le.a,{path:ue.e,size:1,color:"#ccc"}))))}},{key:"updateEffectProperty",value:function(e,t,a){var r=Object(ge.a)(this.props.effects);r[e][t]=a,this.props.updateEffects(r)}},{key:"removeEffect",value:function(e){var t=Object(ge.a)(this.props.effects);t.splice(e,1),this.props.updateEffects(t)}},{key:"addEffect",value:function(){this.props.updateEffects([].concat(Object(ge.a)(this.props.effects||[]),[{type:3}]))}}]),t}(l.a.Component),Qt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.action;return l.a.createElement("div",{className:gt.a.action},l.a.createElement("div",{className:gt.a.button,onClick:this.props.removeAction},l.a.createElement(le.a,{path:ue.c,size:1,color:"#ccc"})),l.a.createElement("input",{className:gt.a.italicHeading,value:t.name,placeholder:"Name",onChange:function(t){return e.props.updateActionProperty("name",t.target.value)}}),l.a.createElement(xt,{effects:t.effects,updateEffects:function(t){return e.props.updateActionProperty("effects",Object(ge.a)(t))}}))}},{key:"removeEffect",value:function(e){var t=Object(ge.a)(this.props.action.effects);t.splice(parseInt(e),1),this.props.updateActionProperty("effects",t)}},{key:"addEffect",value:function(){this.props.updateActionProperty("effects",[].concat(Object(ge.a)(this.props.action.effects||[]),[{type:"3",text:""}]))}}]),t}(l.a.Component),Rt=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.character,r=t.actionProperty,n=[],A=function(t){var A=t,c=a[r][A];n.push(l.a.createElement(Qt,{key:A,action:c,updateActionProperty:function(t,a){return e.updateActionProperty(A,t,a)},removeAction:function(){return e.removeAction(A)}}))};for(var c in a[r]||[])A(c);return l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"".concat(gt.a.column," ").concat(gt.a.center)},n,l.a.createElement("div",{className:gt.a.button,onClick:function(){return e.addAction()}},l.a.createElement(le.a,{path:ue.e,size:1,color:"#ccc"}))))}},{key:"updateActionProperty",value:function(e,t,a){var r=Object(ge.a)(this.props.character[this.props.actionProperty]);r[e][t]=a,this.props.updateCharacterProperty(this.props.actionProperty,r)}},{key:"removeAction",value:function(e){var t=Object(ge.a)(this.props.character[this.props.actionProperty]);t.splice(parseInt(e),1),this.props.updateCharacterProperty(this.props.actionProperty,t)}},{key:"addAction",value:function(){this.props.updateCharacterProperty(this.props.actionProperty,[].concat(Object(ge.a)(this.props.character[this.props.actionProperty]||[]),[{title:"",description:""}]))}}]),t}(l.a.Component),Mt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={newCharacter:Object(v.a)({},a.props.character)},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.state.newCharacter,a=this.update.bind(this);return l.a.createElement("div",{className:"column character-sheet ".concat(this.props.popout?"popout":"")},l.a.createElement("div",{className:"column ".concat(gt.a.characterSheet," 'popout'}")},l.a.createElement("div",{className:gt.a.characterImageContainer},l.a.createElement(X,{imageUrl:this.props.image?this.props.image.downloadUrl:t.imageRef,character:t,characterId:this.props.characterId,updateCharacter:this.props.updateNonPlayerCharacter})),l.a.createElement("div",{className:gt.a.characterName+" row"},l.a.createElement("input",{value:t.name,placeholder:"Name",onChange:function(t){return e.update("name",t.target.value)}}),l.a.createElement("div",{onClick:function(){return e.abortEditSheet()},className:gt.a.button},l.a.createElement(se.Icon,{path:ue.a,size:1,color:"#a6792d"})),l.a.createElement("div",{onClick:function(){return e.saveSheet()},className:gt.a.button},l.a.createElement(se.Icon,{path:ue.b,size:1,color:"#a6792d"}))),l.a.createElement("div",{className:gt.a.characterType},l.a.createElement("select",{value:t.size,placeholder:"Class",onChange:function(t){return e.update("size",t.target.value)}},l.a.createElement("option",{value:r.Tiny},"Tiny"),l.a.createElement("option",{value:r.Small},"Small"),l.a.createElement("option",{value:r.Medium},"Medium"),l.a.createElement("option",{value:r.Large},"Large"),l.a.createElement("option",{value:r.Huge},"Huge"),l.a.createElement("option",{value:r.Gargantuan},"Gargantuan")),l.a.createElement("input",{value:t.class,placeholder:"Class",onChange:function(t){return e.update("class",t.target.value)}}),l.a.createElement("input",{value:t.alignment,placeholder:"Alignment",onChange:function(t){return e.update("alignment",t.target.value)}})),l.a.createElement("hr",{className:gt.a.divider}),l.a.createElement("div",null,l.a.createElement("span",{className:gt.a.boldHeading},"Armor Class"),l.a.createElement("span",null,l.a.createElement("input",{value:t.ac,type:"number",min:"0",onChange:function(t){return e.update("ac",t.target.value||0)}}),l.a.createElement("input",{value:t.acType,placeholder:"natural armor",onChange:function(t){return e.update("acType",t.target.value)}}))),l.a.createElement("div",null,l.a.createElement("span",{className:gt.a.boldHeading},"Hit Points"),l.a.createElement("span",null,l.a.createElement("input",{value:t.hpDice,placeholder:"8d10 + 40",onChange:function(t){return e.update("hpDice",t.target.value)}}))),l.a.createElement(yt,{updateCharacterProperty:a,character:t}),l.a.createElement("hr",{className:gt.a.divider}),l.a.createElement(bt,{updateCharacterProperty:a,character:t}),l.a.createElement("hr",{className:gt.a.divider}),l.a.createElement(Nt,{updateCharacterProperty:a,character:t}),l.a.createElement(Et,{updateCharacterProperty:a,character:t}),l.a.createElement("div",null,l.a.createElement("span",{className:gt.a.boldHeading},"Damage Resistances"),l.a.createElement("input",{value:t.damageResistances,placeholder:"cold",onChange:function(t){return e.update("damageResistances",t.target.value)}})),l.a.createElement("div",null,l.a.createElement("span",{className:gt.a.boldHeading},"Damage Immunities"),l.a.createElement("input",{value:t.damageImmunities,placeholder:"cold",onChange:function(t){return e.update("damageImmunities",t.target.value)}})),l.a.createElement("div",null,l.a.createElement("span",{className:gt.a.boldHeading},"Condition Immunities"),l.a.createElement("input",{value:t.conditionImmunities,placeholder:"poisoned",onChange:function(t){return e.update("conditionImmunities",t.target.value)}})),l.a.createElement(jt,{updateCharacterProperty:a,character:t}),l.a.createElement("div",null,l.a.createElement("span",{className:gt.a.boldHeading},"Languages"),l.a.createElement("input",{value:t.languages,placeholder:"Common",onChange:function(t){return e.update("languages",t.target.value)}})),l.a.createElement("div",null,l.a.createElement("span",{className:gt.a.boldHeading},"Challenge"),l.a.createElement("input",{value:t.cr,placeholder:"1/2",onChange:function(t){return e.update("cr",t.target.value)}})),l.a.createElement("hr",{className:gt.a.divider}),l.a.createElement(It,{updateCharacterProperty:a,character:t}),l.a.createElement("div",{className:gt.a.subheading},"Actions"),l.a.createElement(Rt,{updateCharacterProperty:a,character:t,actionProperty:"actions"}),l.a.createElement("div",{className:gt.a.subheading},"Reactions"),l.a.createElement(Rt,{updateCharacterProperty:a,character:t,actionProperty:"reactions"}),l.a.createElement("div",{className:gt.a.subheading},"Legendary Actions"),l.a.createElement("label",null,"Number of legendary actions:"),l.a.createElement("input",{value:t.legendaryActionCount,type:"number",min:1,onChange:function(t){return e.update("legendaryActionCount",t.target.value)}}),l.a.createElement(Rt,{updateCharacterProperty:a,character:t,actionProperty:"legendaryActions"})))}},{key:"update",value:function(e,t){this.setState(function(a){var r={newCharacter:Object(v.a)({},a.newCharacter)};return r.newCharacter[e]=t,r})}},{key:"saveSheet",value:function(){this.props.updateNonPlayerCharacter(this.props.characterId,this.state.newCharacter),this.props.abortEditNonPlayerCharacter(this.props.characterId)}},{key:"abortEditSheet",value:function(){this.props.abortEditNonPlayerCharacter(this.props.characterId)}}]),t}(l.a.Component),_t=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={editing:!1},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.editing?l.a.createElement(Mt,this.props):l.a.createElement(ht,this.props);return l.a.createElement("div",{className:"character-sheet popout"}," ",e," ")}}]),t}(l.a.Component),Ut={CHARACTERS:{EDIT_SHEET:"CHARACTERS.EDIT_SHEET",ABORT_EDIT_SHEET:"CHARACTERS.ABORT_EDIT_SHEET"}},Ft=function(e){return{type:Ut.CHARACTERS.EDIT_SHEET,characterId:e}},Lt=function(e){return{type:Ut.CHARACTERS.ABORT_EDIT_SHEET,characterId:e}},Ht=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.maybeFetchData()}},{key:"componentDidUpdate",value:function(){this.maybeFetchData()}},{key:"maybeFetchData",value:function(){var e=this;this.props.playerCharacters.find(function(t){return t.id===e.props.popout})||this.props.nonPlayerCharacters[this.props.popout]||this.props.loadFullNonPlayerCharacter(this.props.popout)}},{key:"render",value:function(){var e=this,t=this.props,a=t.popout,r=t.images,n=t.playerCharacters,A=t.nonPlayerCharacters,c=t.editingCharacterSheets;if(a){var i=n.find(function(t){return t.id===e.props.popout});if(i){var o=r.find(function(e){return e.filePath===i.imageRef});return l.a.createElement(Ge,Object.assign({key:a,character:i,popout:"popout",image:o,editing:c.some(function(e){return e===i.id})},this.props))}var s=A[this.props.popout];if(s){var u=r.find(function(e){return e.filePath===s.imageRef});return l.a.createElement(_t,Object.assign({key:a,character:s,characterId:this.props.popout,popout:"popout",image:u,editing:c.some(function(t){return t===e.props.popout})},this.props))}}return l.a.createElement("div",null,[])}}]),t}(s.Component),Gt=Object(d.c)(function(e){return{playerCharacters:e.assets.playerCharacters,nonPlayerCharactersIndex:e.assets.nonPlayerCharactersIndex,nonPlayerCharacters:e.assets.nonPlayerCharacters,editingCharacterSheets:e.characters.editingCharacterSheets,images:e.images.images}},function(e){return{sendMessage:function(t,a){return e(We(t,a))},updatePlayerCharacter:function(t,a){return e(function(e,t){return{type:Je.ASSETS.PLAYERCHARACTER.UPDATE,characterId:e,character:t}}(t,a))},editPlayerCharacter:function(t){return e(Ft(t))},abortEditPlayerCharacter:function(t){return e(Lt(t))},updateNonPlayerCharacter:function(t,a){return e(et(t,a))},editNonPlayerCharacter:function(t){return e(Ft(t))},loadFullNonPlayerCharacter:function(t){return e(function(e){return{type:Je.ASSETS.NONPLAYERCHARACTER.LOAD_FULL,characterId:e}}(t))},abortEditNonPlayerCharacter:function(t){return e(Lt(t))}}})(Ht),Yt={STORAGE:{SEND_FILE:"STORAGE.SEND_FILE",SEND_FILE_SUCCESS:"STORAGE.SEND_FILE_SUCCESS",SEND_FILE_FAILURE:"STORAGE.SEND_FILE_FAILURE",SEND_FILE_PROGRESS:"STORAGE.SEND_FILE_PROGRESS"}},Kt=function(e){return{type:Yt.STORAGE.SEND_FILE_PROGRESS,progress:e}},Wt=function(){return{type:Yt.STORAGE.SEND_FILE_SUCCESS}},zt=function(e){return{type:Yt.STORAGE.SEND_FILE_FAILURE,error:e}},Jt=a(21),Vt=a(66),qt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleHitAreaTypeChange=function(e){a.setState({hitAreaType:e.target.value})},a.state={uploadName:"",file:null,hitAreaType:"default"},a.onUpload=a.onUpload.bind(Object(g.a)(a)),a.onChangeFile=a.onChangeFile.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"onChangeFile",value:function(e){var t=e.target.files[0];this.setState({file:t})}},{key:"onUpload",value:function(e){this.state.file&&(this.state.uploadName&&0!==this.state.uploadName.length&&new RegExp(/^[a-z0-9_-]+$/,"i").test(this.state.uploadName)&&this.props.onUpload(this.state.uploadName,this.state.file))}},{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",{className:t.wrapper},l.a.createElement(Jt.k,{label:"Upload Name",onChange:function(t){return e.setState({uploadName:t.target.value})},disabled:this.props.inProgress,margin:"normal"}),l.a.createElement(Jt.e,{onChange:this.onChangeFile,type:"file",margin:"dense"}),l.a.createElement(Jt.a,{className:t.button,variant:"contained",onClick:this.onUpload,disabled:this.props.inProgress,color:"primary"},"Upload"),l.a.createElement(Jt.b,{className:t.formControl},l.a.createElement(Jt.f,{htmlFor:"hitAreaType"},"Hit Area Type"),l.a.createElement(Jt.i,{value:this.state.hitAreaType,onChange:this.handleHitAreaTypeChange,inputProps:{name:"hitAreaType",id:"hitAreaType"}},l.a.createElement(Jt.h,{value:"default"},"Default (Bounds)"),l.a.createElement(Jt.h,{value:"circle"},"Circle"))),l.a.createElement(Jt.g,{value:this.props.progress,variant:"determinate",color:"secondary"}))}}]),t}(s.Component),Xt=Object(Vt.withStyles)(function(e){return{wrapper:{display:"flex",flexDirection:"column",padding:"5px"},button:{marginTop:"10px",marginBottom:"10px"}}})(qt);!function(e){e.DEFAULT="default",e.CIRCLE="circle"}(q||(q={}));var Zt,$t=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement(Xt,{onUpload:this.props.sendFile,progress:this.props.uploadProgress,inProgress:this.props.uploading})}}]),t}(s.Component),ea=Object(d.c)(function(e){return{uploadProgress:e.storage.uploadProgress,uploading:e.storage.uploading}},function(e){return{sendFile:function(t,a){return e(function(e,t,a){return{type:Yt.STORAGE.SEND_FILE,name:e,file:t,hitAreaType:a}}(t,a,q.DEFAULT))}}})($t),ta=a(165),aa=a.n(ta),ra=a(97),na=a.n(ra),Aa={LOGIN:{REQUEST:"LOGIN.REQUEST",SUCCESS:"LOGIN.SUCCESS",FAILURE:"LOGIN.FAILURE"},LOGOUT:{REQUEST:"LOGOUT.REQUEST",SUCCESS:"LOGOUT.SUCCESS",FAILURE:"LOGOUT.FAILURE"},DM:{SET:"AUTH.DM.SET"}},ca=function(e,t){return{type:Aa.LOGIN.REQUEST,username:e,password:t}},ia=function(e){return{type:Aa.LOGIN.SUCCESS,user:e}},oa=function(e){return{type:Aa.LOGIN.FAILURE,error:e}},sa=function(){return{type:Aa.LOGOUT.SUCCESS}},la=function(e){return{type:Aa.LOGOUT.FAILURE,error:e}},ua=a(378),pa=a.n(ua),ma=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={username:"",password:""},a.updateState=a.updateState.bind(Object(g.a)(a)),a.login=a.login.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"updateState",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"login",value:function(){0!==this.state.username.length&&0!==this.state.password.length&&this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedIn;t.logout;return a?l.a.createElement("div",null):l.a.createElement("div",{className:pa.a.wrapper},l.a.createElement(na.a,{label:"Username",onChange:function(t){return e.updateState("username",t.target.value)},value:this.state.username,margin:"normal"}),l.a.createElement(na.a,{label:"Password",onChange:function(t){return e.updateState("password",t.target.value)},value:this.state.password,margin:"normal",onKeyUp:function(t){13===t.keyCode&&e.login()}}),l.a.createElement(aa.a,{variant:"contained",color:"primary",onClick:function(){return e.login()}},"Login"))}}]),t}(s.PureComponent),ha=Object(d.c)(function(e){return{loggedIn:e.auth.loggedIn}},function(e){return{login:function(t,a){return e(ca(t,a))},logout:function(){return e({type:Aa.LOGOUT.REQUEST})}}})(ma),da=a(59),ga=a(15),fa=a(81),Ea=a(396);!function(e){e[e.VISIBLE=0]="VISIBLE",e[e.DM_VISIBLE=1]="DM_VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(Zt||(Zt={}));var va=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).layerName=void 0,a.mapObjectId=void 0,a.onUpdateObject=void 0,a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"innerApplyProps",value:function(e,t,a){a.position!==t.position&&(new fa.list).add(new fa.to(e,{x:a.position.x,y:a.position.y},300,{ease:"easeInOutCubic"}));if(a.pivot!==t.pivot&&e.pivot.set(a.pivot?a.pivot.x:.5,a.pivot?a.pivot.y:.5),a.scale!==t.scale&&e.scale.set(a.scale?a.scale.x:1,a.scale?a.scale.y:1),a.visibility!==t.visibility)switch(a.visibility){case Zt.DM_VISIBLE:e.visible=!0,e.alpha=.4;break;case Zt.HIDDEN:e.visible=!1;break;default:e.visible=!0}}}]),t}(ga.Container),ba=a(168),Ca=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).dragGrabOffset=void 0,a.dragging=void 0,a.dragData=void 0,a.dragLocked=void 0,a.clickedAvailable=void 0,a.hoverFilters=[new ba.a(4,16711680)],a.dragFilters=[],a.interactive=!0,a.buttonMode=!0,a.isSelected=!1,a.isSelectable=!0,a.onSelected=void 0,a.dragStartPosition=void 0,a.onDragStart=function(e){if(a.isSelectable){a.alpha=.7,a.dragging=!0,a.dragData=e.data,a.dragGrabOffset=new ga.Point(e.data.getLocalPosition(e.currentTarget).x*e.currentTarget.scale.x,e.data.getLocalPosition(e.currentTarget).y*e.currentTarget.scale.y),a.clickedAvailable=!0,a.dragStartPosition=new ga.Point(e.data.global.x,e.data.global.y);var t=a.getChildByName("sprite");t&&(t.filters=[].concat(Object(ge.a)(t.filters||[]),Object(ge.a)(a.dragFilters)))}},a.onDragEnd=function(e){if(a.isSelectable&&(e.stopPropagation(),a.alpha=1,a.dragData&&a.dragging)){var t=a.dragData.getLocalPosition(e.currentTarget.parent);a.dragGrabOffset&&(t.x-=a.dragGrabOffset.x,t.y-=a.dragGrabOffset.y),a.isSelectable&&a.clickedAvailable&&a.onSelected&&(a.isSelected||a.onSelected(a.mapObjectId)),a.dragging=!1,a.dragData=null,a.dragGrabOffset=null,a.dragStartPosition=null,a.clickedAvailable=!1,a.filters&&(a.filters=a.filters.filter(function(e){return!(a.dragFilters.indexOf(e)>=0)})),a.onUpdateObject&&a.onUpdateObject(a.mapObjectId,{position:t})}},a.onDragMove=function(e){if(a.dragging){var t=a.dragData.getLocalPosition(e.currentTarget.parent);a.x=t.x-(a.dragGrabOffset?a.dragGrabOffset.x:0),a.y=t.y-(a.dragGrabOffset?a.dragGrabOffset.y:0),a.clickedAvailable=!1}},a.onMouseOver=function(e){var t=a.getChildByName("sprite");t&&a.isSelectable&&(t.filters=a.hoverFilters)},a.onMouseOut=function(e){var t=a.getChildByName("sprite");t&&a.isSelectable&&(t.filters=null)},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"innerApplyProps",value:function(e,a,r){this.isSelectable=r.isSelectable,this.interactive=!!r.isSelectable,Object(Ea.a)(Object(i.a)(t.prototype),"innerApplyProps",this).call(this,e,a,r)}}]),t}(va);Ca.clickThreshold=.1;var ya=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(c.a)(this,Object(i.a)(t).call(this))).hp=void 0,e.hpMax=void 0,e.ac=void 0,e.alwaysShowText=!1,e._barGraphic=void 0,e._barText=void 0,e._barAc=void 0,e._barWidth=void 0,e._barHeight=void 0,e._showText=!1,e._lastTargetWidth=0,e.redraw=function(t){if(e.hpMax){var a=e.hp/e.hpMax;e._lastTargetWidth=t||e._lastTargetWidth;var r=Math.max(200,e._lastTargetWidth);e._barWidth=r,e._barHeight=20,e._barGraphic.clear().beginFill(0).drawRect(0,0,r,20).endFill(),e._barGraphic.beginFill(6406189).drawRect(1,1,r*a-2,18).endFill(),e._barGraphic.beginFill(16777215,.3).drawRect(1,1,r*a-2,3).endFill().beginFill(0,.3).drawRect(1,16,r*a-2,3).endFill(),e._barGraphic.beginFill(0,.9);for(var n=15;n<e.hp;n+=15)n%60?e._barGraphic.drawRect(n/e.hpMax*r-.5,0,1,20):e._barGraphic.drawRect(n/e.hpMax*r-1,0,2,20);e._barGraphic.endFill(),e._barGraphic.hitArea=new ga.Rectangle(0,0,r,20),e._barText.position.set(r/2,10),e._barText.text="".concat(e.hp,"/").concat(e.hpMax),e._barText.style.fill="white",e._barText.visible=e._showText,e._barAc.position.set(r/2,0),e._barAc.text="".concat(e.ac||"")}else e._barText.text=""},e.onAdded=function(){e.on("mouseover",e.onMouseOver,Object(g.a)(e)),e.on("mouseout",e.onMouseOut,Object(g.a)(e))},e.onRemoved=function(){e.off("mouseover"),e.off("mouseout")},e.onMouseOver=function(t){e._showText=!0,e.redraw()},e.onMouseOut=function(t){e._showText=!1,e.redraw()},e._barGraphic=new ga.Graphics,e._barText=new ga.Text(e.hpMax?"".concat(e.hp,"/").concat(e.hpMax):"",new ga.TextStyle({fontSize:18,fontWeight:"bold"})),e._barAc=new ga.Text(e.ac?"".concat(e.ac):"",new ga.TextStyle({fill:"#fff",fontSize:30})),e._barText.anchor.set(.5,.5),e._barAc.anchor.set(.5,1),e.interactive=!0,e.addChild(e._barGraphic),e.addChild(e._barText),e.addChild(e._barAc),e.on("added",e.onAdded),e.on("removed",e.onRemoved),e}return Object(o.a)(t,e),Object(A.a)(t,[{key:"barWidth",get:function(){return this._barWidth}},{key:"barHeight",get:function(){return this._barHeight}}]),t}(ga.Container),Oa=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),t}(Ca),ja=Object(da.PixiComponent)("Token",{create:function(e){var t=new Oa;t.isSelectable=e.isSelectable||!0,t.onSelected=e.onSelected,t.onUpdateObject=e.onUpdateObject,t.layerName=e.layerName,t.mapObjectId=e.mapObjectId,t.dragLocked=!1;var a=new ga.Sprite(e.resource);e.isCircleHitarea?a.hitArea=new ga.Circle(0,0,a.width/2):e.customHitArea&&(a.hitArea=e.customHitArea),a.name="sprite",a.width=200,a.height=200;var r=new ya;return r.name="healthbar",t.addChild(a),t.addChild(r),t},applyProps:function(e,t,a){var r=e.getChildByName("healthbar"),n=e.getChildByName("sprite");(e.innerApplyProps(e,t,a),a.resource!==t.resource&&n&&(n.texture=a.resource),a.anchor!==t.anchor&&n&&n.anchor.set(a.anchor?a.anchor.x:.5,a.anchor?a.anchor.y:.5),a.rotation!==t.rotation)&&(new fa.list).add(new fa.to(n,{rotation:a.rotation||0},300,{ease:"easeInOutCubic"}));if(a.ac!==t.ac){r.ac=a.ac,r.redraw(n.width);r.position.set(-r.barWidth/2,-n.height/2-r.barHeight-10)}if(a.hp!==t.hp){r.hp=a.hp.value,r.hpMax=a.hp.max,r.redraw(n.width);r.position.set(-r.barWidth/2,-n.height/2-r.barHeight-10)}a.isSelected!==t.isSelected&&n&&(n.tint=a.isSelected&&!t.isSelected?255:16777215)},didMount:function(e,t){e.on("mousedown",e.onDragStart),e.on("mouseup",e.onDragEnd),e.on("mouseupoutside",e.onDragEnd),e.on("mousemove",e.onDragMove),e.on("mouseover",e.onMouseOver),e.on("mouseout",e.onMouseOut),e.on("click",function(e){})},willUnmount:function(e,t){e.off("mousedown"),e.off("mouseup"),e.off("mouseupoutside"),e.off("mousemove"),e.off("mouseover"),e.off("mouseout"),e.off("click")}}),Sa=Object(da.PixiComponent)("Scenery",{create:function(e){var t=new ga.Sprite(e.resource);t.name="sprite";var a=new Ca;return a.addChild(t),a.hoverFilters=[new ba.a(4,65280)],a.isSelectable=e.isSelectable||!0,a.onSelected=e.onSelected,a.onUpdateObject=e.onUpdateObject,a.layerName=e.layerName,a.mapObjectId=e.mapObjectId,a},applyProps:function(e,t,a){var r=e.getChildByName("sprite");(e.innerApplyProps(e,t,a),a.resource!==t.resource&&r&&(r.texture=a.resource),a.anchor!==t.anchor&&r&&r.anchor.set(a.anchor?a.anchor.x:.5,a.anchor?a.anchor.y:.5),a.rotation!==t.rotation)&&(new fa.list).add(new fa.to(r,{rotation:a.rotation||0},300,{ease:"easeInOutCubic"}));a.isSelected!==t.isSelected&&r&&(r.tint=a.isSelected&&!t.isSelected?255:16777215)},didMount:function(e,t){e.on("mousedown",e.onDragStart),e.on("mouseup",e.onDragEnd),e.on("mouseupoutside",e.onDragEnd),e.on("mousemove",e.onDragMove),e.on("mouseover",e.onMouseOver),e.on("mouseout",e.onMouseOut)},willUnmount:function(e,t){e.off("mousedown"),e.off("mouseup"),e.off("mouseupoutside"),e.off("mousemove"),e.off("mouseover"),e.off("mouseout")}}),Na=function(e,t,a){return(Math.pow(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),.5)/a/40).toFixed(1)},wa=Object(da.PixiComponent)("Ruler",{create:function(e){var t=new ga.Container,a=new ga.Graphics;a.name="ruler";var r=e.color||16711680;e.measuring&&(a.lineStyle(e.thickness||20,r).moveTo(e.start.x,e.start.y).lineTo(e.end.x,e.end.y),a.beginFill(r),a.drawCircle(e.start.x,e.start.y,3*e.thickness),a.endFill()),t.visible=e.visible;var n=new ga.Text(e.distance||"",{fill:"white"});return n.name="distanceText",t.addChild(a),t.addChild(n),t},applyProps:function(e,t,a){var r=e.getChildByName("ruler"),n=e.getChildByName("distanceText");r.clear();var A=a.color||16711680;if(a.measuring&&a.start&&a.end){var c=r.toLocal(a.start),i=r.toLocal(a.end);r.beginFill(A,.8),r.drawCircle(c.x,c.y,a.thickness),r.endFill(),r.lineStyle(a.thickness||20,A).moveTo(c.x,c.y).lineTo(i.x,i.y),n.position.set(i.x,i.y),n.style.fontSize=2*a.thickness}a.distance!==t.distance&&(n.text=a.distance||""),e.visible=a.visible},didMount:function(e,t){},willUnmount:function(e,t){}}),Ia=a(98),ka=a.n(Ia),Da=a(379),Pa=a.n(Da),Ba=Object(da.PixiComponent)("Viewport",{create:function(e){var t=new Pa.a({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:1e3,worldHeight:1e3,divWheel:e.app?e.app.renderer.plugins.interaction.interactionDOMElement:null,interaction:e.app?e.app.renderer.plugins.interaction:null});return t.name=e.name||"viewport",t.drag({mouseButtons:"right"}).pinch().wheel({smooth:5}).decelerate(),t},applyProps:function(e,t,a){t.app,a.app}}),Ta=a(380),xa=a.n(Ta),Qa=a(381),Ra=a.n(Qa),Ma=a(382),_a=a.n(Ma),Ua=a(383),Fa=a.n(Ua),La=a(384),Ha=a.n(La),Ga=a(385),Ya=a.n(Ga),Ka=Object(da.PixiComponent)("Ping",{create:function(e){var t=new ga.Container;t.pivot.set(.5,.5),t.position.set(e.position.x,e.position.y);var a=[ga.Texture.fromImage(xa.a),ga.Texture.fromImage(Ra.a),ga.Texture.fromImage(_a.a),ga.Texture.fromImage(Fa.a),ga.Texture.fromImage(Ha.a),ga.Texture.fromImage(Ya.a)],r=new ga.extras.AnimatedSprite(a);return r.anchor.set(.5,.5),r.animationSpeed=.1,r.tint=16711680,r.play(),t.addChild(r),t},applyProps:function(e,t,a){},didMount:function(e,t){},willUnmount:function(e,t){}}),Wa=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).state={loadingAssets:!0,loadProgress:0,app:null,measuring:!1,measureStart:null,measureEnd:null,measuredDistance:null},a.app=void 0,a.root=void 0,a._viewport=void 0,a._stage=void 0,a._mainWrapper=void 0,a.loader=ga.loader,a.loadAssets=function(e,t,r){if(t.loadingAssets&&!a.state.loadingAssets&&a._viewport&&a._viewport.fitWorld(),r||a.props.mapData&&!e.mapData||a.props.mapData&&a.props.mapData.objects!==e.mapData.objects){a.loader.resources.__missing__||a.loader.add("__missing__","http://placekitten.com/128/128");var n=Object.keys(a.props.mapData.objects).map(function(e){var t=a.props.mapData.objects[e],r=t.pcId?a.props.playerCharacters.find(function(e){return e.id===t.pcId}):null,n=t.npcId?a.props.nonPlayerCharacters[t.npcId]:null,A=t&&t.imageRef?t.imageRef:r?r.imageRef:n&&n.imageRef||"__missing__";if(!!a.loader.resources[A])return null;var c=a.props.images.find(function(e){return e.filePath===A});return{name:A,url:c?c.downloadUrl:A,loadType:2}}).filter(function(e){return e}),A=Array.from(new Set(n.map(function(e){return e.name}))).map(function(e){return Object(v.a)({},n.find(function(t){return t.name===e}))});a.loader.add(A),a.loader.load(function(){a.setState({loadingAssets:!1})}),a.loader.onProgress.add(function(e){return a.setState({loadProgress:e.progress})})}},a.onMapMount=function(e){a.setState({app:e}),e.stage.hitArea=new ga.Rectangle(0,0,e.renderer.width/e.renderer.resolution,e.renderer.height/e.renderer.resolution),e.stage.interactive=!0,e.stage.on("mousedown",function(e){if(e.target.name===a._viewport.name&&(!a.state.measuring&&a.props.onSelectObject&&a.props.selectedObjects.length>0&&a.props.onSelectObject(null),a.state.measuring&&a.setState({measureStart:e.data.global.clone(),measureEnd:e.data.global.clone(),measuredDistance:"0"}),!a.state.measuring)){var t=a._viewport.toLocal(e.data.global);a.props.sendPing({position:t.clone(),userId:a.props.user.uid})}}),e.stage.on("mousemove",function(e){a.state.measuring&&a.state.measureStart&&a.setState({measureEnd:e.data.global.clone(),measuredDistance:"".concat(Na(a.state.measureStart,a.state.measureEnd,a._viewport.scale.x)," ft.")})}),e.stage.on("mouseup",function(e){a.state.measuring&&a.setState({measureStart:null,measureEnd:null,measuredDistance:null})})},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.loadAssets(this.props,this.state,!0)}},{key:"componentDidUpdate",value:function(e,t){this.loadAssets(e,t,!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.playerCharacters,n=t.nonPlayerCharacters,A=t.selectedObjects;if(this.state.loadingAssets)return l.a.createElement("div",{className:ka.a.loadingWrapper},l.a.createElement("div",{className:ka.a.loadingText},"LOADING..."),l.a.createElement(Jt.g,{variant:"determinate",value:this.state.loadProgress}));if(!this.props.mapData)return l.a.createElement("div",null,"No Map");var c=this.props.mapData,i=(c.objects,c.backgroundColour),o=this.props.mapData.layers,s=(o.background,o.tokens,this.props.isUserDm),u=this.props,p=u.connectDropTarget,m=null;u.isHovering&&(m=l.a.createElement("div",{className:ka.a.dragAddObjectWrapper},l.a.createElement("div",{className:ka.a.dragAddObjectText},"+")));var h,d=(h=this.props.mapData)&&h.objects?Object.keys(h.objects).reduce(function(e,t){var a=h.objects[t].layer;return e[a]||(e[a]=[]),e[a].push(Object(v.a)({},h.objects[t],{id:t})),e},{}):{},g=function(e,t){return d[e].zIndex<d[t].zIndex?-1:d[e].zIndex>d[t].zIndex?1:0};return p(l.a.createElement("div",{ref:function(t){return e._mainWrapper=t}},m,l.a.createElement("div",{className:ka.a.measureToolWrapper},l.a.createElement("div",{className:ka.a.squaredOne},l.a.createElement("span",null,"Measure Tool"),l.a.createElement("input",{type:"checkbox",value:"None",id:"squaredOne",name:"check",checked:this.state.measuring,onChange:function(t){return e.setState({measuring:t.target.checked})}}),l.a.createElement("label",{htmlFor:"squaredOne"}))),l.a.createElement(da.Stage,{ref:function(t){return e._stage=t},onMount:this.onMapMount,width:window.innerWidth,height:window.innerHeight,options:{antialias:!0,backgroundColor:i?parseInt(i.slice(1),16):16777215}},l.a.createElement(da.AppConsumer,null,function(t){return l.a.createElement(Ba,{name:"viewport",ref:function(t){return e._viewport=t},app:t},Object.keys(e.props.mapPings).map(function(t){var a=e.props.mapPings[t];return l.a.createElement(Ka,{key:t,position:new ga.Point(a.position.x,a.position.y)})}),Object.keys(d).sort(g).reverse().map(function(t){var c=d[t];return l.a.createElement(da.Container,{key:t,name:"layer-".concat(t)},c.map(function(t){var c=!!t.pcId,i=!!t.npcId,o=t.pcId?a.find(function(e){return e.id===t.pcId}):null,u=t.npcId?n[t.npcId]:null,p=o&&o.imageRef?o.imageRef:u&&u.imageRef?u.imageRef:t.imageRef||"__missing__",m=ga.loader.resources[p]&&ga.loader.resources[p].texture,h=!!A.find(function(e){return e===t.id}),d=t.dmOnly||!1,g=s||!1,f=t.layer,E=d?g?Zt.DM_VISIBLE:Zt.HIDDEN:Zt.VISIBLE,v=c||i,b=o||u,C=t.scale;if(b){var y=(b.size||"").toString();switch(parseInt(y)){case r.Tiny:C={x:.5,y:.5};break;case r.Small:case r.Medium:C={x:1,y:1};break;case r.Large:C={x:2,y:2};break;case r.Huge:C={x:3,y:3};break;case r.Gargantuan:C={x:4,y:4}}}return v?l.a.createElement(ja,{key:t.id,resource:m,hp:o?{value:o.hp,max:o.maxHp}:void 0,ac:b&&b.ac||void 0,position:t.position,scale:C,rotation:t.rotation,pivot:t.pivot,anchor:t.anchor,onUpdateObject:function(t,a){return e.props.onUpdateObject(e.props.mapData.id,t,a)},isSelected:h,isSelectable:!e.state.measuring,onSelected:e.props.onSelectObject,mapObjectId:t.id,layerName:f,visibility:E}):l.a.createElement(Sa,{key:t.id,position:t.position,scale:t.scale,rotation:t.rotation,pivot:t.pivot,anchor:t.anchor,resource:m,onUpdateObject:function(t,a){return e.props.onUpdateObject(e.props.mapData.id,t,a)},isSelected:h,isSelectable:!e.state.measuring,onSelected:e.props.onSelectObject,mapObjectId:t.id,layerName:f,visibility:E})}))}),l.a.createElement(wa,{visible:e.state.measuring,measuring:e.state.measuring,start:e.state.measureStart,end:e.state.measureEnd,distance:e.state.measuredDistance,thickness:e._viewport?1/e._viewport.scale.x*15:20,color:16711680}))}))))}}]),t}(s.Component),za={canDrop:function(e,t){return!0},hover:function(e,t,a){},drop:function(e,t,a){var r=t.getItem(),n=t.getItemType(),A=t.getClientOffset(),c=a._viewport.toLocal(new ga.Point(A.x,A.y));switch(n){case Y:e.onAddAssetToMap&&e.mapData&&e.onAddAssetToMap(e.mapData.id,r.assetType,r.id,{position:{x:c.x,y:c.y}});break;case K:e.onAddImageToMap&&e.mapData&&e.onAddImageToMap(e.mapData.id,r.imageRef,{position:{x:c.x,y:c.y}})}}};var Ja=Object(G.DropTarget)([Y,K],za,function(e,t){return{connectDropTarget:e.dropTarget(),itemType:t.getItemType(),isHovering:t.isOver()}})(Wa),Va={MAPS:{SYNC:{SUCCESS:"MAPS.SYNC.SUCCESS",ERROR:"MAPS.SYNC.ERROR"},UPDATE:{OBJECT:"MAPS.UPDATE.OBJECT",BACKGROUND_COLOUR:"MAPS.UPDATE.BACKGROUND_COLOUR"},REMOVE:{OBJECT:"MAPS.REMOVE.OBJECT"},ASSET:{ADD:"MAPS.ASSET.ADD"},IMAGE:{ADD:"MAPS.IMAGE.ADD"},SELECT:{OBJECT:"MAPS.SELECT.OBJECT"}}},qa=function(e){return{type:Va.MAPS.SYNC.SUCCESS,maps:e}},Xa=function(e){return{type:Va.MAPS.SYNC.ERROR,error:e}},Za=function(e,t,a){return{type:Va.MAPS.UPDATE.OBJECT,mapId:e,mapObjectId:t,newData:a}},$a=function(e){return{type:Va.MAPS.SELECT.OBJECT,mapObjectId:e}},er={MAP_PINGS:{SYNC:{NEW_PING:"MAP_PINGS.SYNC.NEW_PING",FAILURE:"MAP_PINGS.SYNC.FAILURE"},SEND_PING:"MAP_PINGS.SEND_PING",ADD_PING:"MAP_PINGS.ADD_PING",REMOVE_PING:"MAP_PINGS.REMOVE_PING"}},tr=function(e){return{type:er.MAP_PINGS.SYNC.NEW_PING,ping:e}},ar=function(e){return{type:er.MAP_PINGS.SYNC.FAILURE,error:e}},rr=function(e,t){return{type:er.MAP_PINGS.ADD_PING,uniqueId:e,ping:t}},nr=function(e){return{type:er.MAP_PINGS.REMOVE_PING,uniqueId:e}},Ar=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.maps,a=e.activeMapId,r=e.selectedObjects,n=e.onUpdateObject,A=e.onSelectObject,c=e.onAddAssetToMap,i=e.onAddImageToMap,o=e.playerCharacters,s=e.nonPlayerCharacters,u=e.images,p=e.isUserDm,m=e.user,h=e.sendPing,d=e.mapPings,g=t?t.find(function(e){return e.id===a}):null;return g?l.a.createElement(Ja,{updateSpriteLocation:function(){},mapData:g,selectedObjects:r,playerCharacters:o,nonPlayerCharacters:s,onUpdateObject:n,onAddAssetToMap:c,onAddImageToMap:i,onSelectObject:A,images:u,isUserDm:p,user:m,sendPing:h,mapPings:d}):l.a.createElement("div",null,"No Map")}}]),t}(s.Component),cr=Object(d.c)(function(e){return{selectedObjects:e.maps.selectedObjects,images:e.images.images,playerCharacters:e.assets.playerCharacters,nonPlayerCharacters:e.assets.nonPlayerCharacters,isUserDm:e.auth.isDm,user:e.auth.user,maps:e.maps.maps,activeMapId:e.globalState.state?e.globalState.state.activeMapId:null,mapPings:e.mapPings.pings}},function(e){return{onUpdateObject:function(t,a,r){return e(Za(t,a,r))},onAddAssetToMap:function(t,a,r,n){return e(function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:Va.MAPS.ASSET.ADD,mapId:e,assetType:t,assetId:a,initialData:r}}(t,a,r,n))},onAddImageToMap:function(t,a,r){return e(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:Va.MAPS.IMAGE.ADD,mapId:e,imageRef:t,initialData:a}}(t,a,r))},onSelectObject:function(t){return e($a(t))},sendPing:function(t){return e(function(e){return{type:er.MAP_PINGS.SEND_PING,ping:e}}(t))}}})(Ar),ir=a(68),or=a(87),sr=a(60),lr=a(394),ur={messages:[],new:{},syncError:null};function pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Ye.CHAT.SYNC:return Object(v.a)({},e,{messages:t.messages});case Ye.CHAT.SYNC_FAILED:return Object(v.a)({},e,{syncError:t.error});default:return e}}var mr={editingCharacterSheets:[]};function hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Ut.CHARACTERS.EDIT_SHEET:return Object(v.a)({},e,{editingCharacterSheets:[].concat(Object(ge.a)(e.editingCharacterSheets.filter(function(e){return e!==t.characterId})),[t.characterId])});case Ut.CHARACTERS.ABORT_EDIT_SHEET:return Object(v.a)({},e,{editingCharacterSheets:Object(ge.a)(e.editingCharacterSheets.filter(function(e){return e!==t.characterId}))});default:return e}}var dr={loading:!1,loggedIn:!1,user:null,loginError:null,isDm:!1};function gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Aa.LOGIN.REQUEST:case Aa.LOGOUT.REQUEST:return Object(v.a)({},e,{loading:!0});case Aa.LOGIN.SUCCESS:return Object(v.a)({},e,{loading:!1,loggedIn:!0,user:t.user,loginError:null});case Aa.LOGIN.FAILURE:return Object(v.a)({},e,{loading:!1,loginError:t.error});case Aa.LOGOUT.SUCCESS:return dr;case Aa.LOGOUT.FAILURE:return Object(v.a)({},e,{loading:!1});case Aa.DM.SET:var a=t;return Object(v.a)({},e,{isDm:a.value});default:return e}}var fr={uploading:!1,url:null,uploadProgress:0,uploadError:null};function Er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Yt.STORAGE.SEND_FILE:return Object(v.a)({},e,{uploading:!0});case Yt.STORAGE.SEND_FILE_SUCCESS:return Object(v.a)({},e,{uploading:!1});case Yt.STORAGE.SEND_FILE_FAILURE:return Object(v.a)({},e,{uploading:!1,uploadError:t.error});case Yt.STORAGE.SEND_FILE_PROGRESS:return Object(v.a)({},e,{uploadProgress:t.progress});default:return e}}var vr={IMAGES:{SYNC:"IMAGES.SYNC",SYNC_FAILED:"IMAGES.SYNC_FAILED"}},br=function(e){return{type:vr.IMAGES.SYNC,images:e}},Cr=function(e){return{type:vr.IMAGES.SYNC_FAILED,error:e}},yr={images:[],syncError:null};function Or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case vr.IMAGES.SYNC:return Object(v.a)({},e,{images:t.images});case vr.IMAGES.SYNC_FAILED:return Object(v.a)({},e,{syncError:t.error});default:return e}}var jr={playerCharacters:[],nonPlayerCharactersIndex:[],nonPlayerCharacters:{},pcSyncError:null,npcSyncError:null,nonPlayerCharacterFilter:""};function Sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Je.ASSETS.PLAYERCHARACTER.SYNC:return Object(v.a)({},e,{playerCharacters:t.playerCharacters});case Je.ASSETS.PLAYERCHARACTER.UPDATE:return Object(v.a)({},e,{playerCharacters:e.playerCharacters.map(function(e){return e.id!==t.characterId?e:t.character})});case Je.ASSETS.NONPLAYERCHARACTER.INDEX.SYNC:return Object(v.a)({},e,{nonPlayerCharactersIndex:t.nonPlayerCharactersIndex});case Je.ASSETS.NONPLAYERCHARACTER.UPDATE:return Object(v.a)({},e,{nonPlayerCharacters:Object(v.a)({},e.nonPlayerCharacters,Object(E.a)({},t.characterId,t.character))});case Je.ASSETS.NONPLAYERCHARACTER.FILTER.TEXT_CHANGE:return Object(v.a)({},e,{nonPlayerCharacterFilter:t.text});case Je.ASSETS.NONPLAYERCHARACTER.LOAD_FULL_DONE:return Object(v.a)({},e,{nonPlayerCharacters:Object(v.a)({},e.nonPlayerCharacters,Object(E.a)({},t.characterId,t.character))});case Je.ASSETS.PLAYERCHARACTER.SYNC_FAILED:return Object(v.a)({},e,{pcSyncError:t.error});case Je.ASSETS.NONPLAYERCHARACTER.INDEX.SYNC_FAILED:return Object(v.a)({},e,{npcSyncError:t.error});default:return e}}var Nr={maps:null,error:null,selectedObjects:[]};function wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Va.MAPS.SYNC.SUCCESS:var a=t;return Object(v.a)({},e,{maps:a.maps});case Va.MAPS.SYNC.ERROR:var r=t;return Object(v.a)({},e,{error:r.error});case Va.MAPS.SELECT.OBJECT:var n=t;return Object(v.a)({},e,{selectedObjects:n.mapObjectId?[n.mapObjectId]:[]});default:return e}}var Ir={UI:{PROPERTY_PANEL:{VISIBILITY:"UI.PROPERTY_PANEL.VISIBILITY"},SIDEBAR:{OPEN:"UI.SIDEBAR.OPEN",CLOSE:"UI.SIDEBAR.CLOSE",TOGGLE:"UI.SIDEBAR.TOGGLE",OPEN_PANEL:"UI.SIDEBAR.OPEN_PANEL"}}},kr={propertyPanel:{visible:!1},sidebarOpen:!1,sidebarPanel:null};function Dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Ir.UI.PROPERTY_PANEL.VISIBILITY:var a=t;return Object(v.a)({},e,{propertyPanel:Object(v.a)({},e.propertyPanel,{visible:a.visible})});case Ir.UI.SIDEBAR.OPEN:return Object(v.a)({},e,{sidebarOpen:!0});case Ir.UI.SIDEBAR.CLOSE:return Object(v.a)({},e,{sidebarOpen:!1});case Ir.UI.SIDEBAR.TOGGLE:return Object(v.a)({},e,{sidebarOpen:!e.sidebarOpen});case Ir.UI.SIDEBAR.OPEN_PANEL:var r=t;return Object(v.a)({},e,{sidebarPanel:r.panel});default:return e}}var Pr={GLOBAL_STATE:{SYNC:{SUCCESS:"GLOBAL_STATE.SYNC.SUCCESS",FAILURE:"GLOBAL_STATE.SYNC.FAILURE"},SET_ACTIVE_MAP:"GLOBAL_STATE.SET_ACTIVE_MAP"}},Br=function(e){return{type:Pr.GLOBAL_STATE.SYNC.SUCCESS,state:e}},Tr=function(e){return{type:Pr.GLOBAL_STATE.SYNC.SUCCESS,error:e}},xr={state:null,syncError:null};function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Pr.GLOBAL_STATE.SET_ACTIVE_MAP:var a=t;return{state:Object(v.a)({},e,{state:Object(v.a)({},e.state,{activeMapId:a.mapId})})};case Pr.GLOBAL_STATE.SYNC.SUCCESS:var r=t;return Object(v.a)({},e,{state:r.state});case Pr.GLOBAL_STATE.SYNC.FAILURE:var n=t;return Object(v.a)({},e,{syncError:n.error});default:return e}}var Rr=a(395);function Mr(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var _r={pings:{}};function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case er.MAP_PINGS.ADD_PING:var a=t;return Object(v.a)({},e,{pings:Object(v.a)({},e.pings,Object(E.a)({},a.uniqueId,a.ping))});case er.MAP_PINGS.REMOVE_PING:var r=t,n=e.pings,A=(n[r.uniqueId],Object(Rr.a)(n,[r.uniqueId].map(Mr)));return Object(v.a)({},e,{pings:A});default:return e}}var Fr=a(12),Lr=a.n(Fr),Hr=a(10),Gr=a(36),Yr=a.n(Gr),Kr=(a(187),a(387)),Wr=a.n(Kr),zr=JSON.parse(localStorage.getItem("firebaseConfig")),Jr=Yr.a.initializeApp(zr),Vr=(Jr.database(),new Wr.a(Jr)),qr=Lr.a.mark($r),Xr=Lr.a.mark(tn),Zr=Lr.a.mark(an);function $r(e){var t,a,r;return Lr.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Hr.select)(function(e){return e.auth.user});case 2:return t=n.sent,a=e.message||"",r=e.data||{},n.next=7,Object(Hr.call)(Vr.database.create,"/chatroom",{sender:t.email,timestamp:Gr.database.ServerValue.TIMESTAMP,msg:a,data:r});case 7:case"end":return n.stop()}},qr)}var en=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(v.a)({},t[e],{id:e})})};function tn(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(Vr.database.sync,Object(Gr.database)(Vr.app).ref("/chatroom").orderByChild("timestamp").limitToLast(100),{successActionCreator:Ke,failureActionCreator:ze,transform:en},"value");case 2:case"end":return e.stop()}},Xr)}function an(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.all)([Object(Hr.fork)(tn),Object(Hr.takeEvery)(Ye.CHAT.NEW.SAVE,$r)]);case 2:case"end":return e.stop()}},Zr)}var rn=Lr.a.mark(on),nn=Lr.a.mark(sn),An=Lr.a.mark(ln),cn=Lr.a.mark(un);new Yr.a.auth.EmailAuthProvider;function on(e){return Lr.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Hr.call)(Vr.auth.signInWithEmailAndPassword,e.username,e.password);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object(Hr.put)(oa(t.t0));case 9:case"end":return t.stop()}},rn,null,[[0,5]])}function sn(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Hr.call)(Vr.auth.signOut);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(Hr.put)(la(e.t0));case 9:case"end":return e.stop()}},nn,null,[[0,5]])}function ln(){var e,t,a;return Lr.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Hr.call)(Vr.auth.channel);case 2:e=r.sent;case 3:return r.next=6,Object(Hr.take)(e);case 6:if(t=r.sent,!(a=t.user)){r.next=13;break}return r.next=11,Object(Hr.put)(ia(a));case 11:r.next=15;break;case 13:return r.next=15,Object(Hr.put)(sa());case 15:r.next=3;break;case 17:case"end":return r.stop()}},An)}function un(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(ln);case 2:return e.next=4,Object(Hr.all)([Object(Hr.takeEvery)(Aa.LOGIN.REQUEST,on),Object(Hr.takeEvery)(Aa.LOGOUT.REQUEST,sn)]);case 4:case"end":return e.stop()}},cn)}var pn=a(243),mn=a.n(pn),hn=Lr.a.mark(En),dn=Lr.a.mark(vn),gn=Lr.a.mark(bn),fn=Object(or.channel)();function En(e){var t,a,r,n;return Lr.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return t="uploads/".concat(e.name,"/").concat(mn()()),(a=Vr.storage.uploadFile(t,e.file)).on("state_changed",function(e){var t=100*e.bytesTransferred/e.totalBytes;console.log("".concat(t,"%")),fn.put(Kt(t))}),A.next=5,a;case 5:return A.prev=5,A.next=8,Object(Hr.call)(Vr.storage.getDownloadURL,t);case 8:return r=A.sent,n={downloadUrl:r,name:e.name,filePath:t,uploadTime:Gr.database.ServerValue.TIMESTAMP},A.next=12,Object(Hr.call)(Vr.database.create,"/uploads",n);case 12:return A.next=14,Object(Hr.put)(Wt());case 14:A.next=21;break;case 16:return A.prev=16,A.t0=A.catch(5),console.error(A.t0),A.next=21,Object(Hr.put)(zt(A.t0));case 21:case"end":return A.stop()}},hn,null,[[5,16]])}function vn(){var e;return Lr.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Hr.take)(fn);case 3:return e=t.sent,t.next=6,Object(Hr.put)(e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},dn)}function bn(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(vn);case 2:return e.next=4,Object(Hr.all)([Object(Hr.takeEvery)(Yt.STORAGE.SEND_FILE,En)]);case 4:case"end":return e.stop()}},gn)}var Cn=Lr.a.mark(jn),yn=Lr.a.mark(Sn),On=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(v.a)({},t[e],{id:e})})};function jn(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(Vr.database.sync,Object(Gr.database)(Vr.app).ref("/uploads").orderByChild("timestamp"),{successActionCreator:br,failureActionCreator:Cr,transform:On},"value");case 2:case"end":return e.stop()}},Cn)}function Sn(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.all)([Object(Hr.fork)(jn)]);case 2:case"end":return e.stop()}},yn)}var Nn,wn=Lr.a.mark(Mn),In=Lr.a.mark(_n),kn=Lr.a.mark(Un),Dn=Lr.a.mark(Fn),Pn=Lr.a.mark(Hn),Bn=Lr.a.mark(Gn),Tn=Lr.a.mark(Yn),xn=Lr.a.mark(Kn),Qn=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(v.a)({},t[e],{id:e})})},Rn=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(v.a)({},t[e],{id:e})})};function Mn(e){var t,a;return Lr.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Hr.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(v.a)({},e.nonPlayerCharacterData,{timestamp:Gr.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(Hr.call)(Vr.database.create,"/nonPlayerCharacters",a);case 6:case"end":return r.stop()}},wn)}function _n(e){var t,a;return Lr.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Hr.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(v.a)({},e.character,{timestamp:Gr.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(Hr.call)(Vr.database.patch,"/playerCharacters/"+e.characterId,a);case 6:case"end":return r.stop()}},In)}function Un(e){var t,a;return Lr.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Hr.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(v.a)({},e.playerCharacterData,{timestamp:Gr.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(Hr.call)(Vr.database.create,"/playerCharacters",a);case 6:case"end":return r.stop()}},kn)}function Fn(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(Vr.database.sync,Object(Gr.database)(Vr.app).ref("/playerCharacters"),{successActionCreator:Ve,failureActionCreator:qe,transform:Qn},"value");case 2:case"end":return e.stop()}},Dn)}function Ln(e){return{name:e.name,cr:e.cr,environments:e.environments}}function Hn(e){var t,a;return Lr.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Hr.select)(function(e){return e.auth.user});case 2:return t=r.sent,a=Object(v.a)({},e.character,{timestamp:Gr.database.ServerValue.TIMESTAMP,creator:t.uid}),r.next=6,Object(Hr.call)(Vr.database.update,"/nonPlayerCharacters/"+e.characterId,a);case 6:return r.next=8,Object(Hr.call)(Vr.database.update,"/nonPlayerCharacterIds/"+e.characterId,Ln(a));case 8:case"end":return r.stop()}},Pn)}function Gn(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(Vr.database.sync,Object(Gr.database)(Vr.app).ref("/nonPlayerCharacterIds"),{successActionCreator:Xe,failureActionCreator:Ze,transform:Rn},"value");case 2:case"end":return e.stop()}},Bn)}function Yn(e){var t;return Lr.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Hr.call)(Vr.database.read,Object(Gr.database)(Vr.app).ref("/nonPlayerCharacters/"+e.characterId));case 2:return t=a.sent,a.next=5,Object(Hr.put)($e(e.characterId,t));case 5:case"end":return a.stop()}},Tn)}function Kn(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.all)([Object(Hr.fork)(Fn),Object(Hr.fork)(Gn),Object(Hr.takeEvery)(Je.ASSETS.PLAYERCHARACTER.UPDATE,_n),Object(Hr.takeEvery)(Je.ASSETS.PLAYERCHARACTER.NEW.SAVE,Un),Object(Hr.takeEvery)(Je.ASSETS.NONPLAYERCHARACTER.UPDATE,Hn),Object(Hr.takeEvery)(Je.ASSETS.NONPLAYERCHARACTER.NEW.SAVE,Mn),Object(Hr.takeEvery)(Je.ASSETS.NONPLAYERCHARACTER.LOAD_FULL,Yn)]);case 2:case"end":return e.stop()}},xn)}!function(e){e[e.PlayerCharacter=0]="PlayerCharacter",e[e.NonPlayerCharacter=1]="NonPlayerCharacter"}(Nn||(Nn={}));var Wn=Lr.a.mark(eA),zn=Lr.a.mark(tA),Jn=Lr.a.mark(aA),Vn=Lr.a.mark(rA),qn=Lr.a.mark(nA),Xn=Lr.a.mark(AA),Zn=Lr.a.mark(cA),$n=function(e){var t=e.value;return Object.keys(t).map(function(e){return Object(v.a)({},t[e],{id:e})})};function eA(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(Vr.database.sync,Object(Gr.database)(Vr.app).ref("/maps"),{successActionCreator:qa,failureActionCreator:Xa,transform:$n},"value");case 2:case"end":return e.stop()}},Wn)}function tA(e){var t,a;return Lr.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.mapId,a=e.colour,r.next=3,Object(Hr.call)(Vr.database.update,"/maps/".concat(t,"/backgroundColour"),a);case 3:case"end":return r.stop()}},zn)}function aA(e){var t,a,r,n,A;return Lr.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.mapId,a=e.assetType,r=e.assetId,n=e.initialData,A=Object(v.a)({anchor:{x:.5,y:.5},pivot:{x:.5,y:.5},name:"New Asset",position:{x:0,y:0},rotation:0,scale:{x:1,y:1},layer:"token"},n||{}),a===Nn.PlayerCharacter?A.pcId=r:a===Nn.NonPlayerCharacter&&(A.npcId=r),c.next=5,Object(Hr.call)(Vr.database.create,"/maps/".concat(t,"/objects"),A);case 5:case"end":return c.stop()}},Jn)}function rA(e){var t,a,r,n;return Lr.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.mapId,a=e.imageRef,r=e.initialData,n=Object(v.a)({anchor:{x:.5,y:.5},pivot:{x:.5,y:.5},name:"New Map Object",position:{x:0,y:0},rotation:0,scale:{x:1,y:1},imageRef:a,layer:"background"},r||{}),A.next=4,Object(Hr.call)(Vr.database.create,"/maps/".concat(t,"/objects"),n);case 4:case"end":return A.stop()}},Vn)}function nA(e){var t,a,r;return Lr.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.mapId,a=e.mapObjectId,r=e.newData,n.next=3,Object(Hr.call)(Vr.database.patch,"/maps/".concat(t,"/objects/").concat(a),r);case 3:case"end":return n.stop()}},qn)}function AA(e){var t,a;return Lr.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.mapId,a=e.mapObjectId,r.next=3,Object(Hr.call)(Vr.database.delete,"/maps/".concat(t,"/objects/").concat(a));case 3:case"end":return r.stop()}},Xn)}function cA(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.all)([Object(Hr.fork)(eA),Object(Hr.takeEvery)(Va.MAPS.UPDATE.BACKGROUND_COLOUR,tA),Object(Hr.takeEvery)(Va.MAPS.ASSET.ADD,aA),Object(Hr.takeEvery)(Va.MAPS.IMAGE.ADD,rA),Object(Hr.takeEvery)(Va.MAPS.REMOVE.OBJECT,AA),Object(Hr.takeEvery)(Va.MAPS.UPDATE.OBJECT,nA)]);case 2:case"end":return e.stop()}},Zn)}var iA=Lr.a.mark(uA),oA=Lr.a.mark(pA),sA=Lr.a.mark(mA),lA=function(e){return e.value};function uA(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(Vr.database.sync,Object(Gr.database)(Vr.app).ref("/globalState"),{successActionCreator:Br,failureActionCreator:Tr,transform:lA},"value");case 2:case"end":return e.stop()}},iA)}function pA(e){return Lr.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hr.call)(Vr.database.update,"/globalState/activeMapId",e.mapId);case 2:case"end":return t.stop()}},oA)}function mA(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.all)([Object(Hr.fork)(uA),Object(Hr.takeEvery)(Pr.GLOBAL_STATE.SET_ACTIVE_MAP,pA)]);case 2:case"end":return e.stop()}},sA)}var hA=a(388),dA=Lr.a.mark(bA),gA=Lr.a.mark(CA),fA=Lr.a.mark(yA),EA=Lr.a.mark(OA),vA=function(e){return e.value};function bA(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.fork)(Vr.database.sync,Object(Gr.database)(Vr.app).ref("/mapPings"),{successActionCreator:tr,failureActionCreator:ar,transform:vA},"child_changed");case 2:case"end":return e.stop()}},dA)}function CA(e){var t;return Lr.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("PING @ ".concat(e.ping.position.x,", ").concat(e.ping.position.y," by userId ").concat(e.ping.userId)),t=Object(hA.v4)(),a.next=4,Object(Hr.put)(rr(t,e.ping));case 4:return a.next=6,Object(Hr.delay)(3e3);case 6:return a.next=8,Object(Hr.put)(nr(t));case 8:case"end":return a.stop()}},gA)}function yA(e){return Lr.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hr.call)(Vr.database.update,"/mapPings/".concat(e.ping.userId),e.ping);case 2:case"end":return t.stop()}},fA)}function OA(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.all)([Object(Hr.fork)(bA),Object(Hr.takeEvery)(er.MAP_PINGS.SYNC.NEW_PING,CA),Object(Hr.takeEvery)(er.MAP_PINGS.SEND_PING,yA)]);case 2:case"end":return e.stop()}},EA)}var jA=Lr.a.mark(SA);function SA(){return Lr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.all)([Object(Hr.fork)(an),Object(Hr.fork)(un),Object(Hr.fork)(bn),Object(Hr.fork)(Sn),Object(Hr.fork)(Kn),Object(Hr.fork)(cA),Object(Hr.fork)(mA),Object(Hr.fork)(OA)]);case 2:case"end":return e.stop()}},jA)}var NA,wA=Object(sr.a)({basename:""}),IA=Object(or.default)(),kA=[IA],DA=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ir.compose).apply(void 0,[ir.applyMiddleware.apply(void 0,kA)].concat([])),PA=Object(ir.createStore)((NA=wA,Object(ir.combineReducers)({router:Object(lr.a)(NA),chat:pr,auth:gr,storage:Er,images:Or,assets:Sr,maps:wr,characters:hr,ui:Dr,globalState:Qr,mapPings:Ur})),{},DA);IA.run(SA);var BA,TA=PA,xA=a(389),QA=a.n(xA),RA=a(172),MA=a(169),_A=a.n(MA),UA=a(170),FA=a.n(UA),LA=a(390),HA=a.n(LA),GA=function(e){return l.a.createElement("div",{style:{backgroundColor:"blue",width:e.width||"16px",height:e.diameter?e.diameter/2:"64px",position:"absolute",left:"50%",transform:"rotate(".concat(e.rotation,"deg) translate(-50%, 0)"),transformOrigin:"0% 100%"}})},YA=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e)))._el=void 0,a.mouseDown=function(e){a.setState({isActive:!0})},a.mouseMove=function(e){a.state.isActive&&a._updateRotation(e)},a.mouseUp=function(e){a.state.isActive&&(a.setState({isActive:!1}),a._updateRotation(e),a.props.rotationChanged&&a.props.rotationChanged(a.state.rotationDeg,a.state.rotationRad))},a._updateRotation=function(e){var t=a._el.clientWidth/2,r=a._el.clientHeight/2;if(e.currentTarget){var n=e.currentTarget.getBoundingClientRect(),A=e.clientX-n.left-t,c=e.clientY-n.top-r,i=Math.atan2(c,A)+Math.PI/2,o=i*(180/Math.PI);a.setState({rotationDeg:o,rotationRad:i})}},a.state={isActive:!1,rotationDeg:(a.props.initialRotationRad||0)*(180/Math.PI),rotationRad:a.props.initialRotationRad||0},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.initialRotationRad!==this.props.initialRotationRad&&this.setState({rotationDeg:(this.props.initialRotationRad||0)*(180/Math.PI),rotationRad:this.props.initialRotationRad||0})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{ref:function(t){return e._el=t},onMouseDown:this.mouseDown,onMouseMove:this.mouseMove,onMouseUp:this.mouseUp,style:Object(v.a)({display:"block",cursor:"grab",position:"relative",backgroundColor:"red",width:this.props.diameter||"128px",height:this.props.diameter||"128px",borderRadius:"50%",overflow:"hidden"},this.props.style)},l.a.createElement(GA,{diameter:this.props.diameter,width:8,rotation:this.state.rotationDeg}))}}]),t}(s.Component),KA=function(e){return l.a.createElement("div",{style:{marginTop:"10px"}},e.children)},WA=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).state={objectId:null,object:null,name:"",rotation:0,layer:null,isPcAsset:!1,isNpcAsset:!1,layers:[],scaleX:1,scaleY:1,isDmOnly:!1},a.handleChange=function(e){return function(t){null!==t.target.value&&a.setState(Object(E.a)({},e,t.target.value))}},a.onChangeIsDm=function(e){a.setState({isDmOnly:!!e.target.checked})},a.removeObject=function(){a.props.removeObject&&a.props.removeObject(a.props.map.id,a.state.objectId)},a.saveChanges=function(){if(a.props.onUpdateObject){if(!a.state.object||!a.state.objectId)return;a.props.onUpdateObject(a.props.map.id,a.state.objectId,{name:a.state.name,rotation:a.state.rotation,layer:a.state.layer,scale:{x:a.state.scaleX,y:a.state.scaleY},dmOnly:a.state.isDmOnly})}},a.updateState=function(e){var t=e.selected,r=e.map,n=t.length>0?t[0]:null,A=n&&r.objects.hasOwnProperty(n)?r.objects[n]:null,c=!!A&&!!A.pcId,i=!!A&&!!A.npcId,o=r&&r.layers?Object.keys(r.layers).map(function(e){return Object(v.a)({},r.layers[e],{id:e})}):[];a.setState({objectId:n,object:A,name:A?A.name:"",rotation:A?A.rotation:0,layer:A?A.layer:null,isPcAsset:c,isNpcAsset:i,layers:o,scaleX:A?A.scale.x:1,scaleY:A?A.scale.y:1,isDmOnly:A&&A.dmOnly||!1})},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.updateState(this.props)}},{key:"componentDidUpdate",value:function(e,t){this.props.map===e.map&&this.props.selected===e.selected||this.updateState(this.props)}},{key:"render",value:function(){var e=this,t=this.props.visible,a=this.state,r=a.object,n=a.name,A=a.rotation,c=a.layers,i=a.scaleX,o=a.scaleY;return t&&r?l.a.createElement(RA.a,{default:{x:5,y:5,width:250,height:510},minWidth:250,minHeight:510,dragHandleClassName:"dragBar",bounds:"window",enableResizing:{bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!1,top:!1,topLeft:!1,topRight:!1}},l.a.createElement("div",{style:{backgroundColor:"rgba(100, 100, 100, 0.8)",border:"2px solid #444",width:"100%",height:"100%",position:"relative",padding:"5px"}},l.a.createElement("div",{className:"dragBar",style:{cursor:"grab",backgroundColor:"#444",height:"36px",width:"calc(100% + 10px)",margin:"-5px -5px"}},l.a.createElement("h1",{style:{display:"inline-block",fontSize:"120%",textDecoration:"underline",paddingLeft:"10px"}},"Properties"),l.a.createElement("div",{style:{padding:2,backgroundColor:"red",textAlign:"center",float:"right",display:"inline-block",width:24,height:24,cursor:"pointer"},onClick:function(){return e.props.close()}},l.a.createElement("span",{style:{}},l.a.createElement(_A.a,null)))),l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement(KA,null,l.a.createElement(Jt.k,{value:n,onChange:this.handleChange("name")})),l.a.createElement(KA,null,"Position = (",r.position.x,", ",r.position.y,")"),l.a.createElement(KA,null,"Rotation",l.a.createElement("input",{type:"number",value:A,onChange:this.handleChange("rotation")}),l.a.createElement(YA,{diameter:64,style:{marginLeft:"auto",marginRight:"auto"},initialRotationRad:A,rotationChanged:function(t,a){e.setState({rotation:a})}})),l.a.createElement(KA,null,"Layer = ",r.layer,l.a.createElement("select",{onChange:this.handleChange("layer")},l.a.createElement("option",{value:null},"---"),c.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.id," (",e.zIndex,")")}))),l.a.createElement(KA,null,l.a.createElement("span",{style:{marginRight:5}},"Scale X"),l.a.createElement("input",{type:"number",value:i,onChange:this.handleChange("scaleX")})),l.a.createElement(KA,null,l.a.createElement("span",{style:{marginRight:5}},"Scale Y"),l.a.createElement("input",{type:"number",value:o,onChange:this.handleChange("scaleY")})),l.a.createElement(KA,null,l.a.createElement(Jt.c,{control:l.a.createElement(Jt.j,{value:this.state.isDmOnly,onChange:this.onChangeIsDm}),label:"DM Only"})),l.a.createElement(Jt.a,{fullWidth:!0,color:"primary",variant:"contained",onClick:this.saveChanges,style:{marginTop:"15px"}},"Save",l.a.createElement(FA.a,null)),l.a.createElement(Jt.a,{fullWidth:!0,color:"secondary",variant:"contained",onClick:this.removeObject,style:{marginTop:"15px"}},"Remove Object",l.a.createElement(HA.a,null))))):l.a.createElement("div",null)}}]),t}(s.Component),zA=a(126),JA=Object(zA.a)(function(e){return e.maps.maps},function(e){return e.globalState.state?e.globalState.state.activeMapId:null},function(e,t){return e&&t?e.find(function(e){return e.id===t}):null}),VA=Object(zA.a)(JA,function(e){return e?e.backgroundColour:null}),qA=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.visible,e.map),a=e.selected,r=e.onUpdateObject,n=e.removeObject,A=e.close,c=e.isUserDm;return l.a.createElement(WA,{visible:a&&a.length>0,selected:a,map:t,onUpdateObject:r,removeObject:n,close:A,isUserDm:c})}}]),t}(s.Component),XA=Object(d.c)(function(e){return{visible:e.ui.propertyPanel.visible,selected:e.maps.selectedObjects,map:JA(e),isUserDm:e.auth.isDm}},function(e){return{onUpdateObject:function(t,a,r){return e(Za(t,a,r))},removeObject:function(t,a){return e(function(e,t){return{type:Va.MAPS.REMOVE.OBJECT,mapId:e,mapObjectId:t}}(t,a))},close:function(){return e($a({mapObjectId:null}))}}})(qA),ZA=a(171),$A=a.n(ZA),ec=(a(880),function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,a=(e.isOwner,t.sender||"unknown");return l.a.createElement("div",{className:"message",key:t.id},l.a.createElement("div",{className:$A.a.username},a," :"),l.a.createElement("div",null,t.msg))}}]),t}(l.a.Component)),tc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e,t=this.props.message,a=t.data;switch(a.rollType){case"Skill":e="roll-skill";break;case"Ability":e="roll-ability";break;case"Initiative":e="roll-initiative";break;case"Attack":e="roll-attack";break;case"Ad-hoc":default:e="roll-adhoc"}var r=a.rollAdvantageType>0&&a.roll1Total<a.roll2Total||a.rollAdvantageType<0&&a.roll1Total>a.roll2Total,n=a.rollAdvantageType&&!r,A=t.data&&t.data.characterName||t.sender;return l.a.createElement("div",{className:"roll-container ".concat(e)},l.a.createElement("div",{className:"roll-header"},l.a.createElement("span",{className:"roll-user"},A),l.a.createElement("span",{className:"roll-type"},a.rollType)),l.a.createElement("div",{className:"roll-title"},l.a.createElement("span",{className:"roll-name"},a.rollName),null!==a.modifier&&void 0!==a.modifier&&l.a.createElement("span",{className:"roll-modifier"},"(",a.modifier,")")),l.a.createElement("div",{className:"roll-rolls"},l.a.createElement("div",{className:"roll-1 ".concat(r?"ignore":"")},l.a.createElement("span",{className:"summary "+(a.roll1CritSuccess?"crit":a.roll1CritFail?"critFail":"")},l.a.createElement("span",{className:"roll-total"},a.roll1Total),l.a.createElement("span",{className:"roll-suffix"},a.rollSuffix)),l.a.createElement("span",{className:"details"},a.roll1Details)),a.roll2Details&&a.rollAdvantageType&&l.a.createElement("div",{className:a.rollAdvantageType>0?"roll-advantage":"roll-disadvantage"},a.rollAdvantageType>0?"A":"D"),a.roll2Details&&l.a.createElement("div",{className:"roll-2 ".concat(n?"ignore":"")},l.a.createElement("span",{className:"summary "+(a.roll2CritSuccess?"crit":a.roll2CritFail?"critFail":"")},l.a.createElement("span",{className:"roll-total"},a.roll2Total),l.a.createElement("span",{className:"roll-suffix"},a.rollSuffix)),l.a.createElement("span",{className:"details"},a.roll2Details))))}}]),t}(l.a.Component),ac=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.result,t=[],a=0,r=!0,n=!1,A=void 0;try{for(var c,i=e.rolls[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var o=c.value;t.push(l.a.createElement("div",{key:a++,className:"roll ".concat(o.ignore?"ignore":"")},l.a.createElement("span",{className:"summary "+(o.critSuccess?"crit":o.critFail?"critFail":"")},l.a.createElement("span",{className:"roll-total"},o.total)),l.a.createElement("span",{className:"details"},o.details))),e.advantage&&t.push(l.a.createElement("div",{key:a++,className:e.advantage===S.Advantage?"roll-advantage":"roll-disadvantage"},e.advantage===S.Advantage?"A":"D"))}}catch(s){n=!0,A=s}finally{try{r||null==i.return||i.return()}finally{if(n)throw A}}return l.a.createElement("div",{className:"roll-rolls"},t)}}]),t}(l.a.Component),rc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.result;return l.a.createElement("div",{className:"text"},e.text)}}]),t}(l.a.Component),nc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.result;return l.a.createElement("div",{className:"column"},l.a.createElement("div",null,e.condition),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"column"},l.a.createElement("div",null,"On success:"),l.a.createElement("div",null,l.a.createElement(Ac,{action:e.onSuccess}))),l.a.createElement("div",{className:"column"},l.a.createElement("div",null,"On failure:"),l.a.createElement("div",null,l.a.createElement(Ac,{action:e.onFailure})))))}}]),t}(l.a.Component),Ac=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.action;switch(e.type){case j.Text:return l.a.createElement(rc,{result:e});case j.DiceRoll:return l.a.createElement(ac,{result:e});case j.Condition:return l.a.createElement(nc,{result:e});default:return l.a.createElement("div",null,"Unknown action type ",e.type,"!")}}}]),t}(l.a.Component),cc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.message,t=e.data,a=[];for(var r in t.results){var n=t.results[r];a.push(l.a.createElement(Ac,{key:r,action:n}))}return l.a.createElement("div",{className:"character-action-container"},l.a.createElement("div",{className:"action-header"},l.a.createElement("span",{className:"action-user"},t.characterName||e.sender)),l.a.createElement("div",{className:"action-title"},l.a.createElement("span",{className:"action-name"},t.title)),t.results.map(function(e,t){return l.a.createElement(Ac,{key:t,action:e})}))}}]),t}(l.a.Component),ic=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).state={msg:"",messages:[],messagesOpen:!0},a.scrollDiv=void 0,a.scrollToBottomOfChat=function(){a.scrollDiv&&(a.scrollDiv.scrollTop=a.scrollDiv.scrollHeight)},a.handleMsgChange=function(e){a.setState({msg:e.target.value})},a.handleKeyDown=function(e){if("Enter"===e.key){if(a.state.msg.match(/^\d*?d(\d+|%)/)){var t=new f.DiceRoll(a.state.msg),r={type:"roll",rollType:"Ad-hoc",rollName:t.notation,modifier:null,roll1Total:t.total,roll1Details:t.toString().match(/.*?: (.*?) =/)[1],roll1CritSuccess:!1,roll1CritFail:!1};a.props.sendMessage("",r)}else a.sendMessage(a.state.msg);a.setState({msg:""})}},a.sendMessage=function(e){a.props.sendMessage(e)},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"componentDidUpdate",value:function(){this.scrollToBottomOfChat()}},{key:"componentDidMount",value:function(){this.scrollToBottomOfChat()}},{key:"render",value:function(){var e=this,t=this.props.messages,a=this.state.messagesOpen;return l.a.createElement("div",{style:{position:"relative",height:"100%",marginTop:"24px"}},l.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},a&&l.a.createElement("div",{className:$A.a.messages,ref:function(t){return e.scrollDiv=t}},t.map(function(t,a){switch(t.data&&t.data.type){case"roll":return l.a.createElement(tc,{message:t,key:a});case"action":return l.a.createElement(cc,{message:t,key:a});default:return l.a.createElement(ec,{message:t,key:a,isOwner:t.sender===e.props.user.email})}})),l.a.createElement("div",{style:{marginBottom:"24px"}},l.a.createElement(na.a,{fullWidth:!0,placeholder:"msg or d20+4 etc",onChange:function(t){return e.handleMsgChange(t)},onKeyDown:function(t){return e.handleKeyDown(t)},value:this.state.msg,variant:"filled",margin:"dense"}))))}}]),t}(l.a.Component),oc=a(46),sc=a.n(oc),lc=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={win:null,el:null},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.state.el;return e?sc.a.createPortal(this.props.children,e):null}},{key:"componentDidMount",value:function(){var e,t,a=this,r=window.open("","","width=600,height=400,left=200,top=200,toolbar=no,menubar=no,scrollbars=yes,resizable=yes"),n=document.createElement("div");r.document.body.appendChild(n),r.document.title=this.props.title||"",e=document,t=r.document,Array.from(e.styleSheets).forEach(function(a){try{if(a.cssRules){var r=e.createElement("style");Array.from(a.cssRules).forEach(function(t){r.appendChild(e.createTextNode(t.cssText))}),t.head.appendChild(r)}else if(a.href){var n=e.createElement("link");n.rel="stylesheet",n.href=a.href,t.head.appendChild(n)}}catch(A){}}),r.addEventListener("beforeunload",function(){return a.props.onClose&&a.props.onClose()}),this.setState({win:r,el:n})}},{key:"componentWillUnmount",value:function(){this.state.win.close()}}]),t}(s.Component),uc=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).state={showWindowPortal:!1},a._chat=void 0,a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.showWindowPortal&&!t.showWindowPortal&&this.forceUpdate()}},{key:"render",value:function(){var e=this,t=l.a.createElement(ic,Object.assign({ref:function(t){return e._chat=t}},this.props));return l.a.createElement("div",{style:{height:"100%"}},this.state.showWindowPortal?l.a.createElement(lc,{title:"Chat",onClose:function(){return e.setState({showWindowPortal:!1})}},t):l.a.createElement(RA.a,{default:{x:0,y:-300,width:"400px",height:"300px"},minWidth:200,minHeight:100,disableDragging:!0,style:{zIndex:9,backgroundColor:"rgba(0, 0, 0, 0.5)"}},l.a.createElement("div",{style:{height:"100%",position:"relative"}},l.a.createElement("div",{style:{height:"100%"}},t,l.a.createElement(Jt.d,{style:{position:"absolute",top:-18,right:5,cursor:"pointer",fontSize:18},onClick:function(){return e.setState({showWindowPortal:!0})}},"open_in_new")))))}}]),t}(s.Component),pc=Object(d.c)(function(e){return{messages:e.chat.messages,loggedIn:e.auth.loggedIn,user:e.auth.user}},function(e){return{sendMessage:function(t,a){return e(We(t,a))},login:function(t,a){return e(ca(t,a))}}})(uc),mc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.onClick,r=e.active;return l.a.createElement("div",{style:{}},l.a.createElement("div",{style:{padding:"50% 0",height:0}},l.a.createElement("div",{style:{display:"block",padding:10,backgroundColor:r?"purple":"red",borderLeft:"1px dashed #444",cursor:"pointer",transform:"rotate(-90deg)",transformOrigin:"left top",textTransform:"uppercase",whiteSpace:"nowrap",textAlign:"center",transition:"background-color 500ms",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",userSelect:"none",marginLeft:"3px"},onClick:function(){return a()}},t)))}}]),t}(s.Component),hc=a(892),dc=a(128),gc=a.n(dc),fc=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).state={in:!1},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.setState({in:!0})},0)}},{key:"render",value:function(){return l.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,padding:"5px",overflowY:"scroll"}},l.a.createElement(hc.a,{in:this.state.in,timeout:500,classNames:{enter:gc.a.enter,enterActive:gc.a.enterActive,exit:gc.a.exit,exitActive:gc.a.exitActive}},l.a.createElement("div",{style:{height:"100%"}},this.props.children)))}}]),t}(s.Component);!function(e){e[e.UPLOAD=0]="UPLOAD",e[e.ASSETS=1]="ASSETS",e[e.GENERAL=2]="GENERAL"}(BA||(BA={}));var Ec=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.upload;return(0,this.props.connectDragSource)(l.a.createElement("img",{src:e.downloadUrl,width:64,height:64}))}}]),t}(s.Component);var vc=Object(G.DragSource)(K,{beginDrag:function(e){return{imageRef:e.upload.filePath}},endDrag:function(e,t,a){t.didDrop()&&(t.getItem(),t.getDropResult())}},function(e,t){return{connectDragSource:e.dragSource()}})(Ec),bc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return this.props.uploads.map(function(e){return l.a.createElement(vc,{key:e.id,upload:e})})}}]),t}(s.Component),Cc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.uploads;return l.a.createElement(bc,{uploads:e})}}]),t}(s.Component),yc=Object(d.c)(function(e){return{uploads:e.images.images}},function(e){return{}})(Cc),Oc=a(127),jc=a.n(Oc),Sc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.asset,a=(e.assetType,e.images.find(function(e){return e.filePath===t.imageRef}));return l.a.createElement("img",{className:jc.a.image,src:a?a.downloadUrl:t.imageUrl||t.imageRef,alt:t.name||"unknown"})}}]),t}(s.Component),Nc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.asset,r=t.assetType,n=t.isDragging,A=t.connectDragSource,c={cursor:"grab",padding:"5px 10px"};return n&&(c.backgroundColor="red"),A(l.a.createElement("div",{className:jc.a.item,style:c},r===Nn.PlayerCharacter&&l.a.createElement(Sc,this.props),l.a.createElement("div",{className:jc.a.title,onClick:function(){return e.onClick(a)}},a.name||"unknown")))}},{key:"onClick",value:function(e){window.open("/#/characterSheet/".concat(e.id),"popupWindow","height=1000,width=800,toolbar=no,location=no,statusbar=no,titlebar=no,directories=no",!1)}}]),t}(s.Component);var wc=Object(G.DragSource)(Y,{beginDrag:function(e){return{id:e.asset.id,assetType:e.assetType}},endDrag:function(e,t,a){t.didDrop()&&(t.getItem(),t.getDropResult())}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Object(Vt.withStyles)(function(e){return{assetItem:{backgroundColor:"transparent","&:hover":{backgroundColor:"green"}},dragging:{backgroundColor:"red"}}})(Nc)),Ic=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.playerCharacters,r=t.nonPlayerCharactersIndex;return l.a.createElement("div",null,l.a.createElement("ul",null,a.map(function(t){return l.a.createElement(wc,Object.assign({asset:t,assetType:Nn.PlayerCharacter,key:t.id},e.props))})),l.a.createElement("hr",null),l.a.createElement("input",{type:"text",value:this.props.nonPlayerCharacterFilter,placeholder:"Search",onChange:function(t){return e.props.changeNonPlayerCharacterFilterText(t.target.value)}}),l.a.createElement("div",null,r.map(function(t){return l.a.createElement(wc,Object.assign({asset:t,assetType:Nn.NonPlayerCharacter,key:t.id},e.props))})))}}]),t}(s.Component),kc=Object(zA.a)(function(e){return e.assets.nonPlayerCharactersIndex},function(e){return e.assets.nonPlayerCharacterFilter},function(e,t){return e?[].concat(e).filter(function(e){return e.name.toLowerCase().indexOf(t)>-1}).sort(function(e,t){return e.name.localeCompare(t.name)}):e}),Dc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.playerCharacters,a=e.nonPlayerCharactersIndex,r=e.editCharacterSheet,n=e.images,A=e.changeNonPlayerCharacterFilterText,c=e.nonPlayerCharacterFilter;return l.a.createElement("div",null,l.a.createElement("h1",null,"Asset List"),l.a.createElement(Ic,{playerCharacters:t,nonPlayerCharactersIndex:a,editCharacterSheet:r,changeNonPlayerCharacterFilterText:A,nonPlayerCharacterFilter:c,images:n}))}}]),t}(s.Component),Pc=Object(d.c)(function(e){return{playerCharacters:e.assets.playerCharacters,nonPlayerCharactersIndex:kc(e),images:e.images.images,nonPlayerCharacterFilter:e.assets.nonPlayerCharacterFilter}},function(e){return{editCharacterSheet:function(t){return e(Ft(t))},changeNonPlayerCharacterFilterText:function(t){return e(function(e){return{type:Je.ASSETS.NONPLAYERCHARACTER.FILTER.TEXT_CHANGE,text:e}}(t))}}})(Dc),Bc=a(28),Tc=a.n(Bc),xc=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).state={current:Nn.PlayerCharacter},a.handleChange=function(e){a.setState({current:e.target.value}),a.props.onChange&&a.props.onChange(e.target.value)},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(Jt.b,{className:e.formControl},l.a.createElement(Jt.f,{htmlFor:"assetType-input"},"Asset Type"),l.a.createElement(Jt.i,{value:this.state.current,onChange:this.handleChange,inputProps:{name:"assetType",id:"assetType-input"}},l.a.createElement(Jt.h,{value:Nn.PlayerCharacter},"Player Character"),l.a.createElement(Jt.h,{value:Nn.NonPlayerCharacter},"Non Player Character")))}}]),t}(s.Component),Qc=Object(Vt.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit}}})(xc),Rc=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).state={name:"",assetType:Nn.PlayerCharacter,uploadId:null},a.onSave=function(){var e={imageRef:"",name:a.state.name};a.props.saveNewAsset(a.state.assetType,e)},a.onChangeAssetType=function(e){return a.setState({assetType:e})},a.onChangeName=function(e){return a.setState({name:e.currentTarget.value})},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("h1",null,"Create Asset"),l.a.createElement(Qc,{onChange:this.onChangeAssetType}),l.a.createElement(Jt.k,{label:"Name",margin:"normal",className:e.nameInput,value:this.state.name,onChange:this.onChangeName}),l.a.createElement(Jt.a,{variant:"contained",className:e.button,onClick:this.onSave},l.a.createElement(FA.a,{className:Tc()(e.leftIcon,e.iconSmall)}),"Save"))}}]),t}(s.Component),Mc=Object(Vt.withStyles)(function(e){return{button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20},nameInput:{margin:e.spacing.unit}}})(Rc),_c=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).saveNewAsset=function(e,t){e===Nn.PlayerCharacter?a.props.saveNewPlayerCharacter(t):e===Nn.NonPlayerCharacter&&a.props.saveNewNonPlayerCharacter(t)},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement(Mc,{saveNewAsset:this.saveNewAsset})}}]),t}(s.Component),Uc=Object(d.c)(function(e){return{assets:e.assets.assets}},function(e){return{saveNewPlayerCharacter:function(t){return e((a=t,{type:Je.ASSETS.PLAYERCHARACTER.NEW.SAVE,playerCharacterData:a}));var a},saveNewNonPlayerCharacter:function(t){return e(tt(t))}}})(_c),Fc=a(99),Lc=a.n(Fc),Hc=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={activeMapId:a.props.activeMapId,roomUrlCopiedTooltipOpen:!1,roomUrlTooltipTimeout:null,isDm:a.props.isDm,stageBackground:a.props.stageBackground||"#ffffff"},a.onChangeStageBackground=function(e){a.setState({onChangeStageBackground:e.target.value}),a.props.updateStageBackground&&a.props.updateStageBackground(a.props.activeMapId,e.target.value)},a.onChangeIsDm=function(e){a.setState({isDm:!!e.target.checked}),a.props.setIsDm&&a.props.setIsDm(!!e.target.checked)},a.onChangeActiveMap=function(e){a.setState({activeMapId:e.target.value})},a.changeMap=function(){console.log("Changing Map to ".concat(a.state.activeMapId)),a.props.setActiveMap&&a.props.setActiveMap(a.state.activeMapId)},a.copyRoomUrl=function(){var e=document.createElement("textarea");e.value=a.props.roomUrl,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);var t=setTimeout(function(){a.setState({roomUrlCopiedTooltipOpen:!1,roomUrlTooltipTimeout:null})},4e3);a.state.roomUrlTooltipTimeout&&clearTimeout(a.state.roomUrlTooltipTimeout),a.setState({roomUrlCopiedTooltipOpen:!0,roomUrlTooltipTimeout:t})},a.onChangeStageBackground=a.onChangeStageBackground.bind(Object(g.a)(a)),a.onChangeIsDm=a.onChangeIsDm.bind(Object(g.a)(a)),a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.stageBackground!==this.props.stageBackground&&this.setState({stageBackground:this.props.stageBackground}),e.activeMapId!==this.props.activeMapId&&this.setState({activeMapId:this.props.activeMapId})}},{key:"importNpcs",value:function(){var e=this,t=prompt("enter NPC json..."),a=JSON.parse(t);if(a){var r=!0,n=!1,A=void 0;try{for(var c,i=function(){var t=c.value,a=e.props.nonPlayerCharactersIndex.find(function(e){return e.name===t.name});a?e.props.updateNonPlayerCharacter(a.id,t):e.props.saveNewNonPlayerCharacter(t)},o=a[Symbol.iterator]();!(r=(c=o.next()).done);r=!0)i()}catch(s){n=!0,A=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw A}}alert("Done!")}else alert("Failed to parse JSON.")}},{key:"exportNpcs",value:function(){throw new Error("currently broken. Needs to load the full data from firebase.")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:Lc.a.generalPanel},l.a.createElement("h1",null,"General"),l.a.createElement("h2",null,"TODO:"),l.a.createElement("ul",{style:{marginBottom:"50px"}},l.a.createElement("li",null,"Logout button")),l.a.createElement("div",{className:Lc.a.settingWrapper},l.a.createElement("div",{className:Lc.a.settingRow},l.a.createElement(Jt.l,{PopperProps:{disablePortal:!0},placement:"top",open:this.state.roomUrlCopiedTooltipOpen,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:"Copied!"},l.a.createElement(Jt.a,{variant:"contained",fullWidth:!0,onClick:this.copyRoomUrl},"Copy Room URL"))),l.a.createElement("div",{className:Lc.a.settingRow},l.a.createElement("input",{type:"color",id:"stageBackground",name:"stageBackground",onChange:this.onChangeStageBackground,value:this.state.stageBackground,style:{margin:".4rem"}}),l.a.createElement("label",{htmlFor:"stageBackground",style:{font:'1rem "Fira Sans", sans-serif'}},"Map Background Colour")),l.a.createElement(Jt.a,{onClick:function(){return e.importNpcs()}},"Import NPCs"),l.a.createElement(Jt.a,{onClick:function(){return e.exportNpcs()}},"Export NPCs"),l.a.createElement("div",{className:Lc.a.settingRow},l.a.createElement(Jt.c,{control:l.a.createElement(Jt.j,{value:this.state.isDm,onChange:this.onChangeIsDm}),label:"Is DM?"})),this.state.isDm&&l.a.createElement("div",{className:Lc.a.settingRow},l.a.createElement("span",null,"Active Map ID ",this.props.activeMapId),l.a.createElement("select",{value:this.state.activeMapId,onChange:this.onChangeActiveMap},this.props.maps.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.id)})),l.a.createElement("button",{onClick:this.changeMap},"Change!"),l.a.createElement("div",null,"Warning: This is still a little buggy! E.g. You need to refresh once changed"))))}}]),t}(s.Component),Gc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.backgroundColour,a=e.updateStageBackground,r=e.isDm,n=e.setIsDm,A=e.maps,c=e.setActiveMap,i=e.activeMapId,o=JSON.parse(localStorage.getItem("firebaseConfig")),s=document.location+"?projectId=".concat(o.projectId,"&apiKey=").concat(o.apiKey);return l.a.createElement(Hc,{maps:A,activeMapId:i,setActiveMap:c,isDm:r,setIsDm:n,stageBackground:t,updateStageBackground:a,roomUrl:s,nonPlayerCharactersIndex:this.props.nonPlayerCharactersIndex,updateNonPlayerCharacter:this.props.updateNonPlayerCharacter,saveNewNonPlayerCharacter:this.props.saveNewNonPlayerCharacter})}}]),t}(s.Component),Yc=Object(d.c)(function(e){return{backgroundColour:VA(e),isDm:e.auth.isDm,nonPlayerCharactersIndex:e.assets.nonPlayerCharactersIndex,maps:e.maps.maps,activeMapId:e.globalState.state.activeMapId}},function(e){return{updateStageBackground:function(t,a){return e(function(e,t){return{type:Va.MAPS.UPDATE.BACKGROUND_COLOUR,mapId:e,colour:t}}(t,a))},setIsDm:function(t){return e(function(e){return{type:Aa.DM.SET,value:e}}(t))},updateNonPlayerCharacter:function(t,a){return e(et(t,a))},saveNewNonPlayerCharacter:function(t){return e(tt(t))},setActiveMap:function(t){return e(function(e){return{type:Pr.GLOBAL_STATE.SET_ACTIVE_MAP,mapId:e}}(t))}}})(Gc),Kc=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,A=new Array(r),o=0;o<r;o++)A[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(A)))).onClickTab=function(e){return function(){a.props.open&&a.props.currentPanel===e?(a.props.closeTabs(),a.props.openPanel(null)):(a.props.openPanel(e),a.props.open||a.props.openTab())}},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.openPanel,r=e.closeTabs;return l.a.createElement("div",{style:{zIndex:99,position:"absolute",top:0,bottom:0,right:t?0:-400,display:"flex",flexDirection:"row",transition:"right 500ms",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",WebkitTransitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"}},l.a.createElement("div",{style:{position:"absolute",top:"50%",left:"-43px"}},l.a.createElement(mc,{text:"Uploads",name:"uploads",active:this.props.currentPanel===BA.UPLOAD,onClick:this.onClickTab(BA.UPLOAD)}),l.a.createElement(mc,{text:"Assets",name:"assets",active:this.props.currentPanel===BA.ASSETS,onClick:this.onClickTab(BA.ASSETS)}),l.a.createElement(mc,{text:"General",name:"general",active:this.props.currentPanel===BA.GENERAL,onClick:this.onClickTab(BA.GENERAL)})),l.a.createElement("div",{style:{position:"relative",width:"400px",backgroundColor:"rgba(80, 80, 80, 0.8)"}},l.a.createElement("div",{style:{padding:5,backgroundColor:"red",textAlign:"center",position:"absolute",top:0,left:-42,width:32,height:32,opacity:t?1:0,transition:"opacity 500ms",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){r(),a(null)}},l.a.createElement("span",{style:{}},l.a.createElement(_A.a,null))),this.props.currentPanel===BA.UPLOAD&&l.a.createElement(fc,null,l.a.createElement(ea,null),l.a.createElement(yc,null)),this.props.currentPanel===BA.ASSETS&&l.a.createElement(fc,null,l.a.createElement(Uc,null),l.a.createElement(Pc,null)),this.props.currentPanel===BA.GENERAL&&l.a.createElement(fc,null,l.a.createElement(Yc,null))))}}]),t}(s.Component),Wc=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return l.a.createElement(Kc,{open:this.props.sidebarOpen,openTab:this.props.openTab,closeTabs:this.props.closeTabs,openPanel:this.props.openPanel,currentPanel:this.props.sidebarPanel})}}]),t}(s.Component),zc=Object(d.c)(function(e){return{sidebarOpen:e.ui.sidebarOpen,sidebarPanel:e.ui.sidebarPanel}},function(e){return{openTab:function(){return e({type:Ir.UI.SIDEBAR.OPEN})},closeTabs:function(){return e({type:Ir.UI.SIDEBAR.CLOSE})},openPanel:function(t){return e(function(e){return{type:Ir.UI.SIDEBAR.OPEN_PANEL,panel:e}}(t))}}})(Wc);a.d(t,"App",function(){return Jc});var Jc=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).configLoaded=void 0,a.configLoaded=!!localStorage.getItem("firebaseConfig"),a.state={projectName:"",apiKey:""},a}return Object(o.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=Object(Vt.createMuiTheme)({palette:{type:"dark"}});return l.a.createElement(d.a,{store:TA},l.a.createElement(h.a,null,l.a.createElement(G.DragDropContextProvider,{backend:QA.a},l.a.createElement("div",{className:"App"},l.a.createElement(Vt.MuiThemeProvider,{theme:e},l.a.createElement(u.c,null,l.a.createElement(u.a,{exact:!0,path:"/",render:function(){return l.a.createElement("div",null,l.a.createElement(zc,null),l.a.createElement("div",{className:m.a.overlayWrapper},l.a.createElement("div",{style:{zIndex:9999,position:"absolute",bottom:0,left:0}},l.a.createElement(pc,null))),l.a.createElement("div",{className:m.a.mapWrapper},l.a.createElement(XA,null),l.a.createElement(cr,null)))}}),l.a.createElement(u.a,{path:"/upload",render:function(){return l.a.createElement(ea,null)}}),l.a.createElement(u.a,{path:"/login",render:function(){return l.a.createElement(ha,null)}}),l.a.createElement(u.a,{path:"/characterSheet/:id",render:function(e){return l.a.createElement(Gt,Object.assign({popout:e.match.params.id},e))}})))))))}}]),t}(s.Component);t.default=Jc},883:function(e,t,a){"use strict";a.r(t);var r=a(12),n=a.n(r),A=a(374),c=a(0),i=a.n(c),o=a(46),s=a.n(o);a(479),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(66),u=a(21),p=a(36),m=a.n(p);a(187);a(891).a({dsn:"https://04f41a05077c4badbe2fb7c804604233@sentry.dnd-player.com/2"});var h={projectId:"",apiKey:"",username:"",password:""},d=function(){var e=Object(A.a)(n.a.mark(function e(){var t,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={apiKey:h.apiKey,authDomain:"".concat(h.projectId,".firebaseapp.com"),databaseURL:"https://".concat(h.projectId,".firebaseio.com"),projectId:h.projectId,storageBucket:"".concat(h.projectId,".appspot.com")},a=m.a.initializeApp(t),e.prev=2,e.next=5,a.auth().signInWithEmailAndPassword(h.username,h.password);case 5:e.sent,localStorage.setItem("firebaseConfig",JSON.stringify(t)),window.location.replace(window.location.origin),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert("Failed to log in. ".concat(e.t0.message));case 13:return e.prev=13,a.delete(),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[2,10,13,16]])}));return function(){return e.apply(this,arguments)}}(),g=window.location.search.match(/\?projectId=(.*?)&apiKey=(.*)$/);if(g)h.projectId=g[1],h.apiKey=g[2];else if(null==localStorage.getItem("firebaseConfig")){var f=Object(l.createMuiTheme)({palette:{type:"dark"}});s.a.render(i.a.createElement("div",{className:"App"},i.a.createElement(l.MuiThemeProvider,{theme:f},i.a.createElement("div",{className:"projectInputs"},i.a.createElement(u.k,{label:"Project Name",placeholder:"dnd-player-b8372",onChange:function(e){return h.projectId=e.target.value},margin:"normal"}),i.a.createElement(u.k,{label:"API Key",placeholder:"AIzaSd***************pK5ao6g95Q-9auWt-8",onChange:function(e){return h.apiKey=e.target.value},margin:"normal"}),i.a.createElement(u.k,{label:"Username",placeholder:"email@example.com",onChange:function(e){return h.username=e.target.value},margin:"normal"}),i.a.createElement(u.k,{label:"Password",type:"Password",onChange:function(e){return h.password=e.target.value},margin:"normal"}),i.a.createElement(u.a,{variant:"contained",color:"primary",onClick:function(){return d()}},"Save")))),document.getElementById("root"))}else{var E=a(882).default;s.a.render(i.a.createElement(E,null),document.getElementById("root"))}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,t,a){e.exports={loadingWrapper:"Map_loadingWrapper__1SaP1",loadingText:"Map_loadingText__1azfI",dragAddObjectWrapper:"Map_dragAddObjectWrapper__3LbFl",dragAddObjectText:"Map_dragAddObjectText__1nGcz",measureToolWrapper:"Map_measureToolWrapper__FFK49",squaredOne:"Map_squaredOne__LWIgp"}},99:function(e,t,a){e.exports={generalPanel:"GeneralPanel_generalPanel__1aqft",settingWrapper:"GeneralPanel_settingWrapper__iiGLA",settingRow:"GeneralPanel_settingRow__2UX_s"}}},[[472,1,2]]]);
//# sourceMappingURL=main.ed40a13a.chunk.js.map